Este trabalho descreve o R-MAC, um protocolo de acesso ao meio projetado para atender as requisições de energia das Redes de Sensores Sem Fio (RSSFs).
A fim de melhor explicar o protocolo proposto, num primeiro momento foi realizado um estudo em redes wireless em geral.
Todas as camadas de uma RSSF são introduzidas, com ênfase na camada de controle de acesso ao meio (MAC), que é a motivação principal do R-MAC.
O problema do acesso ao meio é discutido, e alguns tópicos de interesse são investigados.
Uma discussão de protocolos relacionados também é conduzida, e os aspectos específicos dos protocolos estudados considerados no projeto do R-MAC.
O R-MAC foi desenvolvido para RSSF dirigidas a eventos, com coleta periódica, insensível a latência da rede e com baixa taxa de envio.
A eficiência no consumo de cada nodo, aumenta o tempo de vida da RSSF como um todo.
Além disso, propõe- se uma técnica para buscar novas conexões toda vez que um nodo sair da rede.
Esta técnica resulta no aumento da interação de cada nodo com a rede.
O protocolo proposto é de fácil implementação em nodos de RSSFs baseados em microprocessador, e suas eficiência e aplicabilidade foram mostradas com a avaliação de equações para estimar o consumo de potência.
Palavras-chave: Redes de Sensores Sem Fio, Protocolo MAC, Consumo Eficiente de Energia.
Avanços nas áreas de comunicação wireless, eletrônica digital e sensores estão viabilizando a fabricação de dispositivos de baixo custo e consumo reduzido.
De entre as tecnologias que se destacam nesse cenário estão os dispositivos chamados de nodos sensores.
Nodos sensores são sistemas embarcados, que apesar de possuírem uma baixa capacidade de processamento e de memória, são capazes de realizar várias tarefas.
A interação de vários nodos por enlace sem fio forma um sistema de rede.
Este sistema apresenta um grande potencial para aplicação em diversas áreas.
Atividades como monitoramento ambiental, controle industrial, sistemas médicos, segurança pública e de ambientes em geral, áreas de desastres e de risco para vidas humanas, transporte e sistemas móveis são algumas das aplicações possíveis para uma Redes de Senores Sem Fio (RSSF).
Se comparadas com outras redes multimídias sem fio, como, MANET e Bluetooth, as RSSF são similares na infra-estrutura de comunicação.
Porém, diferem em alguns aspectos como, por exemplo, a grande quantidade de elementos (nodos) e a mobilidade.
Além disso, os nodos de uma rede Bluetooh ou MANET, geralmente, são dispositivos de uso pessoal e possuem baterias portáteis que podem ser recarregadas ou trocadas por seus usuários.
Em muitas aplicações de RSSF, centenas ou milhares de elementos distribuídos são depositados em áreas remotas, funcionando sem a intervenção humana direta.
Logo, por questão de conveniência, os nodos sensores devem operar com baterias O consumo de energia em RSSF é um importante ponto para o projeto destas redes.
A maior parte das aplicações em RSSF exigem que a rede funcione por longos períodos de tempo sem intervenção humana.
Este tempo pode variar de alguns messes até alguns anos, sem que a bateria seja substituída.
Logo, a característica que mais diferência uma RSSF das outras rede sem fio é a capacidade restrita da fonte de energia dos dispositivos.
Para aumentar o tempo de vida de uma RSSF, restrições do consumo de energia são pesquisadas em vários níveis, desde a arquitetura do hardware, sistema operacional protocolos de acesso ao meio, protocolos de roteamento e algoritmos utilizados por as aplicações.
O consumo de energia num nodo de uma RSSF pode ser dividido em três domínios:
Sensoriamento, comunicação e processamento dos dados, conforme mostrado na Figura 1.
Ao longo de o desenvolvimento do presente trabalho, foi realizada uma pesquisa de forma a indicar os níveis de consumo de cada domínio num nodo sensor, os resultados desta pesquisa estão resumidas na Tabela 1.
Em o domínio do processamento a energia consumida é muito menor que a energia necessária para a comunicação.
O domínio de comunicação é o maior responsável por o consumo de energia num nodo sensor.
Em a transmissão de dados (TX) o consumo é bastante elevado.
Ainda, na recepção ou na procura por comunicação (RX), o consumo de energia também é significativo.
conseqüente-mente, gerência a comunicação entre os nodos é uma boa estratégia para evitar perdas e garantir um consumo eficiente de energia numa RSSF.
Considerando o problema do consumo de energia relacionado ao método de comunicação de um nodo de uma RSSF, isso vem a ser a principal motivação desta pesquisa.
Também é importante destacar o estudo de protocolos de comunicação para redes wireless como uma importante motivação, assim como a aplicação do protocolo proposto numa RSSF.
Nodos sensores são dispositivos projetados para terem um baixo custo.
Logo, seu hardware é limitado tendo pouca capacidade de memória, baixa capacidade de processamento e dispositivos de comunicação com poucos recursos.
Portanto, o uso de protocolos tradicionais ad hoc não é viável em RSSF.
A comunicação em RSSF pode ser dividida em quatro camadas do modelo OSI da Iso, Física, Enlace, Rede e Transporte.
A camada de Enlace é responsável por o controle de acesso ao meio (MAC -- Medium Access Control), sendo descrita por um protocolo.
Este protocolo controla a transmissão de pacotes na rede, tentando assegurar que não haverá colisões de pacotes por interferência de outros nodos da rede, gerenciando a negociação entre os mesmos.
O objetivo geral deste trabalho é investigar e analisar protocolos de acesso ao meio para redes ad hoc e de sensores, propondo as técnicas que possibilitem um consumo eficiente de energia numa RSSF.
Estas técnicas servirão como base para a especificação de um protocolo MAC para RSSFs dirigida a eventos, com coleta periódica, insensível a latência da rede e com baixa taxa de envio.
Sendo o seu principal objetivo eliminar as trocas freqüentes de bateria nestas redes, aumentando o tempo de vida das mesmas.
Esta dissertação está estruturada em cinco capítulos.
Em o capítulo 1 foi apresentada uma introdução com uma visão geral do trabalho, bem como a motivação e os objetivos.
O capítulo 2 descreve os conceitos básicos sobre redes de sensores sem fio, os projetos de pesquisas atuais, as características dos nós sensores e a sua pilha de protocolos, focando principalmente na camada de enlace.
Em o capítulo 3 é apresentado os trabalhos relacionados e o estado da arte em protocolos de acesso ao meio para RSSF.
O capítulo 4 apresenta a proposta do protocolo RMAC.
O capítulo 5 apresenta as simulações.
Finalmente, o capítulo 6 apresenta as conclusões e sugestões para trabalhos futuros.
Meio Em este capítulo serão apresentados conceitos importantes para a compreensão da proposta descrita nesta dissertação.
A primeira seção apresenta uma breve introdução sobre RSSFs apresentando as principais características da rede, uma idéia básica da arquitetura utilizada nos nodos sensores e alguns pontos importantes para projetos de RSSF.
Em seguida, é apresenta uma visão da comunicação em RSSFs dividida em camada Física, de Enlace, de Rede e camada de Transporte.
A seção 2.1 apresenta uma breve explicação sobre as técnicas de acesso e sua relação com RSSF.
Por último, são apresentados conceitos importante para a implementação de um protocolo de acesso ao meio em RSSF, mostrando os principais problemas de acesso e estratégias para resolver- los.
Redes de sensores introduzem um novo padrão de monitoramento, que permite observar e interagir com fenômenos físicos em tempo real.
Individualmente cada nodo tem um baixo custo, o que permite a utilização de um grande número de nodos sensores numa rede.
O potencial de observação e controle do mundo real permite que as RSSFs se apresentem como uma alternativa para diversas aplicações, como:
Monitoramento ambiental, gerenciamento de infra-estrutura, biotecnologia, monitoramento e controle industrial, segurança pública e de ambientes em geral, áreas de desastres e risco para vidas humanas, transporte, medicina, construção civil e controle militar.
De entre as principais aplicações de RSSF estão o monitoramento e a coleta de dados.
Os nodos sensores podem ser lançados sobre áreas remotas (reservas ambientais, oceanos, vulcões, rios, florestas, etc.) formando uma rede.
Esta rede sem fio ad hoc monitora e coleta dados sobre os fenômenos de interesse, sem intervenção humana.
O processamento dos dados pode ser local ou distribuído.
Contudo, as informações coletadas são distribuídas na rede através de um esquema de comunicação de múltiplos saltos se comunica com o observador ou com outras redes, conforme mostrado na Figura 2.
O AP se comunica com os nodos da rede e também com outras rede, ele é chamado de sink node.
O AP, ou sink node, também pode estar conectado a uma estação base (Bs -- Base Station), que é uma estação de armazenamento dos dados.
A arquitetura de um nodo sensor pode ser descrita, basicamente, por uma unidade de sensoriamento (Sistema de Sensores), uma unidade de processamento que pode ser composta por um microcontrolador ou um DSP (µ -- controlador), uma unidade de armazenamento (Memória) e uma unidade de comunicação (Sistema de comunicação), ilustrado na Figura 3.
Um nodo pode incluir também memória não volátil e recursos on- chip ou off-chip, tais como conversores digital-analógico (DAC), conversores analógico-digital (ADC), UARTs, controladores de interrupção, contadores, temporizadores e sensores.
Ainda, o sistema de alimentação de energia do nodo sensor (Sistema de Energia) pode funcionar tanto com baterias, quanto por fontes alternativas, como, geradores de vibração, energia solar ou por ondas eletromagnéticas.
Diferentes plataformas vêm sendo propostas na construção de RSSFs, tanto por projetos acadêmicos, quanto por projetos comerciais.
Um projeto de um nodo sensor é dirigido à aplicação e as várias arquiteturas existentes são adaptadas às restrições específicas de cada aplicação.
A tendência é que estes dispositivos se tornem cada vez mais acessíveis com a produção em larga escala de diferentes tipos de nodos sensores.
O consumo do módulo de comunicação é diretamente dependente do tipo de dispositivo de comunicação utilizado como, por exemplo, Rádio Freqüência (RF) ou Infra-Red (Ir).
A Tabela 1 mostra uma comparação entre este dois dispositivos.
Apesar de o dispositivo de Ir ter o consumo bem menor que o de RF, existem algumas desvantagens.
Por exemplo, os dispositivos devem estar alinhados para realizar a comunicação.
Outra desvantagen é o alcance da comunicação.
O projeto de uma RSSF é influenciado por muitos fatores que incluem tolerância a falhas, escalabilidade, custo de produção, ambiente operacional, topologia da rede, restrições de hardware, meio de transmissão e consumo de energia.
Cada um destes fatores exige requisitos específicos na concepção e projeto dos nodos.
Esquemas de modulação, estratégias para superar os efeitos da propagação de sinal e projeto de hardware de baixo consumo, são requisitos do projeto da camada física.
Ainda, os parâmetros de configuração, operação e manutenção variam com os objetivos da aplicação.
De esse modo, ao se realizar um projeto de uma RSSF deve- se levar em consideração alguns requisitos:·
Tamanho reduzido e baixo consumo de potência:
Este é um ponto chave para nodos sensores, pois tamanho e potência muitas vezes obrigam o uso de dispositivos básicos de processamento, armazenagem, e capacidade de conexão.
Certamente, reduzir o tamanho e a potência requerida são fatores decisivos para um projeto de hardware de um nodo sensor.
Igualmente, o software deve ser o mais eficiente possível no uso do processador e memória, e os dispositivos de comunicação devem consumir pouca potência.·
Operações de alta-concorrência:
A principal função de um nodo sensor é coletar e enviar informações, com pouco processamento.
Normalmente, com comandos simples como parada ou espera.
Por exemplo, um evento ocorre numa determinada região.
A informação pode ser simultaneamente capturada, manipulada e enviada para rede por diversos nodos da mesma região.
Isso causa um tráfego excessivo na rede, pois seria necessário apenas um nodo identificar o evento.
Outro problema é que os nodos têm uma pequena capacidade de armazenamento interno, logo armazenar dados não é muito atrativo.
Assim, as tarefas de um nodo geralmente envolvem um número maior de tarefas de baixo nível de processamento.·
Paralelismo Limitado e Controle Hierárquico:
O número de controladores independentes, a capacidade dos controladores, e a troca de informações entre processadormemória é muito inferior num nodo sensor se comparado com um microcomputador padrão IBM-PC.
Tipicamente, o sensor ou atuador possui uma interface primitiva para um único chip microcontrolador.
Em contraste, sistemas convencionais distribuem processos concorrentes para cada dispositivo, em múltiplos níveis de controle.
As limitações de potência, espaço e limitações físicas obrigam os nodos sensores a suportar concorrência intensiva gerenciada por um microcontrolador embarcado.·
Diversidade de Projetos e Uso: Redes de sensores são projetadas para satisfazer aplicações específicas, sendo necessário que o hardware dê suporte para cada aplicação.
Existe uma grande quantidade de aplicações para redes de sensores, e também uma grande variedade de dispositivos que podem ser usados.
Para qualquer dispositivo especificado, é importante que somente os componentes de software requeridos para a síntese com o hardware sejam carregados.
De essa forma, estes dispositivos necessitam um grau não usual de modularidade de software, e devem ser também bastante eficientes.·
Robustez e Tolerância a Falhas:
Uma rede de sensores pode ser composta por um grande número de nodos.
Estes dispositivos podem ser usados também em aplicações onde fiquem por longos períodos sem manutenção.
Logo, é necessário que os nodos possuam uma certa confiabilidade.
As técnicas tradicionais de redundância para aumentar a confiabilidade, são limitadas por o espaço e por a potência.
Embora redundância entre dispositivos seja mais atrativa que redundância dentro de o dispositivo, o custo da comunicação entre os dispositivos inviabiliza esta opção.
Adicionalmente, pode- se acrescentar confiabilidade à aplicação tolerando individualmente dispositivos falhos.
Por fim, o sistema operacional rodando num simples nodo deve ser não apenas robusto, mas também facilitar o desenvolvimento e a confiabilidade das aplicações.
A comunicação em RSSF possui características particulares e o uso de protocolos ad hoc tradicionais não atende aos requisitos destas redes.
Protocolos tradicionais requerem muitos Kbytes de memória e alguns recursos do hardware indisponíveis em nodos sensores, como, por exemplo detecção da onda portadora.
Por este motivo novos protocolos têm sido desenvolvidos para se adequarem as necessidades e limitações das RSSFs.
O estudo dos protocolos de comunicação em RSSF é feito por camadas, como sugerido por o modelo OSI/ ISO.
Contudo, devido a simplicidade destes dispositivos, a pilha completa da arquitetura OSI/ ISO não é necessária.
Sendo assim a pilha de protocolos para RSSFs pode ser reduzida nas camadas Física, Enlace, Rede e de Transporte, como mostra a Figura 4.
A camada física é responsável por transmitir bitstream puros nos dois lados da comunicação.
Isto é, deve converter uma seqüência de dígitos binários para sinais elétricos (cabo), sinais de luz (IR), ou eletromagnéticos (RF).
Em RSSF, normalmente, são utilizados dispositivos de comunicação RF ou Ir, sendo os dispositivos RF mais utilizados.
A comunicação por Ir não necessita de antena e seu consumo é bem menor se comparado com a RF, conforme apresentado na Tabela 1 do Capítulo 1.
Porém, a grande desvantagem da comunicação Ir em relação a RF é a necessidade do alinhamento dos dispositivos transmissor e receptor para ocorrer a comunicação.
Em a comunicação RF os dispositivos são espalhados por uma determinada área sem a necessidade de alinhamento, pois a comunicação é realizada por ondas eletromagnéticas, que acabam formando um raio de comunicação em torno de o dispositivo.
Outra vantagem da comunicação RF é o maior alcance, que dependendo da freqüência e potência do dispositivo pode chegar a 10000m, sendo que o alcance de dispositivos Ir não ultrapassa 10m.
Vários aspectos afetam o consumo de energia na comunicação RF, tais como o tipo de modulação, taxa dos dados, freqüência e energia de transmissão.
Em geral, o módulo de RF pode operar em quatro modos distintos:
Transmitindo, recebendo, idle (módulo de RF não está enviando e nem recebendo mensagens) e sleep (módulo em standby).
Em alguns casos, mesmo estando no estado idle, um módulo de RF consome energia como se estivesse no modo de recepção, nestes casos é importante traçar outras estratégias para economia de energia.
A camada física simplesmente envia e recebe a seqüencia de bits (bitstream).
Já a função da camada de enlace é detectar e corrigir erros na transmissão de dados, particionar os dados em frames e controlar o fluxo destes frames entre os dois lados da comunicação.
Os protocolos desta camada são conhecidos como protocolos de acesso ao meio ou simplesmente protocolos MAC (Medium Access Control).
Os requisitos da camada de enlace variam de acordo com o tipo de aplicação.
Por exemplo, numa RSSF dirigida a eventos os nodos podem permanecer com os transceptores inativos por longos períodos de tempo.
Porém, quando um fenômeno é detectado vários nodos passam repentinamente para o estado ativo.
Quando a RSSF é densa, composta por vários nodos sensores na mesma área, a ocorrência do evento levará diversos nodos a acessar o meio ao mesmo tempo para transmitir seus dados, o que pode causar colisões.
Apesar de RSSFs serem diferentes das redes tradicionais, elas herdam problemas de comunicação das redes sem fio.
Em a maior parte dos casos, as redes sem fio empregam um dispositivo de comunicação de rádio de um único canal com modo de comunicação half-duplex, ou seja, a comunicação é bidirecional e não simultânea.
O rádio utilizando a mesma freqüência pode somente transmitir ou receber informações a cada instante de tempo.
Sendo assim, o método empregado nas tradicionais redes Ethernet, CSMA/ CD não pode ser empregado em redes sem fio, uma vez que é baseado em comunicação Full-Duplex.
As restrições dos protocolos empregados em RSSFs são ainda maiores que as restrições das redes MANETs (Mobile Ad-Hoc Network), devido a o hardware utilizado por as mesmas.
Desta forma, não existe suporte por o hardware para detecção de portadora, detecção de colisão, enquadramento específico, codificação ou balanceamento de energia.
O rádio utilizado possui características de baixa potência, largura de banda limitada e um único canal na freqüência base ISM.
Tais condições, assim como outras características particulares das RSSFs, motivam um controle de acesso ao meio.
Existem vários protocolos de acesso ao meio projetados para RSSFs disponíveis na literatura, como por exemplo, protocolo S-MAC, protocolo ARC, protocolo B-MAC, protocolo Trama que serão apresentados com mais detalhes no A principal função da camada de rede é prover o serviço de roteamento.
Este serviço pode ser definido como o processo por o qual a rede consegue identificar o destinatário das mensagens e encontrar um caminho entre a origem e o destino desta mensagem.
Este processo é de fundamental importância em todas as redes de computadores, e em RSSFs não é diferente.
Existem diversas formas de fazer o roteamento entre os nodos em RSSFs, sendo que a eficiência deste roteamento está diretamente ligada na forma como este roteamento é feito.
Geralmente, as RSSFs oferecem um serviço de comunicação multi-hop.
Contudo, o tipo de aplicação destas redes e os requisitos de roteamento diferem de outras redes em alguns aspectos, como:·
A forma de comunicação típica de uma RSSF é unidirecional no sentido dos nodos fontes para o AP.·
Os dados dos nodos fontes em geral retratam um fenômeno comum aos nodos sensores próximos, portanto, existe a probabilidade de redundância dos dados transmitidos.·
Normalmente os nodos sensores possuem pouca ou nenhuma mobilidade.
Sendo que as características de formação espontânea das rede ad hoc serve para suprimir nodos que saem da rede por falta de energia, por exemplo.·
A principal restrição nas RSSFs é a limitação de energia.
Esta limitação é bem mais crítica nestas rede, pois os dispositivos são menores (as baterias também devem ser menores) e elas supostamente funcionarão em locais de difícil acesso que não prevê a recarga ou troca das baterias.
Portanto, isso motiva encontrar novas soluções de endereçamento que atendam as restrições das RSSFs considerando suas particularidades.
Algumas alternativas são propostas como endereçamento espacial, difusão direcionada, endereçamento baseado em atributos (Spins) e endereçamento de transações (RETRI).
O trabalho da camada de transporte é prover um serviço de comunicação site- to site, isto é, a camada de transporte aceita mensagens arbitrariamente, abstraindo todos os detalhes da comunicação das camadas anteriores.
Ao contrário de as redes tradicionais, o uso de protocolos de transporte em RSSFs nem sempre é possível.
A maioria das aplicações nestas redes admitem a perda de dados.
Assim, um mecanismo elaborado para garantia de envio de dados não é justificado e pode até causar um gasto desnecessário de energia.
Apesar disso, algumas aplicações ou tarefas na RSSF necessitam de entrega confiável de dados, como, por exemplo, serviços de reprogramação de nodos e funções de gerenciamento, como desligamento de nodos.
Para resolver este problema, em alguns casos as mensagens são re-enviadas até a confirmação do recebimento.
Adicionalmente, alguns protocolos da camada de roteamento utilizam técnicas com o intuito de diminuir a perda de dados, o que melhora o desempenho da camada de transporte.
A difusão direcionada é uma destas técnicas, os dados são encaminhados através de vários caminhos da rede com a perspectiva de diminuir a perda de dados.
Contudo, estas técnicas aumentam a consumo de energia diminuindo o tempo de vida da rede e limitando o número de aplicações da RSSF.
O objetivo dessas técnicas é controlar o acesso ao meio dos dispositivos que estão presentes na comunicação.
Em comunicação wireless, quando dois dispositivos estão ocupando o mesmo recurso ao mesmo tempo ocorre uma colisão e a mensagem enviada é perdida, o que obriga um re-envio da mesma.
As técnica de acesso ao meio estabelecem regras para um melhor aproveitamento dos recursos de comunicação.
Com estas técnicas cada dispositivo presente na comunicação tem o direito de ocupar o meio de uma maneira organizada, garantindo a comunicação e evitando freqüentes colisões.
As RSSFs possuem características próprias que um protocolo de acesso ao meio deve levar em consideração e sempre que possível tirar vantagens destas características.
Os nodos da RSSF formam um sistema colaborativo, normalmente, servindo a um pequeno número de aplicações.
Com isso, conceitos de fairness (seção 2.4.3) não são tão importantes.
Ainda, é pouco provável que um evento utilize toda a largura de banda da rede.
Em muitas aplicações em RSSF os nodos ficam por longos períodos a espera que um evento seja detectado.
Os nodos não necessitam estar ativos por todo o período de tempo.
Podemos assumir que numa RSSF os vizinhos de um nodo são relativamente fixos.
Esta seção apresenta as técnicas mais conhecida de acesso ao meio, FDMA (FrequencyDivision Multiple Access), TDMA (Time Division Multiple Access), CDMA (Code Division Em o acesso ao meio por divisão de freqüência, uma faixa de freqüência do recurso de comunicação é destinada a um usuário por um longo período de tempo ou permanentemente.
O recurso de comunicação pode conter simultaneamente diversos sinais separados por faixas de freqüência, como ilustrado na Figura 5.
A faixa de freqüência 1 contém sinais que operam entre as freqüências f0 e f1, a segunda faixa de freqüência contém sinais entre f2 e f3, e assim sucessivamente dentro de os limites de operação.
A região entre duas faixas de freqüência é chamada de faixa de guarda, e funciona como uma zona de tolerância, que reduz a interferência entre os sinais de dois canais de freqüência adjacente, os sinais nessa faixa são descartados.
Para que o Recurso de Comunicação (RC) seja dividido por freqüência é necessário que os sinais sejam modulados em freqüências diferentes.
Sinais modulados em freqüências diferentes podem ser transmitidos simultaneamente.
Contudo, para que o receptor receba a mensagem este deve estar modulado na mesma freqüência.
Normalmente, os dispositivos de RF utilizados em nodos sensores não possuem suporte a multi-freqüências.
Para receber uma mensagem numa freqüência diferente o dispositivo deve alterar a configuração do módulo RF.
Cada nova faixa de freqüência em que o dispositivo deve operar exige um circuito adicional, o que faz com que este tipo de técnica não seja muito comum em RSSF.
Em o método CDMA cada nodo na rede tem um código diferente dos seus vizinhos, e podem acessar a rede a qualquer momento, Figura 6.
Todos os nodos são assíncronos e deve existir um receptor ativo todo tempo.
O projeto PicoRadio, para o exemplo, propõe um protocolo multi-canal de acesso denominado de &quot;30 code division multiple access «CDMA.
Cada nodo da rede tem um código diferente dos seus vizinhos.
Todos os nodos são assíncronos.
Contudo, cada nodo tem um dispositivo receptor ultra-low-- power que permanece ativo, escutando o meio, o tempo todo.
Quando uma mensagem de &quot;wakeup beacon «com o código do nodo é percebida por o receptor &quot;wakeup beacon», o nodo ativa seu módulo RF para começar a comunicação.
Em o compartilhamento dos recursos de comunicação baseado em divisão de tempo apresentado por o TDMA, cada usuário tem o direito de utilizar todo o canal por um curto período de tempo, chamado janela de tempo (slot).
A Figura 7 ilustra um exemplo da utilização deste método com três usuários.
Cada usuário tem direito a uma janela de tempo.
O tempo entre cada janela é chamado de tempo de guarda.
Sendo utilizado como uma zona de tolerância para reduzir a interferência entre os sinais de duas janelas adjacentes.
O tempo que todos os usuários levam para utilizar o canal é chamado de frame.
A Figura 8 mostra a estrutura básica de um frame.
Os frames são fixos e se repetem ao longo de o tempo.
Uma mensagem na janela de tempo é dividida em duas partes, uma para controle e outra para dados.
A parte de controle normalmente contém informação para realizar a sincronização, endereçamento e controle de erro.
A parte de dados contém informação a ser transferida.
O método TDMA estruturado com janelas de tempo fixas é eficiente quando é possível prever a comunicação com antecedência, e quando o tráfego do canal é intenso.
Porém, quando o tráfego é pequeno ou esporádico, fixar o tamanho das janelas de tempo pode significar um desperdício dos recursos de comunicação.
A Figura 9 ilustra um exemplo de um sistema composto de quatro usuários por frame.
Em o primeiro frame o usuário C não transmite dados.
Durante o segundo frame o usuário B não envia nada.
E no terceiro frame é o usuário A que está inativo.
Em o método TDMA as janelas de tempo são designadas previamente aos usuários.
Se o proprietário da janela não a utiliza esta será desperdiçada, Figura 9 (b).
Quando as exigências do sistema são desconhecidas, como no caso de a Figura 9, pode ser mais eficiente utilizar um compartilhamento dinâmico ou invés de um fixo.
Alguns méto- dos como multiplexação estatística e concentradores, podem trazer um melhor desempenho ao sistema, como pode ser visto na Figura 9 (c).
Vários projetos de nodos sensores utilizam a técnica de acesso ao meio TDMA, de entre eles podemos citar o projeto µAMPS (µ-Adptative O protocolo de acesso ao meio CSMA/ CA tenta evitar a ocorrência de colisões definindo a comunicação entre duas estações, emissora e transmissora, através de um diálogo de três passos RTS/ CTS/ DATA (Request-To-Send/ Clear-To-Send/ Data).
A Figura 10 ilustra o funcionamento deste processo, a estação A deseja enviar dados para a estação B. Então um pacote de controle RTS é enviado.
Quando a estação B recebe este sinal, envia um CTS.
O CTS significa que a estação B está pronta para receber os dados.
Logo que a estação A recebe CTS de B, é iniciada a transmissão do pacote de dados.
As demais estações na rede ao escutarem pacotes de controle RTS ou CTS não destinados a elas, devem bloquear seus rádios para transmissão até o final da operação.
Este procedimento diminui a probabilidade de ocorrência de colisões na rede.
Vale lembrar que nas redes sem fio as colisões ocorrem somente no receptor, já que a estação base ao transmitir não tem como escutar o canal.
As técnicas de acesso ao meio apresentadas possuem vantagens e desvantagens em relação a sua implementação em RSSF.
Em o método TDMA os nodos negociam através de uma janela de comunicação.
Cada usuário dispõe de toda a faixa de freqüência disponível durante um determinado período (janela de tempo).
Isso causa um problema, uma vez que, numa rede densa os nodos podem permanecer ativos por muito tempo esperando sua janela.
Ainda, para garantir que não haja colisão, existe a necessidade de implementação de uma referência global de tempo para toda a rede.
Para implementação das técnicas FDMA e CDMA existe a exigência de requisitos de hardware, o que acaba aumentando o custo dos nodos sensores.
No caso de o protocolo CSMA/ CA, apesar de a implementação ser mais complexa que a FDMA e TDMA, não há necessidade de requisitos de hardware adicionais, o que o torna uma boa opção para as RSSFs.
Entretanto, este também apresenta algumas dificuldades, como, o problema do terminal escondido e da estação exposta.
O problema do terminal escondido é uma situação que ocorre nos protocolos CSMA/ CA que acarreta colisão de dados.
A Figura 11 mostra esta situação.
A estação A envia RTS para a estação B que está dentro de o seu alcance de rádio.
A estação C, que está dentro de o alcance de rádio de B, mas fora de o alcance do rádio de A, também transmite um RTS para B. A estação B irá receber os dois pacotes ao mesmo tempo e não poderá interpretar os dados enviados.
Sempre que ocorre uma colisão os dados devem ser enviados novamente, isso gera um consumo desnecessário de energia.
As colisões no protocolo CSMA/ CA também podem ocorrer por outro motivo conhecido como estação exposta.
A Figura 12 mostra uma tentativa de comunicação da estação B. Em este caso, a estação B transmite um pacote de controle RTS para a estação A, solicitando uma transmissão.
A estação C está pronta para transmitir para a estação D, porém ela escuta o pacote de controle da estação B e bloqueia seu rádio até que a transmissão de B acabe.
A transmissão entre C e D não causaria nenhuma interferência na comunicação entre A e B, pois a estação C não está no alcance de rádio de A. Se a estação C transmitisse simultaneamente com a estação B não ocorreria colisão.
Contudo, o recebimento do pacote RTS por o C não continha informações completas sobre a transmissão, impedindo a estação de transmitir, por este motivo o problema da estação exposta também é considerado uma colisão.
Em as tradicionais redes wireless de dados o conceito de fairness está relacionado à distribuição justa de acesso.
Cada aplicação deve ter oportunidade igual de tempo para acesso ao meio, enviando ou recebendo pacotes.
Porém, as RSSF, normalmente, são direcionadas a eventos e em algum momento um nodo terá mais dados para enviar do que os demais.
Em outras aplicações todos nodos cooperam para realizar uma tarefa comum.
Por este motivo, poucas aplicações em RSSF utilizam fairness.
O controle da latência é diretamente dependente da aplicação da RSSF.
Por exemplo, em aplicações de vigilância ou monitoramento, algumas regiões da rede podem manter seus nodos ativos por um longo tempo.
Ao passo que nodos de uma outra região podem permanecer inativos a espera de um evento.
A aplicação pode oferecer uma determinada tolerância à latência das mensagens, isso porque, a velocidade da rede é tipicamente maior que a ocorrência dos eventos físicos.
Também, durante um período em que não existe um evento, o fluxo de troca de mensagens na rede é muito baixo.
Conseqüentemente, a velocidade mínima que a rede deve reagir é determinada por a atividade de ocorrência dos eventos.
Levando em consideração estas características podemos definir, basicamente, três cenários:
Primeiro, os nodos são depositados de maneira a aproveitar ao máximo o raio de alcance do módulo de RF, isto é, os nodos são depositados de maneira que consigam abranger a maior área possível.
Segundo, a distância entre os nodos é determinada por as necessidades da leitura dos sensores dos nodos, ou seja, quanto mais fina a medida, mais próximos os nodos devem ficar.
Por último, os nodos da rede são depositados sem uma referência padrão de distância entre eles.
Este cenário é bastante utilizado em aplicações de monitoramento de regiões remotas, onde os nodos são lançados sobre estas áreas para formar uma rede de coleta.
Em aplicações de RSSF é natural os nodos permanecerem sem nenhuma tarefa por um longo período de tempo.
Durante este período a taxa de transmissão de dados é muito baixa.
Logo, não é necessário manter os nodos ativo o tempo todo.
Pensando no consumo de energia, é possível alternar o ciclo de operação dos nodos da rede entre dois períodos, ativo e inativos.
Quando o nodo estiver em seu período ativo (listen) ele pode realizar as comunicações, e quando estiver no período inativo (sleep) deve manter seu módulo de rádio desligado, economizando energia.
Dividindo o ciclo de operação em dois períodos todos os nodos da rede alternam entre os períodos listen e sleep, e cada nodo permanece um período de tempo no estado sleep e outro no estado listen, este ciclo completo é chamado de frame, Figura 13.
Com a utilização da divisão do ciclo de operação em listen/ sleep é comum dois nodos desejarem realizar uma comunicação e estarem fora de sincronia.
A Figura 14 ilustra dois nodos nesta situação.
Em este caso, quando o nodo A está em seu período listen preparado para realizar comunicação com o nodo B, o nodo B está em seu período sleep com seu módulo de comunicação desligado.
Como o nodo A e nodo B entram no período listen em tempos diferentes, para que a comunicação prossiga é necessário haver uma sincronização entre os nodos.
Uma solução para a sincronização entre nodos é fazer com que o nodo que deseja enviar transmita um pacote SYNC em broadcasting para todos seus vizinhos.
Este pacote contém o período do frame em que o nodo estará em seu estado listen.
O nodo informa para seu vizinho o seu período de listen, assim todos os nodos vizinhos podem comunicar mesmo que tenham tempos diferentes.
Outra solução é a utilização de um mecanismo que atue dentro de a rede como um mediador (Md) entre os nodos.
Este mediador é um nodo vizinho aos dois nodos que querem estabelecer a comunicação.
A sincronização entre nodos que ocorre somente quando existe a necessidade de comunicação é conhecida como sincronização dinâmica.
A Figura 15 mostra um exemplo de um mediador.
Assumindo que o nodo A deseja enviar uma mensagem para o nodo B, devem ser os seguintes passos:·
Passo 1: O nodo A envia RTS e aguarda por uma mensagem de resposta.
O nodo B não está em sincronismo com o nodo A, portanto não é capaz de receber diretamente a mensagem de controle RTS do nodo A. O Md deve gravar o RTS enviado por o nodo A, esta mensagem inclui uma identificação de ambos os nodos, A e B.· Passo 2: Então o nodo B acorda e transmite um query.
O Md grava a diferença de offset entre o nodo A e o nodo B, isto é, a diferença entre o RTS do nodo A e o query do nodo B. Logo que recebe o query do nodo B transmite uma mensagem de query para o mesmo, indicando que existe uma mensagem a ele destinada do nodo A, incluindo o offset entre os dois nodos.·
Passo 3: Quando o nodo B recebe o query vindo de Md, o mesmo ajusta seu tempo para entrar em sincronismo com o nodo A. O nodo B agora transmite um pacote de controle CTS para A, durante o período de recebimento de A. Então os dois nodos podem começar a transmissão de dados.·
Passo 4: Depois do nodo A receber uma mensagem de reconhecimento ACK, o mesmo retorna ao seu ciclo normal de transmissão de pacotes.
Para evitar colisões com o nodo A, o nodo B reajusta seu relógio para o estado original, retomando seu ciclo normal de transmissão de pacotes.
Vários aspectos afetam o consumo de energia em RSSFs, colisão é um de eles.
Quando ocorre uma colisão o pacote transmitido não chega ao seu destino, e deve ser re-enviado, causando um consumo extra de energia.
Além disso, fatores como a técnica de acesso ao meio, sincronização utilizada, tipo de modulação, taxa de envio de dados e energia de transmissão também devem ser levados em consideração para reduzir o consumo de energia.
O dispositivo de RF empregado em nodos sensores também deve se ajustar à escassa oferta de energia, sendo normalmente dispositivos simples.
As técnicas apresentadas neste capítulo, como, por exemplo, período Listen/ Sleep e sincronização entre outras foram utilizadas na elaboração e no desenvolvimento de funcionalidades do presente trabalho.
Este capítulo apresenta os principais protocolos de acesso ao meio desenvolvidos para RSSFs.
O objetivo é apresentar o estado da arte e os principais conceitos relacionados.
Estes trabalhos foram estudados visando auxiliar na especificação do protocolo apresentado nesta dissertação.
A o longo deste capítulo serão descritos os projetos S-MAC, T-MAC, ARC, De-MAC, Trama, apresentando suas principais características, suas inovações, vantagens e desvantagens.
O S-MAC (Sensor-MAC) é um protocolo de acesso ao meio projetado especificamente para RSSF.
O acesso ao meio é baseado em alocação dinâmica de canal.
Utiliza sincronização para coordenar os modos de operação de rádio (idle/ sleep).
O S-MAC é dedicado a RSSFs dirigidas a eventos, com coleta periódica de dados, insensível a latência da rede e com baixa taxa de envio de mensagens.
O protocolo S-MAC procura ser eficiente em energia reduzindo o consumo dos principais eventos responsáveis por o desperdício, como:·
Colisões: Para evitar as colisões, problema do terminal escondido e problema da estação exposta, o S-MAC emprega a mesma técnica utilizada no protocolo IEEE 802.
11 -- DCF (Distributed Coordination Function), usando um diálogo de comunicação RTS/ CTS/ DATA/ ACK.
Caso a colisão ocorra o protocolo utiliza o algoritmo BEB (Binary Exponential Backoff) que aguarda um tempo para enviar novamente a mensagem.·
Overhearing: Quando os nodos escutam transmissões de pacotes destinados a outros nodos, para evitar o overhearing, o S-MAC coloca o nodo em modo sleep quando verifica que o pacote não é destinado a ele.·
Overhead: Pacotes de controle são utilizados para reserva do canal de comunicação, reconhecimento de pacotes de dados e sincronização.
Estes pacotes de controle aumentam o tráfego da rede.
O S-MAC reduz o tamanho dos pacotes de controle para diminuir o overhead.·
Idle listening: O nodo fica escutando o meio mesmo quando não existe tráfego na rede.
O S-MAC utiliza um ciclo de operação reduzido com tempos fixos de atividade (listen) e de repouso (sleep), mostrado na Figura 16.
Para uma maior economia de energia o tempo de atividade é menor que o tempo de repouso.
A Figura 16 mostra o ciclo de operação do protocolo S-MAC.
As setas indicam transmissão e recebimento de mensagens.
O nodo utiliza seu período ativo (listen) para enviar e receber mensagens.
Durante o período de repouso (sleep) as mensagens são armazenadas e transferidas em rajada no início do período ativo.
Todos os nodos são livres para escolher seu próprio período listen/ sleep.
Porém, para reduzir o overhead os nodos vizinhos são sincronizados juntos, isto é, entram em seu período listen e sleep ao mesmo tempo.
Os nodos mudam seu ciclo listen/ sleep periodicamente, enviando um pacote SYNC em broadcast para todos os seus vizinhos.
Um nodo informa para seus vizinhos o tempo de seu período de listen, deste modo assume- se que todos os vizinhos podem comunicar até mesmo com tempos diferentes.
Uma característica do S-MAC é formar uma topologia peer- to peer (ponto-a-ponto) sem um protocolo de clusterização clustering.
Ele é coordenado por intermédio de um cabeçalho de cluster.
Os nodos formam um cluster virtual sincronizado, mas comunicam- se diretamente ponto-a-ponto.
Com isso a rede fica mais robusta, aceitando mudanças de topologia, ocasionadas por quedas ou mudanças físicas de nodos.
A desvantagem é um aumento da latência devido a o período sleep.
O S-MAC aplica a técnica de message passing para reduzir a latência durante a contenção em aplicações que requerem armazenamento de informações para processamento na rede.
Esta técnica permite a transmissão de mensagens longas, que são divididas em pequenos fragmentos e enviadas em rajada.
Este protocolo obtém considerável redução do consumo de energia, prolongando o tempo de vida da rede.
O protocolo Time-out-MAC (T-MAC) é baseado em contenção para o controle de acesso ao meio em RSSFs, protocolo IEEE 802.
11. O T-MAC foi desenvolvido para aplicações dirigidas a eventos que possuam baixa taxa de entrega de mensagens e sejam insensíveis a latência.
Trabalha com transmissão contínua ou periódica de dados.
O principal objetivo deste protocolo é ser eficiente em energia considerando as limitações de hardware do nodo e os padrões de comunicação, isto é, troca de mensagens entre os nodos vizinhos e entre os nodos e a estação base.
Assim como o S-MAC o ciclo de operação é reduzido, possuindo tempos de atividade (listen) e de repouso (sleep) variáveis, que se adaptam à carga da rede.
A variação dinâmica do tempo ativo é obtida por a implementação de um temporizador que desliga o rádio do nodo ao verificar que não existe transmissão durante um intervalo de tempo.
A Figura 17, descreve o ciclo adaptativo do protocolo T-MAC, onde as setas indicam transmissão e recepção de mensagens.
A idéia do T-MAC é reduzir o tempo de idle listening para diminuir o consumo de energia.
As mensagens recebidas durante o tempo de repouso são armazenadas e transferidas em rajadas no início do tempo ativo.
O nodo escuta a rede, transmite e recebe dados durante seu tempo ativo.
O temporizador determina o final do tempo ativo quando não ocorrem eventos durante um tempo Te a.
A ativação por eventos ocorre por:·
início periódico de quadro;·
recepção de dados no rádio;·
final da transmissão de seus vizinhos;·
final da transmissão de seu próprio pacote de dados ou recebimento de ACK;·
por detecção de sinal no rádio (RSSI -- Received Signal Strenght Indicator).
Os nodos se comunicam com o diálogo RTS/ CTS/ DATA/ ACK para evitar colisões e obter transmissão confiável.
De maneira semelhante ao S-MAC, o T-MAC utiliza agrupamentos virtuais que seguem escalas para sincronizar seu ciclo de operação.
Os nodos transmitem suas escalas para os seus nodos vizinhos através de pacotes SYNC.
A recepção de pacotes RTS ou CTS é suficiente para renovar o tempo Te a.
O intervalo de tempo Te a deve ser suficiente para receber pelo menos o início de um pacote CTS.
Te a pode ser obtido por:
Onde: C $= tamanho do intervalo de contenção R $= tamanho do pacote de RT S T $= é um curto intervalo entre o fim do pacote de RT S e o começo do pacote de Um problema encontrado no T-MAC, é quando um nodo dorme enquanto um outro nodo ainda tem mensagem para ele.
Este problema é conhecido como o problema de dormir cedo e pode ser visualizado na Figura 18, onde o nodo D dorme antes de C enviar um RTS.
Este problema pode ser resolvido de duas maneiras:·
Um nodo, ao escutar um pacote CTS destinado a outro nodo, envia imediatamente aos seus vizinhos um pacote designado de FRTS (Future RTS) e aumenta o tempo de Te a;·
Outra maneira é usar um esquema de priorizar o esvaziamento do buffer quando este estiver perto de sua capacidade limite.
Um nodo ao receber um RTS ao invés de responder com um CTS, transmite as mensagens armazenadas em seu buffer para o nodo de destino.
O T-MAC consegue ser mais eficiente em energia que o S-MAC, mas é extremamente limitado em largura de banda não sendo recomendado para aplicações sensíveis a este requisito.
O ARC (Adaptive Rate Control) tem como metas a alocação de largura de banda, fairness e eficiência em energia para condições de baixo e alto tráfego da rede.
O protocolo propõe um mecanismo que passivamente adapta a taxa de transmissão do tráfego de passagem e do tráfego de dados originados.
Este método utiliza um algoritmo que exige uma pequena capacidade computacional, que está dentro de as limitações do hardware.
Um novo esquema CSMA/ CA é proposto por o protocolo ARC, adicionando um atraso aleatório antes do nodo verificar o meio para enviar uma mensagem, o que evita repetidas colisões devido a o comportamento sincronizado do nodo na ocorrência de um evento.
O ARC em conjunto com este novo mecanismo CSMA/ CA fornece controle efetivo de acesso ao meio sem a utilização de pacotes explícitos de controle.
Este esquema garante fairness e mantém uma razoável largura de banda, sendo eficiente em energia para situações de baixo tráfego.
O protocolo De-MAC (Distributed Energy aware MAC) provê gerenciamento e balanceamento de energia em RSSFs.
É um protocolo que emprega alocação estática de canal TDMA, para tratar colisões e overhead de pacotes de controle.
Utiliza o conceito de ciclo de operação reduzido com tempos de atividade (listen) e tempo de repouso (sleep), evitando o desperdício de energia com recebimento de pacotes destinados a outros nodos (overhearing) e com a escuta do meio sem tráfego (idle listening).
A principal característica deste protocolo é utilização de um algoritmo distribuído para balanceamento de carga na rede.
Este algoritmo estabelece que os nodos com baixa energia devem ser usados com menor freqüência no roteamento, para isso realiza um procedimento local de eleição.
A eleição escolhe o nodo com a carga mais baixa de energia entre todos os nodos da rede, destinando um tempo maior de repouso ao mesmo.
Como o protocolo é baseado em TDMA, a eleição é totalmente integrada com o tempo alocado para cada nodo (slot -- janela de tempo), o protocolo não diminui a vazão da rede.
O conceito de balanceamento de carga serve para obter um tempo de vida uniforme para todos os nodos da RSSF.
O protocolo Trama (Traffic Adaptive Multiple Access) é baseado em alocação estática de canal TDMA.
É projetado para RSSFs com aplicações dirigidas a eventos, com coleta contínua ou periódica de dados da rede.
O protocolo provê a eficiência de energia através de um método de acesso ao canal que tenta evitar colisões em comunicações unicast, broadcast ou multicast.
O Trama é adaptativo ao tipo de tráfego e emprega um algoritmo distribuído de eleição.
Este algoritmo determina qual nodo pode transmitir em determinado intervalo de tempo (timeslot), e não faz reserva para os nodos sem tráfego de envio.
O algoritmo de eleição é baseado em informações de tráfego de cada nodo, selecionando o receptor baseado em escalas que são anunciadas por os transmissores.
As escalas são obtidas por a troca de informações locais entre os nodos vizinhos.
Então, a escala é transmitida especificando quais nodos serão os respectivos receptores do tráfego em ordem cronológica.
O Trama alterna entre acessos aleatórios e escalonados, isto permite acomodar mudanças de topologia, adição de nodos à rede e tolerância a falhas.
A troca de informações entre vizinhos tenta criar uma visão global da rede.
O Trama mostra- se adequado para aplicações insensíveis à latência que necessitam de eficiência em energia com alta taxa de entrega.
O protocolo consiste de três componentes:·
Np (Neighbor Protocol):
Responsável por a propagação e atualização de informações sobre seus vizinhos de um hop.
As atualizações são incrementais e permitem determinar o conjunto de vizinhos que serão adicionados ou removidos.·
SEP (Schedule Exchange Protocol):
Permite que os nodos troquem informações e escalas da vizinhança de dois hops.·
AEA (Adaptive Election Algorithm):
Utiliza as informações da vizinhança e de suas escalas para selecionar transmissores e receptores para o intervalo de tempo atual, enquanto os outros nodos selecionam o modo de repouso (sleep).
Os protocolos analisados atendem a requisitos específicos das aplicações para as quais foram projetados.
Todos utilizam as características específicas de suas aplicação para conseguir alguma vantagem, como, por exemplo o equilíbrio de carga na rede.
A Tabela 2, aponta algumas características destes protocolos, assim como algumas vantagens e desvantagens.
Com base nas características e funcionalidades dos protocolos investigados, e a partir de o conhecimento do conhecimento adquirido com o estudo de RSSF e técnicas de acesso ao meio, foi possível identificar pontos interessantes para definição de um novo protocolo MAC para este tipo de rede.
O protocolo proposto, denominado R-MAC, é descrito a seguir.
Em este capítulo é descrito o protocolo de acesso ao meio proposto aqui denominado R-MAC.
Este protocolo foi concebido para trabalhar com dispositivos nodos sensores em RSSFs com grande números de nodos, dirigidas a eventos e com coleta periódica de dados.
A motivação deste protocolo é garantir o consumo eficiente de energia em redes de sensores agregando funções de auto-gerência, como auto-organização, auto-configuração e auto-manutenção.
O Protocolo R-MAC é composto por funções que facilitam a comunicação entre os nodos vizinhos tentando diminuir as colisões, para melhoria na eficiência energética e funções de auto-manutenção.
Para acessar o meio o R-MAC utiliza o método de acesso Contention-Based por Distributed Coordination Function (DCF), baseado no protocolo IEEE802.
11. O DCF permite que várias estações independentes acessem o meio sem um controle centralizado.
Em o método de acesso DCF antes de transmitir a estação deve verificar o meio.
Se estiver livre, a transmissão pode começar.
Um esquema de janela de contenção é utilizado para prevenir que varias estações utilizem o meio ao mesmo tempo, evitando sucessivas colisões.
Além disso, um esquema de interframes permite selecionar níveis de prioridades entre mensagens, facilitando o acesso ao meio de mensagens com alta prioridade.
Uma estratégia utilizda no R-MAC foi reduzir o tamanho do campos de controle dos pacotes em comparação a outros protocolos, o que diminui o tráfego na rede reduzindo o consumo de energia, pois o tempo de processamento dos pacotes é menor.
A operação da rede entre períodos listen/ sleep garante um consumo eficiente e evita o desperdício (ver seção 2.4.6).
Para aplicações de RSSF com maior tráfego na rede é possível configurar o duty cycle para um período maior, evitando congestionamento na rede.
Um vetor de alocação do meio, que é enviado junto com as mensagens, permite que nodos vizinhos que não participam de uma comunicação entrem no modo sleep até o final da comunicação.
O R-MAC trata a detecção de erros na recepção de mensagens, possibilitando a requisição de um novo envio ou simplesmente ignorando a mensagens.
O protocolo proposto permite determinar o limite inferior de energia requerida para auto-organização da rede.
A o inicializar a rede o R-MAC cria uma lista de vizinhos que permite montar uma pré-estrutura da rede, que pode ser utilizada por as camadas superiores para definir o caminho das rotas de entrega de mensagem.
O ajuste da energia de transmissão permite que um nodo que esteja fora de a rede tente a conexão aumentando sua energia de transmissão.
Além disso, é possível procurar um maior número de nodos vizinhos, aumentando o número de conexões do nodo.
Ainda, no caso de perda de conectividade é possível tentar uma nova rota de conexão.
Estas quedas ocorrem por uma mudança de topologia, como, por exemplo, por a queda do nodo que é o elo de ligação de uma subrede de nodos com a RSSF, conhecido como sink node.
Algumas das funcionalidades do R-MAC são controladas diretamente na camada Física.
Para enviar uma mensagem é necessário que o módulo de RF do nodo sensor esteja configurado na posição TX.
De a mesma maneira para o nodo receber uma mensagem o módulo de RF deve estar na posição RX.
O controle de envio e recebimento de mensagens é realizado por a camada MAC.
A seção 4.2 explica como o protocolo R-MAC interage com a camada Física para controlar o módulo RF.
Os parâmetros de controle de um nodo sensor como, por exemplo, modo transmitindo ou recebendo, modo ativo/ inativo, ajuste da energia de transmissão são controlados por a camadas MAC, sendo configurados diretamente por o módulo RF durante a operação do nodo.
Esta configuração ocorre alterando registradores de configuração conforme os parâmetros de controle requisitados.
A comunicação com o módulo RF é feita através de comandos enviados por o módulo de processamento numa interface serial, como a Serial Peripheral Interface (SPI) esse esquema de comunicação pode ser observado na Figura 3 no capítulo 2.
Alguns módulos de RF utilizados em nodos sensores, como o CC1100, permitem que as configurações dos parâmetros de rádio sejam feitas quando o módulo é inicializado ou também em tempo de execução.
Normalmente, estas configurações são realizadas através do controle de uma máquina de estados.
A seção 4.2.1 apresenta o modelo de uma máquina de estados que será utilizada como estudo de caso do protocolo R-MAC.
Trata- se da máquina de estados do dispositivo CC1100 da Texas Instruments, que é um dispositivo de multi-freqüência, de baixo consumo e que permite configurar 9 níveis de ajuste para energia de transmissão.
Normalmente, máquinas de estados que controlam o módulo RF são relativamente complexas, necessitando de inúmeros passos para trocar o estado do módulo.
Uma simples operação como, colocar o nodo no estado sleep, implica no recebimento de uma série de comandos para que a máquina transite por vários estados até atingir o estado desejado.
As funcionalidades de um protocolo MAC, por muitas vezes, exige que o módulo de RF passe várias vezes por os estados TX, RX, IDLE, SLEEP e por outros estados de configuração.
Assim, para diminuir a complexidade destas ações foi elaborada uma máquina de estados da camada MAC com um número reduzido de estados, que interage com a máquina da camada Física para realizar estas ações.
Esta máquina será apresentada na seção 4.2.2.
R-MAC se encarrega de controlar estes comandos, desta maneira é possível alterar as configurações deste módulo, transmitir e receber mensagens e colocar o módulo em listen ou em sleep.
Os parâmetros de configuração do dispositivo CC1100 são salvos num registrador de configuração de 8 bits.
Quando o dispositivo é inicializado este consulta o registrador para carregar os parâmetros de configuração.
Quaisquer mudanças na configuração alteram o registrador.
A máquina do CC1100 é formada por 16 estados:·
IDLE -- É o estado inicial da máquina.
Quando o nodo não está transmitindo ou recebendo o IDLE é o estado padrão.
Normalmente, é o estado de partida para transitar para outros estados de configuração.
Seu consumo é baixo se comparado ao estado de transmissão, ficando em em torno de 1, 6m A, porém toda vez que o nodo estiver em ação este deve ficar no estado SLEEP.·
Mancal -- É um estado de configuração.
É atingido a partir de IDLE e serve para calibrar a freqüência de envio ou de recebimento.
A corrente típica de consumo é em torno de 8, 2m A.· SLEEP -- É o estado de menor consumo de módulo, sua corrente típica de operação é de 0, 4 µA, que é suficiente para manter a configuração do nodo.
Para atingir SLEEP é necessário estar em IDLE, sendo que a transição pode ser de duas maneiras.
Com o comando direto para apagar o nodo, SPWD (power down mode), ou, com o comando WOR (Wake-on-- radio).
O WOR pode ser configurado diretamente no dispositivo para periodicamente transitar entre o estado IDLE e SLEEP, sem a interferência do domínio de processamento.·
XOFF -- Em este estado o oscilador é desligado e o valor de todos os registradores são guardados.
A corrente típica neste estado é de 0, 16m A· Fs_ WAKEUP CALIBRATE SETTLING FSTXON -- São estados de configuração necessários para configurar o módulo antes deste chegar no estado TX ou RX.
Os tempos de transição de cada um destes estados são fixos (estes tempos são utilizados na máquina da camada MAC para transitar entre os estados 4.2.2).
A corrente típica é de 8, 2m A, a mesma para todos estados.·
RXTX_ SETTING TXRX_ SETTING -- são estados de configuração necessários para mudar a configuração do módulo de RX para TX e de TX para RX.·
TX_ UNDERFLOW -- mecanismo FIFO de envio com 64 bytes.·
RX_ OVERFLOW -- mecanismo FIFO de recebimento com 64 bytes.·
TX RX -- São os estados ativos do módulo.
Quando o módulo está em TX começa o envio da mensagem.
Quando o módulo está em RX começa a procura por uma nova mensagem.
O consumo do estado RX varia de acordo com a taxa de recebimento, com a utilização ou não do recurso de sensibilidade limite e com a freqüência utilizada.
Porém esta variação é pequena e a corrente típica de RX fica em torno de 15m A. A corrente máxima do estado TX é de 32, 3m A. A corrente consumida por o módulo RF em cada configuração dos estados TX e RX pode ser vista na Tabela 3 do Capítulo 2.
Os módulos de RF estudados para esta dissertação podem ser modelados em máquinas de estados, similar ao CC1100.
Sendo que a principal diferença entre estes módulos fica nos comandos de controle, nas possíveis configurações e no tempo de transição entre os estados.
O objetivo de modelar a camada de Enlace numa máquina de estados é simplificar a atuação do protocolo proposto no controle da camada Física.
Algumas funcionalidades do RMAC exigem que o módulo RF passe por vários estados até atingir o estado desejado, para que estas transições sejam feitas é necessário que uma série de comandos sejam enviados para o módulo RF.
A utilização de uma máquina para camada de Enlace permite que a transição entre dois estados represente uma seqüência de comandos na camada Física.
Com isso, as regras do protocolo são aplicadas na máquina de estados para gerenciar a comunicação e as transições entre cada estado são controladas diretamente por a camada de Enlace, por o início ou fim de uma mensagem e por contadores.
A máquina de estados da camada de Enlace é apresentada na Figura 20.
Esta máquina contém nove estados, alguns estados têm relação direta com a máquina da camada Física, outros representam um conjunto de estados e o estado de configuração representa alguns estados e os registradores de configuração.
A seguir, cada estado será descrito detalhadamente.
O Estado 1 é o estado inicial, chamado de estado Idle.
Este estado corresponde ao estado de mesmo nome na camada física.
É um estado de transição, onde o módulo não envia e nem recebe mensagens, mas o módulo deve passar por este estado para iniciar o recebimento ou envio de uma mensagem.
O módulo também deve estar em Idle de forma a entrar no estado de configuração ou no estado sleep.
O Estado 2 sleep corresponde ao estado de mesmo nome na camada física.
O protocolo implementa a funcionalidade Listen/ Sleep que obriga o módulo a operar entre períodos ativos e inativos.
Quando o nodo está no período inativo ele é levado para o estado sleep retornando a suas atividades depois de decorrido o tempo do contador sleep ou por a ocorrência de um evento.
O Estado 3 é chamado de estado de configuração e é selecionado para alteração de algum parâmetro de configuração.
Este estado condensa todas as rotinas de configuração, calibração e os registradores de configuração do módulo RF.
Ele é atingido por meio de uma requisição da camada de Enlace de configuração RF.
Cada parâmetro a ser alterado tem seu determinado tempo para realizar as configurações.
Em o final da configuração as alterações são salvas no registrador de configuração e a máquina retorna ao estado idle.
Os Estados 7, 8, 9 correspondem a transmissão de uma mensagem e são inteiramente controlados por a camada de Enlace.
Serão descritos detalhadamente na seção 4.2.2.1.
Os Estados 4, 5, 6 são os estados correspondentes ao recebimento de mensagem.
O controle destes estados é mais complexo que os estados de recebimento, pois além de o controle do protocolo MAC dependem também de eventos do meio.
O controle destes estados e tratado detalhadamente na seção 4.2.2.2.
O envio de uma mensagem é completamente controlado por a camada de Enlace.
Em a Figura 20 iniciando do estado 1 idle é requisitado o setup TX, transitando a máquina para o estado 7 onde o módulo RF é preparado para transmitir.
Após o tempo de configuração o módulo entra no estado 8 e está pronto para enviar a mensagem.
Este tempo de configuração é necessário para preparar o módulo de RF para enviar a mensagem.
Em o estado 8, é aguardada uma requisição para início de transmissão para colocar a mensagem numa fila que será enviada para o estado mensagem a máquina retorna ao estado 8, neste ponto a máquina pode transitar para o estado 1 idle ou para o estado 4 de acordo com a requisição do protocolo R-MAC.
O estado 4 da máquina da Figura 20 representa o início da configuração do módulo para a recepção de uma mensagem.
A recepção de uma mensagem não depende somente da camada de Enlace, pois no momento do recebimento da mensagem ela pode não estar no início ou pode estar corrompida.
O módulo deve escutar o meio para perceber quando existe uma mensagem e em que ponto está.
Além disso colisões podem ocorrer, ou, até mesmo a perda do sinal por um alto nível de ruído antes da conclusão da mensagem.
Por este motivo o recebimento de mensagem não depende exclusivamente da camada de Enlace.
A Figura 21 apresenta o gráfico de energia de transmissão por o tempo.
A linha limite de sensibilidade de recebimento do dispositivo é a capacidade que o dispositivo tem de capturar o sinal da mensagem no meio.
A diferença entre o ruído do meio e o sinal da mensagem é chamada de Signal to Noise Ratio (SNR).
Supondo que um nodo transmita uma mensagem para todos seus nodos vizinhos, devido a distância que cada nodo se encontra do emissor e aos ruídos do ambiente, cada nodo irá receber a mensagem num tempo e com níveis de potência diferentes.
A máquina de estados da Figura 22 mostra a expansão dos estados 5 e 6 da máquina da camada de Enlace, apresentando todas as possíveis transições para o recebimento de uma mensagem.
Quando a máquina está no estado 5 esta escuta o meio a espera de um preâmbulo de início de mensagem.
Caso a máquina comece a identificar um preâmbulo, mas o dispositivo perceba que o SNR está acima de o tolerado, a mensagem é descartada e a máquina continua no estado 5, o que é representado por a transição h..
Ainda no estado 5 qualquer fim de mensagem recebido será considerado como ruído (Estado g).
Quando um preâmbulo de início de mensagem é identificado e o SNR está dentro de a tolerância, a mensagem é carregada passando para o estado 6, transição a..
Em o estado 6, o módulo RF está recebendo.
Quando um preâmbulo de início é identificado, podem ocorrer três transições: (
b) Quando o preâmbulo da mensagem esta com o SNR acima de o tolerado, este é considerado ruído e uma nova mensagem (preâmbulo) pode ser carregada. (
c) Quando a mensagem carregada (e respectivo preâmbulo) está com SNR em níveis aceitáveis, esta mensagem é mantida e qualquer novo preâmbulo/ mensagem é considerado ruído. (
e) Quando a mensagem nova mensagem está como o SNR e a mensagem carregada está com o SNR acima de a tolerância ambas são consideradas ruído e a máquina é passada novamente para o estado 5.
Ainda, transições de fim de mensagem são possíveis apenas no estado 6 e podem ocorrer de duas maneiras: (
d) Quando a mensagem não está carregada é descartada como ruído. (
d) Quando recebe fim de mensagem com mensagem carregada, é entregue uma chamada de recebimento de mensagem para a camada de Enlace com o objetivo de avisar a conclusão da mensagem.
As funcionalidades propostas no R-MAC podem ser divididas em três tipos:
As funcionalidades de auto-gerência, que tem por objetivo a formação da pré-estrutura da rede e a manutenção das conexão dos nodos na rede;
As funcionalidades de comunicação que permitem que os nodos estabeleçam comunicação entre si tentando evitar as colisões;
Por último, as funcionalidades para economia de energia dos nodos rede.
Quando uma RSSF é ativa pela primeira vez, várias tarefas devem ser realizadas para estabilizar e montar a infra-estrutura necessária que usualmente um trabalho colaborativo utiliza.
Em o protocolo R-MAC a primeira tarefa de um nodo ao iniciar é procurar por seus vizinhos.
Esta função é chamada de Sn (Search Neighbor), ela possibilita a criação de uma pré-estrutura de rede criando uma lista de possíveis vizinhos.
A lista de possíveis vizinhos contém os nodos vizinhos que estão no alcance de rádio do nodo e que podem trocar mensagens com ele.
Esta lista criada por o R-MAC pode ser utilizada por os protocolos de roteamento para definir as possíveis rotas de entrega de mensagens.
O protocolo de roteamento estabelece quais os nodos serão utilizados nas rotas de entregas de mensagens, como já foi visto na seção 2.2.3.
Outra funcionalidade de auto-gerência do R-MAC é o Ajuste da Energia de Transmissão.
Esta funcionalidade permite aumentar a energia de transmissão de cada nodo, com isso é possível que o nodo se conecte a rede, procure um número maior de vizinhos ou se reconecte em caso de queda de algum vizinho, estas funcionalidades serão detalhadas na seção 4.3.1.2.
A função Sn é utilizada por os nodos para criar uma lista de possíveis vizinhos.
Quando um nodo inicializa, uma mensagem de Sn é enviada para todos os nodos que recebem esta mensagem verificam sua lista de vizinhos e se possível, adicionam o emissor enviando uma mensagem de confirmação (ADD).
A lista de vizinhos é armazenada numa área da memória do dispositivo reservada para protocolo.
Seus parâmetros de configuração são o número máximo e mínimo de vizinhos, o que permite definir o número de conexões em cada nodo.
Caso a lista esteja cheia o nodo emissor não será adicionado.
O fluxograma da Figura 23 descreve o algoritmo para a formação da lista de vizinhos.
Quando a função é inicializada o nodo verifica sem algum vizinho está enviando a mensagem Sn, caso negativo deve enviar a mensagem Sn e passa a escutar o meio a espera da mensagem de confirmação dos nodos vizinhos.
Recebendo uma mensagem Sn ou ADD o nodo deve enviar uma mensagem ADD para o nodo emissor.
Logo após enviar ADD, o nodo verifica se atingiu o número mínimo de vizinhos, caso positivo o nodo sai da função Sn.
No caso de o nodo enviar Sn inúmeras vezes e não receber resposta, este passa para o módulo de reconfiguração da energia de transmissão.
Após aumentar o nível da energia de transmissão o nodo deve enviar a mensagem RET e esperar o recebimento da mensagem RETr.
Caso não receba, deverá repetir o procedimento até receber.
Quando o nodo recebe RET o emissor é adicionado na lista de vizinhos e envia a mensagem ADD.
A Figura 24 mostra uma pequena parte da rede iniciando sua formação, definida por os seguintes passos:
Os nodos são inicializados e entram em seu modo de configuração, aguardando o recebimento de uma mensagem Sn.
O nodo B consegue entrar no meio e envia uma mensagem Sn em broadscat para todos os nodos que estão em seu alcance de rádio.
O nodo J que não está no alcance de rádio de B também envia a mensagem Sn.
Em o mesmo momento o nodo A também envia sua mensagem de Sn, mas não tem nenhum nodo em seu alcance de rádio.
Os nodos F e C, recebem a mensagem Sn enviada por B. Com isso, o nodo B é adicionado na lista de vizinhos de C e F. Em o mesmo passo o nodo D recebe a mensagem de J e o adiciona em sua lista de vizinhos.
O nodo D ganha a disputa de acesso ao meio e envia a mensagem ADD informando que adicionou os nodos J e F. O próximo a ocupar o meio é o nodo C, que envia a mensagem ADD informando que adicionou B, F e D. A o receber esta mensagem os nodos B, F e D adicionam o nodo C em sua lista de vizinhos.
O nodo D disputa novamente o meio para informar o adicionamento de C, enviando uma mensagem ADD.
Em seguida o nodo F faz o mesmo, enviando uma mensagem ADD.
O nodo B também confirma o adicionamento de F e C, enviando a mensagem ADD.
O nodo A que até o momento não recebeu resposta de sua mensagem Sn entra em seu estado de reconfiguração da Energia de Transmissão, envia a mensagem RET e fica a espera de uma resposta.
O nodo B escuta a mensagem de reconfiguração enviada por A. Então utiliza a função para ajuste de sua energia de transmissão de acordo com os parâmetros enviados por A, e envia uma mensagem RETr destinada ao nodo A. O nodo A recebe a mensagem RETr de B adicionando- o na lista de vizinhos e envia uma mensagem de confirmação ADD.
O nodo B recebe a mensagem de A adiciona na lista de vizinhos e envia uma mensagem Criar uma lista de vizinhos auxilia o trabalho dos protocolos de roteamento, que podem consultar as informações da lista para definir rotas e também para sincronização entre nodos.
Quando utilizamos o período reduzido de operação na rede Listen/ Sleep os nodos, freqüentemente, podem estar fora de sincronia, exigindo um período de sincronização para realizar a comunicação.
Para facilitar a sincronização entre os nodos podemos utilizar a lista de vizinhos, criando uma subrede configuranda com o mesmo tempo de operação para os nodos participantes.
Essa estratégia permite que a energia que seria gasta na sincronização dos participantes dessa subrede seja economizada.
A energia de transmissão é um importante parâmetro de configuração de um nodo sensor.
Este parâmetro define o raio de alcance do módulo RF, em outras palavras, define a distância que o nodo consegue estabelecer comunicação com outros nodos.
Em aplicações de RSSFs a energia de transmissão é configurada observando- se a quantidade de nodos, a área e a fidelidade da medida a ser coletada por a rede.
A energia de transmissão tem uma relação direta com a potência, e por sua vez com o consumo de energia.
A equação 4.1 apresenta esta relação, sendo a energia de transmissão expressa em dBm e a potência em mW.
Utilizando a equação como base, podemos afirmar que a grandeza da energia de transmissão é diretamente proporcional a potência utilizada.
Então, quanto menor a energia de transmissão menor a potência utilizada, isto é, menor o consumo de energia do nodo.
A Tabela 3 confirma esta relação, onde são apresentados três dispositivos pesquisados que são utilizados como módulos RF de nodos sensores.
A Tabela mostra uma relação entre Potência típica de consumo em mW, freqüência em MHz e energia de transmissão em dBm.
Podemos observar que a diferença de consumo pode atingir níveis quase três vezes maiores dependendo do parâmetro de energia de transmissão utilizado na configuração do nodo.
Sendo assim, encontrar o menor valor para o parâmetro de energia de transmissão de maneira que o nodo consiga estabelecer as conexões, reduz o consumo de energia no nodo.
A função de reconfiguração da energia de transmissão permite que o nodo obtenha o melhor valor para este parâmetro de maneira automática.
Ainda, permite que nodos que perderam a conexão tentem uma nova conexão na rede, aumentando o raio de alcance da comunicação.
A Figura 25 apresenta o esquema de funcionamento da função RET em forma de fluxograma.
Quando um nodo atinge o número limite de mensagens enviadas sem respostas este entra na função RET.
Em este momento, os seguintes passos devem ser observados:
Reconfigurar o parâmetro de energia de transmissão para um nível mais alto, salvar a configuração nos registradores do dispositivo e enviar a mensagem RET.
Então, o nodo deve aguardar o envio de um RETr do vizinho mais próximo, caso isso não ocorra a operação é repetida até o nível máximo da configuração da energia de transmissão do nodo.
A Figura 26 mostra um exemplo de funcionamento da função RET.
O nodo B que era o caminho de A para C sai da rede por falta de energia.
O nodo A identifica a queda de B e entra em RET.
A primeira tentativa de comunicação depois de aumentar seu nível de energia de transmissão não obtém sucesso.
Então o nodo A aumenta novamente seu nível de energia de transmissão e envia RET novamente.
O nodo recebe a mensagem de A, reconfigura seu nível de energia de transmissão e envia a mensagem RETr.
A Figura 28 mostra uma situação em que um nodo sai da rede e por conta disso os nodos A, F, D, M, K ficam isolados numa subrede.
Em este caso o R-MAC identifica esta subrede e descobre novas conexões.
Como o nodo B saiu da rede, o nodo A estabelece comunicação apenas com os dois nodos que ainda estão em seu alcance de rádio F e D. O nodo F tem em seu alcance de rádio o nodo A e o nodo K, como o nodo A foi o nodo de origem da mensagem apenas o nodo K vai enviar- la.
O nodo K por sua vez envia a mensagem porém recebe apenas a resposta do nodo F. Então ele executa a função de reconfiguração de dBm para tentar conseguir uma nova conexão.
Depois da função executada é criado um novo caminho até o nodo P. A mensagem irá percorrer a rede até chegar no AP.
Esta funcionalidade é importante para o auto-gerenciamento da RSSF, uma vez que, possibilita que subredes isoladas estabeleçam novas conexões sendo possível recuperar dados que seriam perdidos.
Isso ocorre, pois, mesmo que os nodos realizem as leituras caso estes dados não fossem gravados na memória dos nodos, os dados não chegariam ao AP e seriam perdidos.
O uso de interframes num protocolo permite criar níveis de prioridade para diferentes tipos de mensagens.
O interframe funciona como um tempo de guarda que a estação deve esperar antes de enviar a mensagem.
A lógica é simples, mensagens com alta prioridade podem acessar o meio mais rapidamente do que mensagens com prioridade mais baixa.
O R-MAC utiliza dois tipos de interframe o Short Interframe Space (SIFS) e o DCF Interframe Space A Figura 29 mostra um gráfico de acesso ao meio com os dois tipos de interframes do protocolo, o SFIS e o DIFS.
Assim que o meio estiver desocupado os nodos selecionam um tipo de interframe de acordo com a mensagem a ser enviada.
Em o R-MAC o SFIS é utilizado somente por mensagens de alta prioridade, que são os frames de controle CTS, Data e ACK, RETr ou EVT.
As mensagens de baixa prioridade CTS, RET e ADD devem utilizam o DIFS e aguardar seu slot na janela de contenção para iniciar a transmissão.
O cálculo para o tempo de cada interframe no R-MAC é feito do acordo com as equações a seguir:
Para o SIFS:
Para o DIFS:
DIFS $= SIFS+ 2 × slot onde, slot corresponde ao tamanho de um slot da janela de contenção, que na configuração padrão do R-MAC é de 2 bits.
A janela de contenção é utilizada para evitar colisões quando várias estações desejam acessar o meio ao mesmo tempo.
Mensagens de alta prioridade não utilizam janela de contenção depois do interframe SFIS.
Isso porque, um nodo só envia uma mensagem de alta prioridade se já estiver utilizando o meio e portanto poderá acessar o meio antes dos outros nodos.
Mensagens com baixa prioridade podem acessar o meio depois de um interframe DIFS.
Estando o meio livre é possível que mais de um nodo deseje transmitir ao mesmo tempo, o que acarretaria numa colisão.
Para evitar este problema é utilizado um algoritmo backoff aleatório, baseado no protocolo IEEE 802.
11. Este algoritmo funciona da seguinte maneira, as mensagens que devem esperar por o fim de um interframe DISF entram num período denominado janela de contenção (contentionwindow) assim que o DISF termina, Figura 29.
Este período tem um tamanho fixo e é divido em slots.
O nodo sorteia um slot aleatório que serve como referência para entrar no meio.
Quando diversos nodos desejam transmitir, o nodo que receber o primeiro slot (o slot com o menor número) pode enviar primeiro, enquanto as outras devem esperar o meio ficar desocupado novamente.
Em o protocolo IEEE 802.
11 o tamanho da contention-- window é incrementado em potência de 2 menos 1 a medida que retransmissões vão sendo necessárias.
Esta medida diminui a probabilidade de colisões, pois quanto maior o número de slots menor a probabilidade de duas estações ocuparem o mesmo slot.
Em o R-MAC o tamanho da janela é fixo de 0 a 31, e quando ocorre uma colisão os nodos devem sortear um novo slot.
A detecção de erros no R-MAC é feita somente em mensagens unicast, ficando a correção de erros sob responsabilidade do nodo que transmitiu.
Quando um erro é detectado a estação emissora deve reenviar o frame.
Em alguns casos, a estação pode não receber o pacote de controle ACK, então irá supor que a transmissão foi perdida.
Quando a estação retransmitir o pacote o contador retry counter é incrementado.
A utilização deste contador permite que seja estipulado um limite para retransmitir um frame.
O retry counter inicia em zero e é incrementado a cada falha de transmissão.
Quando este alcança um limite determinado o frame é descartado.
O retry counter é zerado quando:·
Um frame CTS é recebido em resposta a um RTS.·
Um frame broadcast ou multicast é recebido.·
A camada de Enlace reconhece que o pacote deve ser descartado A Função Listen/Sleep, conforme visto no capítulo 2, na seção 2.4.6, é implementada para obter economia de energia aproveitando- se da característica do baixo tráfego de mensagens em RSSF, alternando o módulo de RF entre ciclo de operação ativo (listen) e inativo sleep.
O protocolo R-MAC permite configurar o tamanho do ciclo de operação e o tempo em que o dispositivo deve ficar no modo Listen (Duty Cycle).
Esta ação é feita alterando valores do registrador de configuração do módulo RF.
Vale lembrar, quando o nodo está no modo sleep fica impossibilitado de enviar ou receber mensagens.
Contudo, quanto maior o tempo de operação em sleep maior a economia de energia.
Para uma mesma RSSF, normalmente os nodos são configurados com o mesmo duty cycle, mas é possível configurar cada nodo com um duty cycle diferente.
Um problema encontrado nos protocolos tradicionais são os nodos que não participam da comunicação, mas permanecem ativos durante as transmissões de mensagem que não são destinadas a eles.
Este problema é conhecido como nodos ouvintes.
A função Controlador de Nodos Ovintes (CNO) é inspirada na função Carrier-Sensing virtual do 802.11, e sua principal funcionalidade é levar os nodos para estado sleep quando as mensagens recebidas não são destinadas a estes.
As mensagem de controle do R-MAC contém o campo CNO com o tempo que o meio está reservado para a comunicação.
Quando um nodo recebe uma mensagem que não é destinada a ele deve verificar o CNO e entrar em modo sleep até o contador ser decrementado.
A Figura 31 mostra como o CNO protege as operações de uma eventual interrupção.
Quando o nodo envia um pacote de controle RTS para estabelecer comunicação, de entre outras informações contidas no pacote está o tempo CNO.
Então, todas as estações que recebem pacote RTS sabem que o meio estará ocupado durante o tempo determinado por o CNO.
Quando a estação receptora recebe o pacote RTS, prontamente ela envia um pacote CTS que contém o CNO (CTS) mais curto, ver Figura 30.
Isso garante que todos os nodos que estão no alcance do sinal de rádio dos dois nodos recebam o CNO, reservando o meio para a comunicação até que o CNO termine.
Depois que o nodo receptor recebe o pacote, a seqüência é completada com o envio do pacote ACK e o fim do CNO.
Esta seção apresenta os pacotes utilizados por o protocolo R-MAC, seus componentes, suas estruturas e suas funcionalidades.
Os pacotes do protocolo R-MAC foram projetados com base no protocolo IEEE802.
11, levando em consideração as necessidades específicas e os módulos de RF utilizados por nodos sensores.
A Figura 32 apresenta o pacote básico com os campos presentes em todos os pacotes do protocolo.
Todos os pacotes são estruturados por os quatro campos preâmbulo, delimiter, R-MAC header e CRC.
Cada campo do protocolo tem uma funcionalidade.
A estrutura dos campos é mantida para todos os pacotes, mas o conteúdo de cada campo é diferente para os vários tipos de pacotes.
A seguir será detalhado cada campo básico do protocolo, seus subcampos e os tipos de pacotes.
O campo preâmbulo é utilizado para identificar o início de uma mensagem e começar a sincronização da mensagem no receptor.
Este é composto de dois subcampos o Sync e o Start Frame Delimiter (SFD).
Sync O Campo Sync é composto por 8 bits alternados entre 1 e 0.
Este serve para identificar o início de uma mensagem e para sincronizar o recebimento da mensagem.
O Sync do protocolo proposto tem 8 bits, sendo dez vezes menor que o existente no protocolo IEEE802.
11. Esta diferença existe porque o IEEE802.
11 prevê comunicação entre dispositivos com os módulos RF diferentes e dar suporte a dispositivos com múltiplas antenas.
Os 80 bits no campo sync permite que dispositivos diferentes tenham mais tempo para acertar a sincronização de recebimento do pacote.
Ainda, o campo Sync longos permite que um dispositivo com múltiplas antenas identifique o sinal de Sync e escolha a antena com o melhor sinal.
Contudo, em dispositivos nodos sensores o tamanho deste campo não necessita ser tão grande.
Os nodos sensores, normalmente, trabalham com apenas uma antena.
Também, os dispositivos a eles conectados são previamente conhecidos o que facilita a sincronização.
Por este motivo é possível reduzir o tamanho deste campo, reduzindo também o tamanho da mensagem e por conseqüência o consumo de energia.
Start Frame Delimiter (SFD) Este subcampo do preâmbulo sinaliza o final do campo sync e início do pacote.
A seqüencia de 8 bits 1 e 0 alternados do campo sync é interrompida com uma seqüencia de três bits 1 e três bits 0 seguidos.
O campo é finalizado com dois bits 1 que sinalizam o início do delimiter.
Esta seqüência de 0´ s e 1´ s seguidos facilita a identificação de inicio do pacote, sendo bastante utilizados em dispositivos menores, como RFID.
O Campo Delimiter do protocolo R-MAC utiliza o mesmo padrão do IEEE802.
11, pois este campo contém informações lógicas que serão utilizadas por a camada física para decodificar o pacote.
Esta padronização permite que nodos da RSSF decodifiquem pacotes de outros dispositivos, como APs, sem nenhuma alteração.
O Delimiter é composto por 16 bits e é dividido em dois subcampos, o PCLP Length Word (PLW) e o PCLP Signaling Field (PSF).
Através destas informações é possível saber o tamanho e a taxa que o pacote será recebido.
Com estas informações é possível calcular o tempo de recebimento de cada pacote.
4095 bytes.
Este campo serve como parâmetro para identificar o final do pacote, o nodo recebe o pacote, decodifica este campo e sabe quantos bits seguem a partir de o delimiter.
PCLP Signaling Field (PSF) O campo PSF define a que taxa o pacote será transmitido.
Em o R-MAC são utilizadas taxas de transmissão bem mais baixas que no IEEE802.
11 que vai de 1 Mbps a 4, 5 Mbps.
Normalmente nodos sensores não atigem estas taxas.
São utilizados 4 bits para determinar a taxa de transmissão.
Estes valores são pre-estabelecidos de acordo com as taxas de transmissão encontradas nos dispositivos nodo sensores.
O primeiro bit é reservado e colocado em 0.
Os bits de 1 -- 3 permitem selecionar a taxa de recebimento do pacote do acordo com a Tabela 4.
O pacote encerra com o campo CRC, que é utilizado para verificar a integridade do pacote recebido.
O CRC é um método para a verificação de dados que utiliza uma operação matemática polinomial para esta verificação.
Os dados passam por um polinômio e o valor de saída é o CRC.
Quando o pacote é enviado a estação que envia realiza o cálculo do CRC e o insere no final do pacote.
Todos os campos do MAC header são inclusos no cálculo do CRC.
A estação que recebe o pacote repete o mesmo cálculo e o compara com o CRC recebido.
Se o valor do CRC for igual ao CRC recebido o pacote não está danificado.
Alguns módulos de RF implementam o cálculo do CRC, passando a informação se o pacote é valido ou não.
Caso o módulo não tenha esta funcionalidade esta tarefa fica a cargo de o protocolo da camada de Enlace.
Esta seção apresenta a estrutura do campo MAC header.
Este campo é o principal na estrutura do protocolo, apresentado na Figura 35.
Em este estão informações fundamentais para o funcionamento do protocolo como, por exemplo, tipos de mensagens, campo de dados, controle de seqüência e endereços.
As subseções a seguir detalham todas as funcionalidades do campo MAC header.
O endeçamento no R-MAC segue o padrão utilizado em outras redes IEEE802, com endereços de 48 bits.
Esta padronização permite a utilização de outro protocolos tradicionais nas camandas superiores sem grandes modificações, permitindo o tráfego de mensagens unicasts, multicasts e broadcasts.
Podendo ser utilizados até quatro campos de 6 bytes para endereçamento.
A utilização de cada endereço depende dos subcampos Te o e From, seção 4.5.4.3.
Em regra geral o Address 1 é utilizado para o nodo receptor, o Address 2 para o transmissor e o Address 3 pode ser utilizado para filtrar mensagens.
O campo Frame Body contém informações de dados ou pacotes de gerenciamento.
Este campo transmite os pacotes das camadas superiores e pode ter o tamanho variável de 0 a 3863 bytes.
O subcampo frame control têm 16 bits de controle, guardando informações necessárias para interpretar toda a seqüencia do campo MAC header.
Seus subcampos são:
Type, CNO, Te o Ds, From Ds, more fragments, retry (veja Figura 36).
O subcampo Type identifica o tipo e a função de frame, isto é, se é um pacote de controle, dados ou configuração.
A Tabela 5 mostra a lista completa dos tipos de pacotes.
O EVT, único pacote não apresentado anteriormente, é utilizado para sinalizar a ocorrência de um evento.
Subcampos Te o e From Os subcampos Te o e From tem 1 bit cada e são utilizados apenas em pacotes de dados, indicando para quem o pacote é destinado.
Este dois subcampos definem o significado de cada campo Address, podem definir se o pacote está sendo enviado de um nodo para outro, de um nodo para o AP ou do AP para os nodos.
A Tabela 6 mostra as quatro combinações possíveis para os dois subcampos.·
Destination Address (DA):
É o endereço de 48 bit IEEE MAC que corresponde ao receptor final, a estação que deve receber o pacote para as camadas superiores processarem.·
Receiver Address (Ra):
Indica qual estação pode processar o pacote.
Se o Ra for um nodo, logo o Ra é o De a.
Para pacotes destinados a uma estação fora de a RSSF o Ra é o AP, e o De a será o endereço do roteador estação fora de a RSSF.·
Transmitter ddress (Te a):
Identifica qual nodo transmitiu o pacote.
O Te a é utilizado internamente na RSSF.·
Basic Service Set Id (BSSID):
É utilizado para identificar o AP.
Subcampo Retry Este Subcampo é utilizado para indicar se o pacote foi enviado pela primeira vez ou foi retransmitido.
Quando o pacote foi enviado pela primeira vez este subcampo é 0.
Quando tratase de uma retransmissão do pacote o subcampo é 1.
Este subcampo é utilizado por o protocolo R-MAC para filtrar pacotes repetidos.
Contador de Nodos Ouvintes -- CNO A funcionalidade CNO, que já foi vista na seção 4.4.2, terá seu subcampo detalhado agora.
O CNO é formado por 2 bits que servem para alocar o meio numa comunicação.
O nodo só leva em consideração o CNO se o pacote não for destinado a ele.
A Tabela 7 mostra as possíveis configurações deste subcampo.
Quando o CNO é 00 a estação que recebe continua escutando o meio.
Esta configuração é utilizada para pacotes de controle do AP ou em comunicações de um passo sem confirmação.
Quando a estação recebe o CNO 11, deve entrar em seu modo de sleep até seu próximo período de listen.
Este CNO é utilizado quando dois nodos pretedem trocar uma grande quantidade de informações e irão ocupar o meio por bastante tempo.
Quando o nodo recebe o CNO 10 significa que outros dois nodos irão começar uma comunicação e que o nodo deve entrar no modo sleep durante o período desta comunicação.
Este tempo é obtido por a equação 4.5, sendo o tamanho máximo da comunicação dividido por a taxa de transferência de dados (PSF).
TamPc (RT S) $= (3 xSIFS+ CT S+ Data+ ACK) TamPc (RT S) Quando o nodo recebe o CNO 01, isso significa que a comunicação já está em andamento e o nodo deve ficar no modo sleep por o tempo definido por a equação 4.6.
TamPc (CT S) $= TamPc (RT S) -- (CT S+ SIFS) TamPc (CT S) Este capítulo apresentou a interação do protocolo R-MAC com o módulo RF, suas funcionalidades e possíveis configurações.
O capítulo 5 apresenta a análise de algumas funções do R-MAC específicas para redução do consumo de energia nas RSSF.
Esta análise pretende confirmar esta característica do protocolo proposto.
Este protocolo foi desenvolvido para RSSF dirigidas a eventos, com coleta periódica, insensível a latência da rede e com baixa taxa de envio.
O cenário escolhido para simulação foi o de monitoramento de temperatura numa RSSF de baixa densidade com 100 nodos.
A taxa de envio de mensagem será de 38,4 kbps, com freqüência de 915 MHz e 10 dBm de energia de transmissão.
Os nodos da RSSF estão equipados com um sensor de temperatura, sendo prevista uma coleta periódica de dados a cada 1 s ou quando ocorrer um evento de temperatura superior a 450C.
As ações de coleta e análise dos dados ficam a cargo de o sistema operacional do nodo sensor.
Estas ações são executadas nos domínios de sensoriamento e de processamento, enquanto que o domínio de comunicação é ativado por uma requisição de envio de mensagem entregue a camada de Enlace.
De esta maneira, o domínio de sensoriamento é o responsável por a transformação da energia térmica em dados.
Enquanto, o domínio de processamento gerência o domínio de sensoriamento e avisa a camada de Enlace que o módulo de RF deve enviar uma mensagem com os valores do sensor toda vez que os dados foram lidos.
Logo, o domínio de comunicação que é gerenciado por a camada de Enlace fica responsável por distribuir os dados coletados até o AP.
A seguir são apresentados e discutidos as estratégias utilizadas para testar e validar o protocolo proposto.
O modelo de energia leva em consideração quatro estados do nodo Sleep, Ocioso, TX e RX.
O estado Sleep é o estado de menor consumo, pois o nodo é posto em standbay e não pode transmitir nem receber.
O TX é o estado de transmissão, que é o de maior consumo.
O estado Ocioso é o estado em que o nodo está escutando o meio a espera de uma mensagem, mas não está processando nenhuma mensagem.
O estado RX é o estado em que o nodo está recebendo uma mensagem.
Considerando os quatro estados possíveis pode- se obter a potência média consumida (Pm) por a equação 5.1: O tempo de vida do nodo pode ser calculado com base na potência média Pm e a energia inicial E. A equação 5.2 representa o tempo necessário para a energia do nodo terminar:
Tv $= Pm A análise do tempo de vida apresentada neste trabalho leva em conta apenas a energia consumida por o módulo RF, desconsiderando o consumo dos outros circuitos dos nodos.
Inicialmente, pode- se intuir que o menor tempo de vida possível de um nodo seria no caso em que ele passasse todo o tempo transmitindo.
Contudo, mesmo que um nodo fique continuamente enviando dados, ele deve entrar em outros estados, como, Ocioso e RX por a característica de funcionamento do R-MAC.
Para verificarmos o consumo de energia no R-MAC a primeira análise realizada será num cenário de comunicação direta entre dois nodos.
Está analise é importante pois serve como base para análises mais complexas.
O cenário considerado consiste em analisar o consumo de dois nodos numa comunicação direta.
Os nodos estão separados por uma distância que permite a comunicação direta entre eles com a energia de transmissão configurada para de 10 dBm.
Os nodos utilizam uma taxa de 38, 4 Kbps, garantindo que sempre que o meio esteja livre o nodo emissor tenha algo para transmitir.
Desta forma, a taxa máxima de utilização pode ser calculada.
A Tabela 8 mostra o consumo do nodo para cada estado neste cenário com base no datasheet do dispositivo para as configurações acima.
Em esta condição, toc, tT X e tRX são a fração de tempo da transmissão em que o nodo passa por o estado Ocioso, TX e RX.
O estado sleep não é levado em consideração nesta análise, pois deseja- se obter o consumo durante a comunicação e para realizar qualquer comunicação o dispositivo deve estar em Listen.
Em este cenário, com a taxa de transferência de 38, 4 Kbps utilizando as equações 4.2, 4.3 e a seguir, para cada slot da janela de contenção:
Para interframes:
Para o SIFS:
Para o DIFS:
DIFS $= SIFS+ 2 × (slot) $= 1, 3ms A Figura 37 mostra o tempo de transmissão de um quadro completo sem levar em consideração os atrasos de propagação.
O tempo de cada interframe já foi calculado anteriormente.
Também, temos o tempo de cada slot da janela de contenção, e sabemos que esta é composta de 31 slots que na média resulta em 15,5 slots de tempo, resultando num tempo médio de 8, 06ms por quadro.
Além disso, o Preâmbulo e o Delimiter tem 2 bytes cada um, resultando em 0, 84ms para os dois.
A transmissão do quadro de controle RTS, com 16 bytes, leva 3, 34ms, enquanto o CTS e ACK com 10 bytes cada um leva 2, 09ms. O tempo de transmissão do quadro de dados é igual ao tempo de transmissão a 38, 4 Kbps de 21 bytes que corresponde ao R-MAC header mais os bytes de dados.
É importante ressaltar que nos bytes de dados deve- se contar quaisquer cabeçalhos de camadas superiores que venham a ser utilizadas.
O protocolo IP, por exemplo, possui 20 bytes.
Com estes valores pode- se obter o tempo de transmissão do quadro completo Tqc, por a equação 5.6: Tqc $= tJC+ 4 × t pd+ 3 × SIFS+ DIFS+ tRT S+ tCT S+ tDados+ tACK Assim o tempo de transmissão, em ms, é igual a:
Tqc $= 12, 96+ tDados Para calcular os tempos de toc, tT X e tRX atribui- se valores para o tDados.
A Tabela 9 mostra os tempos e o número de quadros completos que podem ser transmitidos por ciclo de operação para diferentes tamanhos de pacotes de dados.
Em este cenário, foi considerado o ciclo de operação da função Listen/ Sleep com duty cycle de 10%, sendo que os dois nodos que participam da comunicação estão sincronizados.
Com este duty cycle os nodos estão em sleep e operam 0, 9 na fração de tempo ts e 0, 1 nas frações toc, tRX etT X.
Tabela 10: Fração de tempo dos nodos por o tamanho dos pacotes.
Tamanho do Pacote (bytes) toc Emissor tT X tRX toc Receptor tT X tRX A partir destes valores de tDados e tempos dos quadros pode- se calcular ts, toc, tRX e tT X para o nodo emissor e para o nodo receptor.
Os tempos de JC, SIFS, DFIS são os tempos em que ambos os nodos ficam ociosos.
Os tempos referentes ao RTS e Dados, incluindo os preâmbulos e delimiter associados são tempos em que o emissor fica em TX e o receptor em RX.
Em os períodos relativos a CTS e ao ACK, a situação é inversa.
Em a Tabela 10 podem ser vistos os valores calculados.
De posse dos valores da Tabela 10, podemos calcular a potência média Pm da equação 5.1 para os nodos emissor e receptor.
Lembrando que o duty cycle é de 10% na rede, isso torna ts $= 0, 9 e toc+ tT X+ tRX $= 0, 1.
Utilizando um pacote de dados de 64 bytes, o valor de Pm é dado por:
Para o nodo receptor:
Com o valor de Pm é possível estimar o tempo de vida Tv de um nodo emissor, sendo este o caso de maior consumo.
A Tabela 1, no capítulo 1, apresenta o consumo nos três domínios processamento, comunicação e sensoriamento.
Para estimar o valor de Tv, assumi- se que os domínios de processamento e sensoriamento estão sempre consumindo.
Assumi- se também para domínio de processamento a potência de referência PmP $= 0, 75m W, para o domínio de sensoriamento a potência de PmS $= 1, 8m W.
Supondo que a energia do nodo E é uma bateria de 2700m W h, utilizando a equação 5.2 obtém- se o Tv do nodo:
Para o receptor:
O mesmo cálculo do tempo de vida Tv do nodo emissor pode ser realizado sem a utilização do ciclo de operação reduzido Listen/ Sleep.
Em este caso, o valor de ts $= 0 e o duty cycle é 100%.
O valor de Pm é obtido por:
A partir desses resultados, é possível observar que o ciclo de operação Listen/ Sleep prepresnta um ganho considerável no tempo de vida útil de uma RSSF.
A configuração do tamanho do ciclo e do duty cycle deve ser regulado de acordo com as necessidades de coleta de dados e de acordo com o tamanho dos pacotes, tentando evitar a fragmentação.
Outro problema encontrado nos protocolos tradicionais é o problema dos nodos ouvintes.
A função CNO do R-MAC diminui o consumo de energia dos nodos ouvintes.
Existem três tipos de nodos ouvintes:
O OE, que está no alcance apenas do emissor e, portanto, só escuta o tráfego originado por o emissor;
O OR, que está no alcance apenas do receptor e, portanto, só escuta o tráfego originado por o receptor;
E o OER que está no alcance de ambos e escuta toda a comunicação.
A Figura 38 representa a comunicação entre o nodo emissor C e o nodo receptor D, os nodos F, B, J são os nodos ouvintes.
Este tipo de problema não chega a ser um problema para interfaces operando com taxa de transferências acima de 2 Mbps.
Porém, para dispositivos que operam com uma baixa taxa a economia de energia pode ser significativa.
Considerando os valores da Tabela 10 pode- se obter as frações de to c e tR X dos nodos ouvintes.
A Tabela 11 mostra o consumo dos nodos ouvintes sem a utilização da função CNO.
Com os valores da Tabela 11 pode- se calcular o consumo dos três tipos de nodos ouvintes durante a comunicação, utilizando o tamanho de pacote de dados de 64 bytes.
Pm $= 0, 83 × Poc+ 0, 17 × PRX PmOR $= 7, 87m W Potência média para o nodo ouvinte OE:
Pm $= 0, 47 × Poc+ 0, 53 × PRX PmOE $= 24, 23m W A Tabela 12 mostra o comportamento dos três tipos de nodos ouvintes durante a comunicação utilizando a função CNO.
Como pode- se observar a principal diferença é que os nodos ocupam a fração de tempo ts, isso acontece por que assim que o nodo identifica que não é o destinatário da mensagem, este entra no seu estado sleep até zerar seu contador CNO.
Pm $= 0, 56 × Ps+ 0, 27 × Poc+ 0, 17 × PRX PmOR $= 7, 70m W Potência média para o nodo ouvinte OE com CNO:
Pm $= 0, 61 × Ps+ 0, 27 × Poc+ 0, 12 × PRX PmOE $= 5, 5m W Como pode- se observar, com a utilização da função CNO a potência de consumo média no nodo ouvinte foi consideravelmente menor, caindo de 31, 96m W para 5, 5m W no OER, de 24, 23m W para 5, 5m W no OE e 7, 87m w para 7, 7m w no OR.
Essa diferença é bastante significativa para uma RSSF densa, isto é, como um grande número de sensores interagindo entre si.
Devido as dificuldades encontradas para simulação e prototipação do protocolo proposto, optou- se por realizar a validação do mesmo matemáticamente.
Para isso, no presente capítulo foram utilizadas equações de consumo, e os resultados quantitativos obtidos a partir de dados de dispositivos reais foram analisados de forma tabular.
Comparando os resultados do tempo de vida dos nodos que utilizam o ciclo reduzido de operação com os nodos do modelo tradicionais, observa- se que o ganho no tempo de vida foi de 23 vezes.
Outra análise realizada foi em relação a os nodos ouvintes que no melhor dos casos tiveram um ganho de energia de 5, 8 vezes em comparação ao protocolos tradicionais.
O presente trabalho iniciou como parte de um projeto de pesquisa desenvolvido no Centro de Pesquisa em Software Embarcado (CPSE/ HP-PUCRS).
Este projeto tinha como principal objetivo o desenvolvimento de um sistema para validação de usuários, controle de acesso e gerenciamento de informações de usuários.
Também, poderia ser utilizado para determinar a localização dos usuários, informar os serviços disponíveis na rede e controlar avisos de serviços de restaurações de dados de usuários, uma primeira abordagem foi apresentada em.
O suporte em hardware para esse ambiente era dado por uma plataforma chamada de Beacon, também desenvolvida no CPSE.
A plataforma Beacon apresentava uma arquitetura muito similar a arquitetura de um nodo sensor, pois possui uma unidade de processamento, uma unidade de comunicação e alguns periféricos, como alguns sensores).
O protocolo R-MAC foi inicialmente projetado para garantir uma comunicação eficiente com baixo consumo de energia entre os Beacon, sendo parte integrante do projeto citado acima.
Porém, a pesquisa foi descontinuada por o órgão financiador do projeto antes de sua conclusão.
Com isso foram encontradas dificuldades para realizar testes do protocolo R-MAC numa plataforma em hardware, pois as primeiras versões da plataforma não dispunham de módulo de comunicação RF.
Para realizar a validação do R-MAC sem uma plataforma de prototipação, num primeiro momento foi investigada a utilização de redes de autômatos estocásticos (SAN).
Porém, numa SAN não é possível computar o tempo que o evento permaneceu em cada estado, o que compromete a análise do consumo de energia, que é diretamente dependente do tempo.
Em um segundo momento, foi utilizado o simulador de redes ns -- 2.
Testes com o protocolo MAC disponível no simulador, o IEEE802.
11, foram realizados a fim de realizar uma comparação com o R-MAC.
Contudo, para fazer esta comparação era necessário implementar o R-MAC na linguagem TCL, linguagem interpretada por o simulador ns -- 2, e integrar seu código no ambiente do simulador.
Por a complexa estrutura do simulador ns -- 2 e por a falta de documentação sobre as funções de implementação, suas dependência e interações com as demais bibliotecas de ns -- 2, as tentativas de integração do R-MAC no simulador ns -- 2 não foram validadas com sucesso.
Em um último momento, partiu- se para uma abordagem analítica para validar o R-MAC.
Para isso foi utilizada uma plataforma de um nodo com o módulo de comunicação CC1100, da TexasInstruments, como estudo de caso.
Os dados relativos ao consumo foram retirados dos datasheets de cada módulo.
Através desta análise foi possível analisar as funcionalidades do R-MAC.
Obtendo a fração de tempo que os nodos ficam em cada estado, foi calculada a potência média do nodo para vários cenários.
Sendo possível estimar o tempo de vida do nodo.
Calculando a fração de tempo que os nodos ouvintes permanecem em cada estado, foi possível comprovar que a estratégia CNO é eficaz para reduzir o consumo da RSSF.
O protocolo proposto tem suas funcionalidades direcionadas para atender RSSFs que trabalham com aplicações dirigidas a eventos e coleta periódica de dados.
Para atender estes requisitos foi proposto o ciclo reduzido de operação, permitindo a configuração tanto do tamanho do ciclo quanto do duty cycle, economizando energia por os ciclos reduzidos e por evitar a fragmentação de pacotes.
Ainda para atender os requisitos dos eventos foi proposto o pacote EVT, que é um pacote de controle de alta prioridade que sinaliza um evento.
Aproveitando a característica de baixa taxa de envio que, normalmente, é utilizada por as RSSFs, foi proposta a função CNO, que permite economia de energia colocando os nodos ouvintes em modo sleep.
A redução do tamanho dos pacotes de controle também impacta no consumo de energia.
A função de ajuste de energia de transmissão permite que nodos estabeleçam novas conexões com a rede.
Esta função é útil no caso de o nodo ficar isolado, aumentando seu tempo de interação com a RSSF.
Outra funcionalidade do R-MAC é a lista de vizinhos, criada quando a RSSF começa a operar.
O R-MAC consegue atingir um ganho de até 23 vezes no tempo de vida quando o nodo se comporta como emissor e um ganho de até 5,8 vezes quando o nodo se comporta como ouvinte.
As funcionalidades de conexão e sincronismos entre os nodos permitem que a RSSF fique ativa por mais tempo, aproveitando melhor o tempo de vida da rede.
Em o presente momento, o R-MAC faz parte de uma pesquisa de mestrado orientada por o professor Fabiano Hessel.
Este projeto tem por objetivo a implementação de uma arquitetura que permita o monitoramento e a caracterização de ambientes térmicos em estufas agrícolas.
O R-MAC será implementado de acordo com as características do assembly da arquitetura proprietária escolhida para o projeto.
A Tabela 13 apresenta os resultados de um estudo comparativo entre o R-MAC e os demais protocolos investigados nessa dissertação.
