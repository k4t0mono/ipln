A virtualização de ambientes computacionais tem cada vez mais atraído a atenção dos meios acadêmico e corporativo.
Em virtude de sua utilização estar cada vez mais presente nesses meios, formas de gerenciar a complexidade que ambientes virtualizados apresentam tornam- se de grande importância, pois permitem controlar eventos no ambiente.
Embora atividades de gerência sejam importantes, não há um padrão que auxilie neste processo de controle e monitoração de ambientes que se utilizam de virtualização.
Uma forma de preencher esta lacuna é buscar, em outras áreas da computação, conceitos que dêem base e que auxiliem no processo de concepção de atividades gerenciais.
De este modo, é possível utilizar conceitos aplicados em diferentes áreas da computação para gerenciar ambientes virtualizados, conhecidos como áreas funcionais de gerência.
Sendo assim, o presente trabalho consiste na concepção de uma arquitetura para gerenciar ambientes virtualizados, tendo como base as recomendações das áreas funcionais de gerência adaptadas para a realidade de virtualização.
Palavras-chave: Gerência de sistemas, monitoração, virtualização, áreas funcionais de gerência, FCAPS.
Em os últimos anos, a virtualização de ambientes computacionais vem conquistando espaço junto aos cenários acadêmico e corporativo.
Embora o conceito de máquinas virtuais tenha surgido na década de 60, o uso da virtualização em ambientes computacionais ganha destaque devido a os benefícios que pode proporcionar.
De entre os principais, pode- se observar o melhor aproveitamento do hardware e a possibilidade de integrar diferentes plataformas de sistemas operacionais.
Além disso, tecnologias de virtualização auxiliam na redução de custos, diminuindo a quantidade de hardware utilizado, proporcionando um ambiente mais enxuto e com os mesmos serviços fornecidos por ambientes que não utilizam- se desta tecnologia.
Se antes havia a necessidade de possuir um parque computacional maior para ter servidores que trabalhem com diferentes propósitos, através das tecnologias de virtualização é possível que se tenha a consolidação destes servidores, onde estes, mesmo com diferentes objetivos podem executar suas atividades estando alocados na mesma estrutura física.
Frente a essas inovações tecnológicas, surge a necessidade de gerenciar os ambientes computacionais onde essas estão inseridas, proporcionando às pessoas envolvidas maior controle da utilização dos recursos tanto físicos quanto virtuais, além de as atividades que são realizadas.
Embora estas necessidades sejam claras, não há um padrão de gerência específico para ambientes virtualizados, levando os envolvidos neste processo ao interesse por padrões provenientes de outras áreas da computação.
Como forma de nortear as atividades gerenciais, são utilizadas as recomendações das áreas funcionais de gerência, as quais têm origem na área de redes de computadores, e são parte que compõe o modelo de referência OSI (do inglês, Open Systems Interconnection).
As áreas funcionais de gerência, também conhecidas como FCAPS (do inglês, Fault, Configuration, Accounting, Performance, Security), apresentam recomendações para as gerências de falhas, configuração, contabilidade, desempenho e segurança.
Para cada uma dessas áreas as recomendações permitem a padronização de atividades gerenciais dentro de o contexto em que estão inseridas.
Para cada área funcional há um propósito a ser seguido por a unidade que utiliza- se de suas recomendações, fazendo com que as atividades de gerência sejam bem definidas e, com isso, possam dar maior sustentabilidade para monitorar e controlar os eventos do ambiente.
Para realizar a gerência (que compreende atividades de monitoração e controle) de ambientes virtualizados, as recomendações das áreas funcionais de gerência, adaptadas para tal cenário, podem ser utilizadas para auxiliar na identificação dos módulos que deverão fazer parte da arquitetura, definindo os serviços que irá prover, além de permitir que se tenha conhecimento das gerências que estão sendo realizadas no ambiente.
Embora existam ferramentas disponíveis para gerenciar ambientes físicos e virtuais, estas ferramentas apresentam limitações e, por isso, não atendem aos requisitos básicos identificados como necessários para realizar atividades de gerência.
Para os testes do presente trabalho será utilizado o ambiente em que o mesmo encontrase inserido.
Este ambiente consiste num framework baseado em virtualização que realiza emulação de sistemas distribuídos, onde as máquinas virtuais estão hospedadas em máquinas reais, organizadas num cluster de computadores.
Frente a este cenário, o presente trabalho consiste no desenvolvimento de uma arquitetura de gerência de ambientes virtualizados que segue as recomendações das áreas funcionais de gerência, mais especificamente das gerências de falhas, configuração, contabilidade e desempenho.
Além disso, a arquitetura proposta, através dos módulos que possui poderá ser utilizada em diferentes contextos que utilizam- se da tecnologia de virtualização, visto que o ambiente pode ser monitorado ou controlado independente de ser um Data Center ou um ambiente cujo objetivo seja emular ambientes distribuídos baseados em virtualização.
Desta forma, o objetivo do trabalho é prover uma arquitetura que siga uma padronização no âmbito gerencial e com isso possa servir como um modelo de atividades gerenciais a serem realizadas, mantendo ambientes virtualizados controlados e monitorados de acordo com as áreas funcionais estudadas.
Este trabalho está organizado da seguinte forma:
O Capítulo 2 apresenta conceitos de virtualização, além de a utilização, características e aplicações de máquinas virtuais.
O Capítulo 3 apresenta uma visão geral sobre atividades gerenciais, a gerência como atividade direcionada para ambientes que utilizam- se da tecnologia de virtualização, e ainda aborda as recomendações das áreas funcionais de gerência do modelo de referência OSI.
O Capítulo 4 apresenta as ferramentas de gerência de ambientes virtualizados existentes.
O Capítulo 5 apresenta a arquitetura de trabalho proposta e o Capítulo 6 a descrição do ambiente de testes da arquitetura.
Por fim, o 2 Ambientes Virtualizados Embora o conceito de máquinas virtuais tenha surgido na década de 60, atualmente é um assunto em evidência e que gera investimentos de grandes empresas como é o caso da Hp, da IBM e da AMD.
Este interesse é decorrente de características que ambientes virtualizados podem proporcionar, como a possibilidade de integrar diferentes sistemas operacionais, o melhor aproveitamento do hardware, e ainda maior flexibilidade de um sistema, pois é possível executar- lo em diferentes plataformas.
Além disso, permite um melhor balanceamento de carga, disponibilidade e segurança, através de mecanismos como migração de máquinas virtuais entre diferentes máquinas físicas.
É objetivo deste capítulo apresentar alguns conceitos acerca de máquinas virtuais, suas características e aplicações.
Virtualização de ambientes computacionais consiste no processo de criação de um grupo ou subgrupo lógico de recursos, de modo que estes sejam acessados de forma a parecer o máximo possível com recursos físicos de um ambiente computacional convencional.
Em este contexto, as máquinas físicas são também chamadas máquinas hospedeiras (host), e as máquinas virtuais são chamadas de máquinas convidadas (guest).
Uma forma de visualizar as diferentes abstrações de máquinas virtuais é imaginar- las como se fossem fatias na pilha de hardware/ software.
Um sistema computacional é composto de camadas, iniciando com o hardware e incluindo camadas de sistema operacional e programas aplicativos que executam sobre o sistema operacional.
O software de virtualização realiza a inserção de camadas em diferentes lugares do sistema, podendo- se destacar três exemplos destas camadas de virtualização, que incluem virtualização a nível de hardware, a nível de sistema operacional e ainda, a nível de linguagens de alto nível de máquinas virtuais.
Segundo Mendel Rosenblum e Susanta Nanda et al.,
a descrição para as virtualizações em vários níveis é dada como segue nas subseções do presente capítulo.
Em o nível de hardware a camada de virtualização encontra- se sobre o hardware que exporta a abstração de máquina virtual.
Em este caso, é explorada a similaridade entre as arquiteturas de plataformas guest e host para reduzir o custo de interpretação das instruções.
Sendo assim, algumas instruções são repassadas diretamente ao hardware reduzindo o custo de interpretações e, com isso, o modelo acaba ganhando desempenho.
Para o computador há a possibilidade de operar por meio de dois modos:
O modo supervisionado e o modo usuário.
Em este sentido, no modo supervisionado qualquer instrução, seja ela privilegiada ou não pode ser executada.
É neste modo que o VMM (do inglês, Virtual Machine Monitor) opera.
Já no modo usuário somente as instruções não privilegiadas podem ser executadas, e neste modo as máquinas virtuais operam.
Cabe ressaltar que uma arquitetura apresenta duas categorias para suas instruções:
Privilegiadas e não privilegiadas.
As instruções privilegiadas alteram o estado do sistema, um pedido de I/ O e um pedido de escrita na memória são alguns dos exemplos deste tipo de instrução.
As instruções não privilegiadas não alteram o estado do sistema, neste caso a leitura de dados na memória, por exemplo, caracteriza- se uma instrução não privilegiada.
Desta forma, as instruções não privilegiadas poderão ser executadas diretamente no hardware, ao passo que as privilegiadas, quando uma máquina virtual necessitar executar- las, terão que gerar uma exceção para que o VMM capture- a e então emule a mesma.
Para tanto, para que uma tecnologia de virtualização funcione satisfatoriamente, a máquina virtual deve ser capaz de interromper a execução de uma instrução privilegiada, através de uma exceção, e passar- la ao VMM para que este cuide de sua execução.
Isso porque no ambiente do VMM, múltiplas máquinas virtuais podem ter seu próprio sistema operacional rodando para executar instruções privilegiadas e ter acesso à CPU (do inglês, Central Processing Unit), por exemplo.
Quando um pedido de execução de uma instrução privilegiada ocorre durante a execução de uma também instrução privilegiada, ao invés de gerar uma exceção e interromper a execução, a instrução é enviada ao VMM.
Isso permite ao VMM ter o controle completo da máquina e manter cada máquina virtual isolada das demais.
O VMM então, ou executa a instrução no processador, ou emula os resultados e retorna eles à máquina virtual.
Contudo, a maioria das plataformas populares x86 não possuem virtualização completa, ou seja, uma máquina com instruções privilegiadas falha silenciosamente ao invés de provocar uma interrupção causada por uma exceção quando executada com privilégios insuficientes.
Assim, a técnica de virtualização deve possuir formas de contornar situações como esta e passar o controle ao VMM quando a execução de uma instrução falhar.
A maioria dos emuladores usam técnicas como &quot;code scanning «e &quot;dynamic instruction rewriting «para contornar tais situações.
A Figura 1, ilustra a virtualização no nível da camada de abstração do hardware, onde a camada de virtualização encontra- se sobre este e as máquinas virtuais com seus sistemas sobre essa camada.
Alguns exemplos de virtualização a nível de hardware são VMWare, Xen, Virtual PC da Microsoft, de entre outros.
Virtualização a nível de sistema operacional tende a possuir propriedades como alto grau de isolamento (tanto das máquinas virtuais quanto das máquinas físicas subjacentes), suporte a diferentes sistemas operacionais e aplicações, baixo risco e fácil manutenção.
Em esse nível as máquinas virtuais compartilham o hardware bem como o sistema operacional na máquina física, utilizando a camada de virtualização no topo do sistema operacional para apresentar múltiplas máquinas independentes e isoladas para o usuário, como pode ser visto na Figura 2.
Um ambiente operacional é constituído por sistema operacional, bibliotecas de usuário, aplicações, sistemas específicos de estruturas de dados, além de outras configurações do ambiente.
Se toda essa estrutura fosse conservada, o trabalho de uma aplicação em notificar qualquer diferença deste ambiente para um ambiente real se tornaria mais difícil.
Essa é a idéia chave por trás da técnica de virtualização a nível de sistema operacional, onde a camada de virtualização acima de o sistema operacional possui uma partição visível por máquina virtual, funcionando como uma réplica do ambiente operacional da máquina física.
Com um particionamento cuidadoso e uma técnica de transmissão, cada máquina virtual pode ser capaz de exportar um ambiente operacional completo e isolado das demais máquinas virtuais e também da máquina física.
Alguns exemplos de virtualização a nível de sistema operacional são FreeBSD Jails, OpenVZ, de entre outros.
Em este nível, a camada de virtualização funciona como um programa aplicativo que executa sobre um sistema operacional.
Sendo assim, a camada de virtualização encontra- se entre a execução da aplicação e o sistema operacional.
Em este modelo de virtualização a aplicação pode ser executada em qualquer sistema operacional, desde que este sistema tenha suporte para o virtualizador.
Muito embora tais aplicações sejam extremamente portáveis, o desempenho acaba sendo um ponto negativo, uma vez que para cada instrução a ser executada na máquina virtual há uma instrução correspondente que será executada por o virtualizador.
Em a JVM (do inglês, Java Virtual Machine), por exemplo, a idéia é ter capacidade para criar uma máquina virtual no nível de aplicação, e que possa se comportar como uma máquina para um conjunto de aplicações, como qualquer outra máquina.
Como uma máquina normal ela tem que ser capaz de fornecer um ambiente operacional para suas aplicações.
Como exemplos podem ser observados o Smalltalk e o Java.
Segundo Mendel Rosenblum, as características apresentadas por máquinas virtuais são:
Compatibilidade de Software.
A máquina virtual fornece uma abstração de compatibilidade, onde todo software que for escrito para ela poderá ser executado.
Por exemplo, uma máquina virtual a nível de hardware irá executar todos os softwares, sistemas operacionais e aplicações escritos para o seu hardware.
De a mesma forma, uma máquina virtual a nível de sistema operacional executará aplicações para aquele sistema operacional em particular independente da arquitetura de hardware, e máquinas virtuais de alto nível executarão programas escritos em linguagem de alto nível independente do sistema operacional.
Capacidade de Isolamento. A abstração de máquina virtual isola o software que executa na máquina virtual de outras máquinas virtuais e máquinas reais.
Este isolamento permite que mesmo na existência de bugs ou ataques, outras partes do sistema não sejam afetadas.
Além de o isolamento dos dados, a camada de virtualização pode fornecer isolamento do desempenho, onde os recursos consumidos por a máquina virtual não prejudicam o desempenho de outras máquinas virtuais.
Encapsulamento. A camada de software que exporta a abstração de máquina virtual é um exemplo do que é conhecido como nível de indireção.
Esta camada pode ser usada para manipular e controlar a execução do software na máquina virtual.
Além disso, ela pode também utilizar esta indireção para melhorar o software e para fornecer um ambiente de execução melhor.
Por exemplo, máquinas virtuais para linguagens de alto nível tipicamente permitem verificações do sistema em tempo de execução, o que pode reduzir erros de programação.
Isto inclui type-safe, memory-safe e garbage-collection.
Devido a as características apresentadas, esta camada é a que oferece melhor ambiente de execução para programação.
Desempenho. As técnicas utilizadas por os VMMs para mapear as máquinas virtuais com segurança diretamente no hardware da máquina real resultam em baixo desempenho para elas.
O trabalho do VMM é realizar ajustes para que o hardware da máquina virtual seja mapeado diretamente nos recursos de hardware reais.
É devido a estas duas definições de interfaces (virtual e real), que uma máquina virtual em execução pode apresentar desempenho no hardware real.
Por exemplo, a CPU real é emulada por o VMM programando a máquina virtual para executar uma CPU real.
De a mesma forma, dispositivos de I/ O como discos, por exemplo, são emulados usando discos reais.
O uso de virtualização de hardware resulta num overhead ao VMM mensurado numa pequena porcentagem.
O software executando numa máquina virtual gasta maior parte do tempo de execução usando os recursos de hardware;
O desempenho é o mesmo do hardware abaixo de ele.
O overhead do VMM ocorre quando é necessário obter o controle, com o intuito de manter um isolamento seguro ou mesmo a ilusão de transparência.
Estes acontecimentos ocorrem relativamente com pouca freqüência na maioria dos workloads.
Em virtude de as características apresentadas por máquinas virtuais, é possível identificar suas aplicações.
Sendo assim, a Subseção 2.3 destina- se à descrição das mesmas.
Segundo Smith e Nair, verifica- se que cenários de aplicações de máquinas virtuais incluem:·
Consolidação de servidores:
Consiste na possibilidade de hospedar múltiplos servidores num único host físico, apresentando desempenho e isolamento de falhas.·
Independência de hardware:
Característica que permite a execução de aplicações e sistemas operacionais em hardwares diferentes.·
Configuração de múltiplos sistemas operacionais:
Funcionalidade que possibilita a execução de múltiplos sistemas operacionais simultaneamente, tanto para desenvolvimento quanto para testes.·
Desenvolvimento do kernel:
Consiste na possibilidade de realizar modificações no kernel do sistema operacional numa máquina virtual, sem que haja necessidade de existir uma máquina separada para testes.·
Computação em Cluster:
Consiste na gerência da granularidade de uma máquina virtual, o que proporciona maior flexibilidade do que gerenciar hosts físicos de forma separada.
Além disso, possibilita melhor controle e isolamento se comparada a soluções de imagem de um único sistema, pois utiliza- se da live migration1 para realizar o balanceamento de carga.·
Suporte de hardware para sistemas operacionais customizados:
Característica que con-siste na possibilidade de desenvolver novos sistemas operacionais, utilizando- se do suporte ao hardware variado de sistemas operacionais como o Linux.
Através dessas descrições, foi possível verificar as principais características apresentadas por ambientes virtualizados assim como suas aplicações.
Além disso, é possível reconhecer os benefícios que ambientes como este proporcionam, instigando o interesse de empresas de grande porte.
Valendo- se da complexidade, da administração minuciosa e dos riscos que tecnologias de virtualização inferem a ambientes computacionais, é que identifica- se a necessidade de buscar a padronização a nível gerencial de uma arquitetura que provê monitoração e controle do ambiente.
Característica que permite a migração de máquinas virtuais entre hosts físicos sem que haja necessidade de parar a execução das mesmas.
Técnicas gerenciais eficientes são sempre bem-vindas quando há necessidade de manter o controle e a organização de um ambiente, especialmente quando este apresenta inúmeros componentes interligados e que exercem funções essenciais ao funcionamento satisfatório do ambiente como um todo.
Por este motivo, o presente capítulo apresenta na Seção 3.1 uma visão geral sobre gerência, a gerência direcionada para ambientes virtualizados na Seção 3.2, na Seção 3.3 as áreas funcionais de gerência, principal influência para o presente trabalho e, por fim, na Seção 3.3.5 as considerações do presente capítulo.
Percebe- se atualmente nas organizações em geral, a necessidade de melhorar a qualidade de seus serviços e com isso ampliar suas capacidades e conquistar novos espaços.
A busca por o aperfeiçoamento de suas atividades e por a continuidade da qualidade nos serviços oferecidos, faz com que estas organizações desenvolvam capacidades de controle, monitoração e organização de todo o cenário em que se encontram, dando origem à chamada gerência.
A gerência de um modo geral trabalha ao lado de uma forte aliada, a informação.
A necessidade de ter as informações sobre cenário a sofrer a gerência é de fundamental importância, pois permite que se tenha uma visão global de tudo que se passa no ambiente e de tudo que faz parte de ele.
Muito mais do que possuir as informações é preciso saber manipular- las e utilizar- las de maneira que as mesmas possam fazer a diferença dentro de o ambiente em que se encontram.
Todas as informações referentes ao universo de o qual fazem parte são importantes para se julgue necessário ou não realizar o controle de determinados setores ou recursos.
Saber utilizar e manipular as informações que se possui torna- se a chave de todo o processo gerencial que se deseja instalar na organização.
Saber o que fazer com o que se apresenta diante de o cenário gerenciável é fator determinante para que o sucesso seja alcançado e, desta forma, o exercício da gerência torne- se o principal aliado de todo o processo organizacional.
Além disso, uma visão geral de tudo que está envolvido no ambiente auxilia na tomada de decisões de forma natural, sem a ocorrência de preocupações no que tange à possibilidade de que uma possível alteração na organização resulte em algum dano para a mesma.
É preciso conhecer todo o ambiente para que as decisões sejam as mais acertadas possíveis.
A o principal responsável por as decisões tomadas designa- se o papel de gerente.
Será ele o encarregado de realizar as mudanças necessárias com o intuito de controlar adversidades existentes dentro de o cenário configurado.
Para tal, explica- se a real importância de se conhecer tudo que possa estar relacionado direta ou indiretamente à organização.
O gerente então responsabiliza- se em atingir metas, como as que seguem:·
Prover maior disponibilidade dos recursos existentes, realizando constante monitoração dos mesmos dentro de o cenário em que se encontram;·
Reduzir os custos operacionais, pois como as tecnologias e ambientes apresentam crescente e acelerada evolução, necessita- se de recursos que possam amenizar este fator;·
Aumentar a flexibilidade de operação e integração, pois com a constante evolução das tecnologias é possível através da gerência realizar a integração dos recursos existentes;·
Aumentar a eficiência, fazendo com esta característica seja atingida no momento em que algumas das metas citadas anteriormente encontrem- se bem definidas dentro de o ambiente.
Transportando os conceitos mencionados anteriormente para a área da informática, pode- se perfeitamente perceber que é possível colocar- los em prática e com isso manter um ambiente organizado e, desta forma, os recursos bem gerenciados.
Para tal, conta- se atualmente com a ajuda de ferramentas que permitem realizar a gerência dos recursos envolvidos no ambiente computacional, disponibilizando- os de acordo com as necessidades apresentadas e fazendo com que o uso dos mesmos permaneça dentro de um padrão aceitável melhorando a organização do ambiente.
Analogamente às diversas áreas da computação, diferentes cenários que utilizam- se da tecnologia de virtualização necessitam de atividades gerenciais eficazes e que proporcionem maior disponibilidade dos serviços oferecidos, bem como do ambiente em geral.
Para isso, é necessário que técnicas de monitoração e controle sejam utilizadas e tentem garantir o sucesso do funcionamento dos sistemas que compõem o ambiente.
Para a realização de atividades de gerência é preciso que o controle e a monitoração sejam atividades bem definidas e aplicadas.
A monitoração diz respeito ao conhecimento que se tem do funcionamento dos recursos e dos serviços, buscando informações referentes à execuções, capacidades, disponibilidade ou mesmo problemas apresentados por eles.
Com tais informações é possível realizar o controle de todas as ações realizadas durante este processo, podendo- se tomar decisões em decorrência de alguns acontecimentos.
Em virtude de a quantidade de recursos a gerenciar em ambientes virtualizados, cada vez mais são desenvolvidos estudos e ferramentas para trabalhar com atividades desta natureza.
Alguns de eles tratam recursos em específico, como por exemplo gerência de memória, e outros trabalham para ter uma visão global do ambiente, como algumas ferramentas que serão apresentadas no Capítulo 4.
Mas o fato é que todos eles, por motivos específicos, identificam a importância de gerenciar ambientes que utilizam- se dos benefícios que as tecnologias de virtualização proporcionam.
Quando o objetivo da gerência é ter uma visão global do ambiente, considerando aspectos físicos e virtuais do mesmo, é necessário que a ferramenta utilizada preocupe- se minuciosamente com cada componente do cenário computacional.
É preciso que informações de uso dos recursos sejam mantidas, que acontecimentos no ambiente sejam salvos num arquivo de histórico (log) e que sejam utilizados para gerar eventos.
Tais eventos podem ser utilizados para informar aos responsáveis por o funcionamento do ambiente sobre a ocorrência de tudo que está relacionado a ele.
Para isso, a gerência está presente em diferentes níveis de abstração do ambiente computacional.
Ou seja, vai desde o protocolo utilizado para acessar os recursos até o nível de decisão a ser tomada em função de a monitoração realizada.
Sendo assim, num nível mais baixo encontram- se os padrões (como exemplo pode- se observar o SNMP (do inglês, Simple Network Management Protocol) e o WBEM (do inglês, Web--Based Enterprise Management), além de outros) que provêem meios de buscar diretamente nos recursos as informações solicitadas por níveis acima na organização, realizando uma gerência de mais baixo nível quando solicitadas ações em função de o que foi observado.
Em um nível intermediário encontra- se o mecanismo que faz o pedido de monitoração e controle da camada acima para o padrão de gerência utilizado, e que processa as informações por ele recebidas.
As informações processadas são enfim enviadas para a camada acima, que toma as decisões necessárias em função de o que foi monitorado.
Em um sistema de gerência simples, podem ser percebidos os papéis e níveis aqui mencionados, mas vale ressaltar que essa organização pode ser percebida de diferentes formas dependendo do ponto de vista de quem está trabalhando no contexto da gerência.
Ferramentas utilizadas para gerenciar ambientes virtualizados apresentam em sua estrutura a combinação de todos os níveis mencionados anteriormente, pois todos eles são necessários quando o serviço de gerência vai além de a coleta de informações do ambiente, ou seja, quando num nível mais alto, há interesse por a tomada de decisões e medidas quando identificado algum comportamento inesperado ou indesejado do ambiente.
Tais ferramentas procuram atender ambientes virtualizados específicos, limitando ou a tecnologia de virtualização utilizada ou mesmo algum outro aspecto do cenário computacional.
Mas o fato é que a grande maioria não busca a padronização dos serviços que provêem, justamente por não existir nada especificamente para esse contexto tecnológico.
Sendo assim, se faz necessário buscar em áreas da computação aspectos gerenciais para guiar as atividades a serem realizadas, permitindo que serviços e atividades sejam utilizados em diferentes contextos cuja virtualização esteja presente.
Embora existam esses padrões é pre-ciso estudar- los e adaptar- los para a realidade em a qual serão inseridos, estruturando as atividades gerenciais em ambientes virtualizados.
Com o intuito de padronizar o modo de interconexão de rede de diversos fabricantes de computadores é que a Iso (International Organization for Standardization) definiu um modelo de arquitetura para sistemas abertos, o Modelo de Referência OSI, visando permitir a comunicação entre máquinas heterogêneas e definir diretivas que possibilitem a construção de redes de computadores independente da tecnologia utilizada para a implementação.
Diante de isso, o modelo OSI define uma arquitetura de sete camadas para prover interconectividade entre diferentes máquinas de um sistema computacional.
Seguindo esta estrutura, com exceção da camada de mais alto nível, cada camada utiliza- se dos serviços prestados por o nível imediatamente inferior, prestando serviço para o nível imediatamente superior.
Desta forma, o Modelo de Referência OSI tem como objetivo maior prover uma base comum que permita o desenvolvimento de padrões para a interconexão de sistemas computacionais, adotando padrões para a troca de informações.
Para tanto, o modelo OSI necessita manter informações dos recursos envolvidos no ambiente computacional gerenciadas, bem como ter claro como gerenciar- los.
Sendo assim, são definidos alguns modelos gerenciais, são eles:·
Modelo Informacional:
Define os objetos de gerência, as relações e as operações sobre esses objetos.·
Modelo Funcional: Descreve funcionalidades de gerência através de cinco áreas, sendo elas gerência de falhas, gerência de configuração, gerência de contabilidade, gerência de desempenho e gerência de segurança, também conhecidas como FCAPS.
Estas áreas apresentam recomendações que auxiliam no processo de entender o que &quot;deve ser gerenciado sem discutir detalhes de «como «essa gerência será implementada.·
Modelo Organizacional: Estabelece uma hierarquia entre os sistemas de gerência num domínio, dividindo o ambiente a ser gerenciado em diversos domínios.
Embora sejam definidos os três modelos mencionados anteriormente, para o presente trabalho a descrição de apenas um de eles torna- se indispensável, do Modelo Funcional, que é responsável por a definição das áreas funcionais de gerência dentro de o ambiente computacional.
Embora sejam cinco as áreas funcionais, optou- se por trabalhar com quatro de elas, que são gerência de falhas, de configuração, de contabilidade e de desempenho.
O fato de não ser trabalhada a gerência de segurança está associado à complexidade inferida por esta área, podendo ser estudada num trabalho a parte.
A descrição destas áreas funcionais está adaptada ao cenário em que o presente trabalho se encontra, ou seja, as recomendações encontram- se adequadas a ambientes virtualizados e serão descritas nas subseções que seguem.
Para manter as operações de um sistema computacional complexo funcionando de forma satisfatória, alguns cuidados devem ser tomados em relação a o sistema como um todo, assim como com cada componente do mesmo para que trabalhem em ordem.
Quando uma falha ocorre, algumas observações de nível gerencial tornam- se relevantes, como por exemplo:·
Saber identificar exatamente onde a falha ocorreu.·
Avisar ao usuário e/ ou ao gerente de infra-estrutura que um ou mais componentes apresentam problemas, dando a eles (usuário/ gerente de infra-estrutura) a autonomia para decidir qual é o melhor procedimento a ser tomado.·
Se possível, tomar medidas de modo que o ambiente possa continuar seu funcionamento, estando de acordo com especificações prévias do usuário/ gerente de infra-estrutura.·
Reparar ou substituir os componentes falhos para restaurar o ambiente em seu estado inicial.
Para a definição de gerência de falhas é fundamental entender o conceito de falhas.
Falhas devem ser distinguidas de erros, pois uma falha é uma condição anormal que requer atenção na forma de gerência (ou ação) para ser reparada, ao passo que um erro é um evento único.
Falhas normalmente são provenientes de defeitos ou erros excessivos.
Por exemplo, se uma linha de comunicação é fisicamente cortada, nenhum sinal será transmitido.
Certos erros (por exemplo, um único bit errado na linha de comunicação) podem ocorrer ocasionalmente e normalmente não são considerados falhas.
É possível compensar alguns erros através do uso de mecanismos de controle de erros de vários protocolos.
Sendo assim, usuários/ gerentes de infra-estrutura esperam e contam com a resolução dos problemas.
A maioria de eles espera ser notificada tão logo a falha ocorra para que os problemas sejam resolvidos.
Para que este nível de resolução de falhas seja alcançado, é necessário rapidez na detecção e diagnóstico da falha como função da gerência.
Além disso, os usuários/ gerentes de infra-estrutura esperam ser informados do status dos componentes do ambiente, bem como serem notificados através de alertas sobre falhas que venham a ocorrer mantendo logs de execução e estatísticas para que sirvam de auxílio na análise do funcionamento do ambiente como um todo.
Ambientes computacionais são compostos de componentes individuais e subsistemas lógicos que podem ser configurados para trabalhar com diferentes aplicações.
No caso de ambientes virtualizados, uma máquina virtual pode ser configurada para trabalhar como um servidor de banco de dados web ou como um servidor de arquivos, por exemplo.
A gerência de configuração apresenta informações referentes à manutenção, adição e atualização das relações entre os componentes e o status destes componentes durante a execução de uma aplicação.
Em ambientes virtualizados, leva- se em consideração também informações das aplicações que executam nas máquinas virtuais que compõem o ambiente.
Além disso, a gerência de configuração caracteriza- se por manter informações relacionadas à ligação existente entre os componentes do ambiente, sejam eles físicos ou lógicos.
Desta forma, qualquer atualização nas relações existentes entre estes componentes serão do conhecimento do usuário e/ ou do gerente de infra-estrutura.
Estas informações podem ser disponibilizadas na forma de mapas de configuração, ou mesmo de relatórios gerados através de uma rotina básica ou em resposta a um pedido deste relatório.
A gerência de contabilidade, em sua essência, consiste no conhecimento do uso real dos recursos do ambiente computacional para que possam ser estimados valores a serem cobrados por os serviços e infra-estrutura fornecidos aos usuários.
No entanto, em alguns casos, onde serviços e infra-estrutura são oferecidos, não há necessidade de cobrar por o seu uso, pois podem ser parte de uma organização onde os serviços a beneficiam.
Em este caso então, a gerência de contabilidade acaba auxiliando no conhecimento da utilização dos recursos para que os usuários e ainda os gerentes de infra-estrutura saibam da real utilização dos componentes que fazem parte do ambiente.
Sendo assim, é importante que os usuários e gerentes de infra-estrutura saibam especificar os tipos de informações de contabilidade a serem guardados, o intervalo desejado para o envio de informações a serem gravadas, e caso seja necessário, os algoritmos a serem usados no cálculo da cobrança.
Ambientes virtualizados são compostos de diversos componentes, os quais devem se intercomunicar e compartilhar dados e recursos.
Em alguns casos, é muito difícil que uma aplicação esteja dentro de certos limites de desempenho esperados.
Sendo assim, a gerência de desempenho concilia duas grandes categorias funcionais -- monitoração e controle.
Monitoração é a função que rastreia as atividades realizadas no ambiente.
A função de controle proporciona à gerência de desempenho a capacidade de realizar ajustes, com o objetivo de melhorar o desempenho da infra-estrutura lógica e física.
Alguns tópicos de desempenho importantes para o conhecimento do usuário e do gerente de infra-estrutura são:·
Identificar qual é o nível da capacidade de utilização dos recursos.·
Verificar se há sobrecarga de utilização dos componentes do ambiente.·
Verificar se as configurações do ambiente estão refletindo em o que era esperado por o usuário e o gerente de infra-estrutura.
Gerentes de infra-estrutura e usuários necessitam de estatísticas de desempenho que os ajudem a planejar, gerenciar e manter o ambiente virtualizado.
Estatísticas de desempenho podem ser usadas para reconhecer os gargalos potenciais antes mesmo de causarem problemas aos usuários.
Ações de correções apropriadas podem então ser tomadas.
É com base nas recomendações das áreas funcionais de gerência descritas neste capítulo que a arquitetura proposta está calcada.
Além de a arquitetura, os serviços também sustentam tais recomendações adaptando- as para o cenário de virtualização.
Isso se deve à flexibilidade fornecida por as áreas funcionais de gerência, o que permite que sejam utilizadas em diferentes ambientes computacionais.
Em este capítulo apresenta- se um estudo sobre as ferramentas existentes para gerenciar ambientes virtualizados.
Tais ferramentas estão relacionadas a arquitetura proposta por apresentarem o mesmo objetivo, que é o de gerenciar ambientes que utilizam tecnologias de virtualização.
A o final deste capítulo serão apresentadas considerações acerca de as ferramentas estudadas.
O IBM Director consiste num conjunto de ferramentas integradas que permitem realizar a gerência de ambientes físicos e virtuais.
Cada uma das ferramentas integradas ao IBM Director é também identificada como uma extensão desta ferramenta, como é o caso do IBM Virtualization Manager, responsável por a monitoração e controle das atividades realizadas em ambientes virtuais e que, por este motivo, está fortemente relacionada ao trabalho proposto.
A proposta do IBM Director é gerenciar um ambiente que possua um grande número de servidores, computadores desktop, workstations, notebooks, além de diferentes dispositivos ligados ao ambiente.
Para gerenciar o ambiente que possui suporte à virtualização, o módulo IBM Virtualization Manager realiza atividades de monitoração e controle, permitindo desta forma a visualização do estado dos recursos, bem como o relacionamento entre os recursos físicos e virtuais.
De entre as funcionalidades disponíveis, o IBM Virtualization Manager permite criar, modificar e migrar servidores virtuais.
Além disso, permite trabalhar com ambientes virtuais que são gerenciados por o IBM Hardware Management Console (HMC), Microsoft Virtual Server, VMWare e Xen.
Para que as atividades de gerência sejam realizadas, são oferecidos ao usuário alguns serviços, de entre eles pode- se identificar o mapa de configurações, que permite a visualização da relação existente entre os recursos físicos e virtuais, proporcionando o melhor entendimento do ambiente.
É possível ainda, identificar no mapa de configurações pontos do ambiente que apresentam problemas, pois sempre que um componente apresentar uma falha, esta ficará visível através de uma marcação na visualização.
Além de o mapa de configurações, há a possibilidade de identificar situações de alarme, onde há a ocorrência de falhas.
Para isso, há um conjunto de opções disponíveis ao usuário para que ele possa escolher as situações de falha de as quais deseja ser notificado.
Além de a escolha por opções que melhor atendem sua necessidade, o usuário/ gerente de infra-estrutura pode decidir a melhor maneira de receber estas notificações, se por e-mail, celular ou ainda notificação em tela.
BixData é uma ferramenta que proporciona à ambientes de servidores e clusters a realização de atividades de gerência e monitoração, além de possibilitar a geração de relatórios a partir de a gerência e monitoração realizadas.
BixData foi projetada especificamente para trabalhar em ambientes que apresentam diferentes sistemas operacionais, pois consegue gerenciar clusters que possuem de duas a milhares de máquinas executando qualquer combinação dos sistemas operacionais Linux e Windows.
De entre os serviços oferecidos por a ferramenta BixData, pode- se identificar:·
Monitoração de aplicações.·
Monitoração de desempenho.·
Monitoração de rede.·
Monitoração de hardware.·
Armazenamento operacional de dados e geração de relatórios.·
Gerência de sistemas.
Além disso, é possível através da BixData gerenciar ambientes virtualizados que trabalham com as tecnologias de virtualização VMware e Xen.
É possível gerenciar as máquinas host (hospedeiras) e as máquinas guest (convidadas) que utilizam estas tecnologias de virtualização.
Para isso, a ferramenta BixData possui três componentes integrados que juntos realizam as atividades de gerência, são eles:·
BixAgent: Pode ser instalado nas máquinas em que há requisições de dados e também de gerência remota.
Possui suporte nativo aos sistemas operacionais Linux e Windows.·
BixServer: Tem a capacidade de monitorar serviços e dispositivos de rede, além de funcionar como um meio de armazenamento operacional de dados.
Permite ainda, monitorar serviços Http, SMTP, POP3, SNMP e outros sem requisição do BixAgent.
O armazenamento operacional de dados suporta vários servidores SQL para armazenamento, tais como MySQL, PostgreSQL, MS SQL Server e ODBC.
Além disso, BixServer pode gerenciar e coletar dados dos BixAgents executando em qualquer plataforma.·
BixDesktop: Permite soluções em tempo-real para manipulação de dados.
Pode executar em plataformas Linux e Windows.
BixData permite ainda que seja monitorado o desempenho das aplicações, e que estas informações sejam acompanhadas em tempo-real através de gráficos que realizam a representação dos dados.
É possível também visualizar os dados de configuração dos componentes da rede através do mapa de configurações, verificando a relação existente entre eles.
Outra característica presente é a possibilidade de armazenar os logs dos acontecimentos no ambiente em que a gerência está sendo realizada.
Observa- se também a possibilidade de gerenciar o ambiente através de atividades de caráter operacional, como por exemplo, iniciar, desligar, pausar e ainda desligar remotamente guests VMware e Xen.
BixData apresenta- se em duas versões, a primeira de elas free, com algumas restrições de uso e a segunda uma versão paga com todas as funcionalidades mencionadas sem restrições de utilização.
Enomalism, assim como as demais, é uma ferramenta de gerência de ambientes virtualizados que foca na realização de atividades de cunho operacional, ou seja, atividades que estejam diretamente relacionadas ao funcionamento do ambiente.
Atividades que envolvem a monitoração do ambiente não fazem parte das atividades principais da ferramenta.
Com isso, Enomalism permite criar, iniciar, pausar, reiniciar e destruir máquinas virtuais, além de permitir criar, editar e desfazer conexões de rede.
Enomalism também permite atualizar pacotes de aplicações de software em várias máquinas virtuais através de um processo chamado VMCasting1.
Além disso, Enomalism permite migrar máquinas virtuais, configurar quem pode gerenciar e usar domínios específicos, de entre outras funcionalidades.
Em este sentido, a monitoração concentra- se no conhecimento do status dos recursos que fazem parte do ambiente.
É através do status dos recursos que se tem o conhecimento de quais de eles apresentaram falhas ou que seu funcionamento permanece em bom estado.
Outra característica presente nesta ferramenta está relacionada às aplicações que executam no ambiente computacional, pois estas são monitoradas em relação a seu status também, tornando- se possível ter o conhecimento do estado em que se encontram, se em funcionamento ou não.
A ferramenta Enomalism não monitora o ambiente através do uso de alarmes sempre que um evento diferente do que foi proposto ocorrer, somente através do status é possível identificar quando uma aplicação apresentou problema ou algo não esperado ocorreu.
Processo que permite atualização de pacotes para que sejam distribuídos via RSS feed para as máquinas virtuais.
Desta forma, a arquitetura da ferramenta Enomalism trabalha principalmente questões relacionadas ao funcionamento do ambiente e de que forma algumas configurações podem ser realizadas em função de observações a cerca de o ambiente.
XenServer Express Edition é uma ferramenta free que compõe o conjunto de ferramentas da família XenServer, agora pertencente à empresa Citrix.
Esta ferramenta é utilizada para realizar a gerência de ambientes virtualizados que utilizam- se da tecnologia Xen em ambientes de servidores ou que utilizam cluster computing.
A gerência proporcionada por a XenServer Express Edition está diretamente ligada a questões de monitoração e controle do ambiente virtualizado.
As funções proporcionadas por a XenServer Express Edition são:
Criação, inicialização, parada, reinicialização, resumo, migração e destruição de máquinas virtuais, além de permitir reinicializar e desligar servidores físicos.
Além disso, existem administradores de monitoração de desempenho, o que possibilita o acesso em tempo-real de informações de desempenho das máquinas virtuais e métricas de desempenho para processador, memória, disco e I/ O da rede.
XenServer Express Edition permite ainda configurar prioridades e limites para uso de processador, memória, disco e I/ O de rede.
Sendo assim, é possível acompanhar o uso dos recursos do ambiente no momento em que aplicações estão sendo executadas.
Pode- se então inferir que a gerência proporcionada por a ferramenta XenServer Express Edition permite a monitoração dos recursos físicos e virtuais, embora não possua mecanismos de alarmes para que o usuário e o gerente de infra-estrutura sejam notificados de eventuais problemas.
A gerência desta ferramenta encontra- se no campo de controle do funcionamento do ambiente e no cuidado com a infra-estrutura existente para execução das aplicações que fazem parte do cenário computacional.
Cassatt é um produto de software que possui quatro edições diferentes para realizar atividades em ambientes de servidores e cluster computing.
Em uma destas edições há a possibilidade de gerenciar ambientes virtualizados que fazem uso das tecnologias Xen e VMWare.
Seu sistema de gerência pode ser percebido através de ações de gerência de falhas, a partir de a monitoração de acontecimentos nos ambientes físicos e virtuais.
Em casos de falha de algum recurso, são adotadas ações que permitem o funcionamento do sistema, realizando as substituições necessárias dos recursos que apresentaram este comportamento.
Não é utilizada a política de alarme, mas todas as ações tomadas são previamente definidas por o usuário, tendo a participação do mesmo na escolha por o melhor caminho a ser seguido no momento em que uma falha ocorrer.
O controle de uso dos recursos e a verificação do modo como estão sendo utilizados não faz parte das atribuições de gerência desta ferramenta.
Seu foco encontra- se justamente no funcionamento do ambiente e em manter- lo desta forma.
Antes de iniciar as considerações sobre as ferramentas estudadas, é importante salientar que a escolha por desenvolver uma arquitetura de gerência e não uma ferramenta, está relacionada ao fato de que o objetivo do trabalho é prover um padrão de atividades gerenciais, de forma que estas estejam apoiadas em recomendações já aplicadas em outras áreas da computação.
Com isso, é possível que esta arquitetura padrão tenha flexibilidade para ser utilizada em diferentes ambientes, cuja ferramenta principal sejam as tecnologias de virtualização.
Levando em consideração o estudo sobre as características e funcionalidades das ferramentas estudadas, pôde- se identificar algumas limitações nas mesmas.
Iniciando por a ferramenta da IBM, embora busque também nas FCAPS a padronização necessária para trabalhar com atividades de gerência e, além disso, ofereça serviços relevantes que proporcionam o controle do ambiente, é uma ferramenta que não apresenta fácil adaptação aos diferentes cenários que utilizam virtualização.
Caracteriza- se como uma ferramenta para o meio corporativo, não oferecendo muitas condições para que o meio acadêmico possa utilizar- la em diferentes contextos.
Outra ferramenta estudada é a BixData, cujas limitações identificadas são a falta de padronização para os serviços de gerência oferecidos, e ainda limitações referentes à adaptação de seus serviços a outros cenários de virtualização.
Além disso, esta ferramenta restringe as tecnologias de virtualização a serem utilizadas, possuindo uma interface compatível apenas com o VMware e o Xen.
A terceira ferramenta estudada foi a Enomalism, que se direciona para uma gerência mais operacional, ou seja, trabalha questões relacionadas ao funcionamento do ambiente e em como sua estrutura será montada, não havendo preocupações com o tratamento e o retorno de informações aos usuários e gerentes de infra-estrutura.
Por este motivo, não apresenta as mesmas preocupações que a arquitetura proposta.
Outra ferramenta é a Citrix XenServer Express Edition, que além de atividades operacionais como a Enomalism, possui funcionalidades relativas a monitoração do ambiente, como verificar a taxa de uso de CPU, memória livre e informações dos demais recursos através de gráficos fornecidos em tempo de execução das aplicações.
Embora apresente tais características, está limitada ao uso com a tecnologia de virtualização Xen.
Por fim, a quinta ferramenta estudada foi a Cassatt, cujo ponto fraco é caracterizado por a ausência de funcionalidades de notificação ao usuário, ou mesmo ao gerente de infra-estrutura a respeito de algum evento inesperado.
Desta forma, não há possibilidade de, através de alarmes, informar aos responsáveis por o funcionamento do sistema problemas ou mesmo comportamentos inesperados.
Além disso, não utiliza- se de padrões para prover seus serviços.
Em a Tabela 1, constam as principais características/ funcionalidades identificadas como necessárias a uma ferramenta que realiza gerência de ambientes virtualizados.
Estas características/ funcionalidades são verificadas quanto a a sua presença/ ausência nas ferramentas estudadas.
Cabe ressaltar que os traços indicam a ausência da característica/ funcionalidade em questão, e o sinal «a presença.
Sendo assim, é possível verificar que embora existam ferramentas que se proponham a gerenciar ambientes virtualizados, nenhuma de elas atende a todos os requisitos identificados como necessários à uma arquitetura com essa finalidade.
Tais requisitos serão descritos no Capítulo 5, e servirão como base para que a arquitetura estruture- se de forma simples e modular, uma vez que para cada área funcional de gerência, será pensada a estrutura que poderá melhor flexibilizar a adição de novos serviços.
A crescente utilização de tecnologias de virtualização, tanto em ambientes acadêmicos, quanto em ambientes corporativos pode ser explicada por os benefícios que tais tecnologias oferecem à ambientes que a utilizam.
No entanto, tais benefícios trazem com si um grau de complexidade maior se comparado a ambientes computacionais convencionais, o que exige atividades gerenciais bem definidas.
A necessidade de gerenciar ambientes virtualizados é bastante significativa, e embora existam ferramentas que trabalhem questões gerenciais para ambientes como estes, não há um padrão que norteie as atividades gerenciais necessárias ao bom funcionamento do mesmo.
Desta forma, o presente trabalho tenta solucionar essas questões através da concepção de uma arquitetura de gerência de ambientes virtualizados, baseando- se nas recomendações das áreas funcionais de gerência, com o intuito de nortear e dar base à estrutura de controle e monitoração criada.
O presente capítulo está estruturado da seguinte forma:
A Seção 5.1 apresenta a descrição da arquitetura de gerência proposta, detalhando cada componente da mesma.
E, por fim, a Seção 5.2 os serviços que estão atrelados à arquitetura, juntamente com seus algoritmos representados através de diagramas de atividades.
A arquitetura apresenta uma estrutura modular, ou seja, possui módulos diferentes pensados para acomodar cada uma das áreas funcionais de gerência e atender à suas recomendações, como pode ser observado na Figura 3.
Vale lembrar que os módulos que refletem os conceitos das FCAPS apresentam uma estrutura maior que leva o nome da área funcional correspondente.
Os demais módulos responsabilizam- se por a comunicação com as partes envolvidas na arquitetura, além de poder realizar processamentos, como é o caso do Refinamento de Dados, e que será explicado a seguir.
A busca por conceitos de outras áreas para dar base à arquitetura proposta, está fortemente ligada ao fato de que através da modularidade proporcionada é possível que sejam identificados serviços a serem oferecidos em cada um dos módulos, inferindo maior facilidade quando um novo serviço deve ser acrescentado à arquitetura.
Para o maior entendimento da Figura 3, serão descritos a seguir cada um dos módulos e papéis que compõe a arquitetura.
Sendo assim, são eles:·
Usuário: Este papel é destinado à pessoa ou mesmo ao sistema que deseja utilizar o ambiente, mas cuja infra-estrutura virtual lhe é transparente.
Ou seja, é possível realizar a configuração do ambiente e das aplicações, decidindo a quantidade de máquinas a serem utilizadas e ainda, questões relacionadas à configuração das aplicações sem que o ambiente virtualizado fique visível ao usuário.
Este papel tem acesso aos demais módulos através da comunicação com o módulo Virtual da estrutura Gerenciador do Ambiente.
Através desse módulo são solicitadas as informações necessárias ao usuário.
Cabe ressaltar que embora o usuário tenha acesso ao módulo virtual, esta estrutura lhe é transparente, ou seja, mesmo acessando o módulo o usuário tem a impressão de estar configurando um ambiente físico convencional.·
Gerente de Infra-- estrutura:
Este papel destina- se ao responsável por a gerência do ambiente como um todo, tanto do físico quanto do virtual.
O gerente de infra-estrutura tem o conhecimento de tudo que está relacionado aos dois ambientes, tendo autonomia para realizar as modificações necessárias tanto no ambiente físico quanto no virtual.
Este papel tem acesso aos módulos Virtual e Físico da estrutura Gerenciador do Ambiente.·
Gerenciador do Ambiente: Esta estrutura é responsável por realizar a comunicação do usuário e do gerente de infra-estrutura com os demais módulos da arquitetura.
Além disso, possui um módulo responsável por realizar o tratamento dos dados monitorados durante e ao término da execução das aplicações.
Sua estrutura é composta por os módulos Virtual, Físico e Refinamento de Dados, e serão descritas como segue:
Virtual: Este módulo fica responsável por realizar a comunicação do usuário e do gerente de infra-estrutura com os demais módulos da arquitetura, módulos estes que realizam o controle e a monitoração de questões relacionadas apenas ao ambiente virtual.
Pode- se mencionar, de entre outros exemplos, a criação do ambiente virtual com a especificação das aplicações que farão parte de ele.
Físico: Este módulo é responsável por realizar a comunicação apenas do gerente de infra-estrutura com os demais módulos da arquitetura, módulos estes que realizam o controle e a monitoração do comportamento do ambiente físico.
Pode- se mencionar, de entre outros exemplos, algum problema apresentado por alguma das máquinas físicas do parque computacional.
Refinamento de Dados:
Este módulo é responsável por o tratamento dos dados obtidos através da gerência dos ambientes físico e virtual.
Este tratamento inclui a notificação de situações adversas através de alarmes, a construção de gráficos a partir de dados coletados para verificação de uso dos recursos e ainda, para avaliação do desempenho dos mesmos.
É possível ainda, construir o mapa de configurações do ambiente, apresentando a relação existente entre os ambientes físico e virtual, além de a ligação dos componentes de cada um destes ambientes.
As informações são recebidas por os módulos responsáveis por as atividades de gerência.
Além de estas atividades, este módulo realiza a comunicação com o Repositório da arquitetura, gravando os dados coletados durante o processo de gerência, assim como os refinamentos realizados.·
Gerência de Falhas: Antes de mais nada, vale destacar que falha no contexto em que a arquitetura se encontra corresponde ao &quot;desrespeito «à alguma configuração previamente realizada por o usuário ou gerente de infra-estrutura, ou ainda, quando os mesmos solicitam a notificação de determinado comportamento, ou, por fim, quando um serviço e/ ou componente tem seu funcionamento interrompido de modo inesperado.
Esta estrutura é responsável por a monitoração dos ambientes físico e virtual, e está dividida em dois módulos:
Máquinas Virtuais:
Este módulo monitora informações referentes às máquinas virtuais durante a execução das aplicações, verificando possíveis alterações em seu status.
Sempre que houver modificações nestas configurações, é gerada uma notificação e enviada ao módulo Refinamento de Dados para que o usuário e o gerente de infra-estrutura sejam informados através de alarmes.
Aplicação: Em este módulo as informações monitoradas estão diretamente relacionadas às aplicações que estão sendo executadas nas máquinas virtuais.
É verificado o funcionamento das aplicações, além de informar ao usuário e ao gerente de infra-estrutura, através do módulo Refinamento de Dados, situações em que estas aplicações apresentaram problemas. Como
exemplo pode- se verificar a execução interrompida das aplicações sem que essa ação tenha sido previamente configurada.·
Gerência de Configuração: Esta estrutura é composta por os módulos Ambiente e Expe-rimento, que são responsáveis por a configuração do ambiente virtual e das aplicações.
Outra atribuição desta estrutura é realizar a monitoração referente a os ambientes físico e virtual, e às aplicações através dos módulos que a compõe.
Em este caso, a monitoração está relacionada ao funcionamento do ambiente, quando recursos físicos e/ ou virtuais apresentam problemas ou ainda quando o usuário/ gerente de infra-estrutura deseja ser notificado de algo em específico, por exemplo.
Para isso, são utilizados alarmes.
Este módulo pode também realizar a monitoração do uso dos recursos e gerar alarmes quando estes tiverem sua capacidade total de processamento excedida ou subutilizada (CPU e memória são exemplos de recursos).
Embora exista a possibilidade de monitorar através do uso de logs, isso só é possível quando alarmes também são solicitados, utilizando as informações dos logs para tal, caso contrário os logs ficam à cargo da estrutura Gerência de Contabilidade.
Vale ressaltar que esta estrutura apresenta um repositório local, que corresponde ao espaço do disco rígido reservado a cada máquina virtual.
Este repositório é responsável por o armazenamento de todas as informações referentes ao comportamento do ambiente físico e virtual no decorrer de a execução das aplicações.
A o final, todas estas informações são encaminhadas ao repositório geral através da comunicação com o módulo Refinamento de Dados.
Assim são gravados os logs de execução das aplicações, bem como o comportamento geral do ambiente durante este processo.
A presente estrutura possui os seguintes módulos:
Ambiente: Módulo responsável por a configuração do ambiente virtual, além de monitorar- lo, enviando ao módulo Refinamento de Dados, através de alarmes, as informações referentes às configurações que não apresentaram o comportamento esperado.
Experimento: Módulo responsável por a configuração das aplicações que estão sendo executadas no ambiente virtual.
Este módulo não realiza monitoração das aplicações que estão sendo executadas no ambiente, isso porque a estrutura Gerência de Falhas através do módulo Aplicações já o faz.·
Gerência de Contabilidade: Estrutura que realiza a contabilização do uso dos recursos físicos e virtuais através dos módulos Recursos Virtuais e Recursos Físicos.
Esta estrutura também possui um repositório local, que corresponde ao espaço do disco rígido reservado a cada máquina virtual.
Este repositório armazena todas as informações referentes ao uso dos recursos no decorrer de a execução de uma aplicação.
A o final deste processo, as informações monitoradas são enviadas ao módulo Refinamento de Dados.
A presente estrutura é composta por:
Recursos Virtuais:
Este módulo também realiza a monitoração do uso dos recursos virtuais.
A diferença entre este e o módulo Ambiente é que neste módulo não são gerados alarmes quando um recurso excede ou subutiliza sua capacidade total.
Fica a seu critério apenas o armazenamento dos logs de uso dos recursos.
Para tal, as informações monito radas e que são relativas ao uso dos recursos virtuais são armazenadas em seu repositório local.
Recursos Físicos: Este módulo também realiza a monitoração do uso dos recursos físicos.
A diferença entre este e o módulo Ambiente é que neste módulo não são gerados alarmes quando um recurso apresenta determinado comportamento.
Sendo assim, este módulo realiza o armazenamento das informações monitoradas, e que são referentes ao uso dos recursos físicos durante a execução das aplicações, em seu repositório local.·
Gerência de Desempenho: Esta estrutura é composta por os módulos Recursos Virtuais e Recursos Físicos.
Além disso, tem por finalidade coletar dados referentes ao uso dos recursos físicos e virtuais no decorrer de a execução das aplicações.
Estes dados ficam armazenados no repositório local da estrutura Gerência de Contabilidade, e embora sejam os mesmos coletados na estrutura Gerência de Contabilidade, são utilizados com outro propósito, neste caso para analisar o desempenho dos recursos no decorrer de a execução das aplicações.
Estas informações são encaminhadas até o módulo Refinamento de Dados, e serão devolvidas ao usuário e ao gerente de infra-estrutura na forma de gráficos.·
Interface de Comunicação: A interface de comunicação é responsável por realizar a comunicação entre os módulos da arquitetura e o protocolo de gerência utilizado.
Este protocolo executará as configurações solicitadas e buscará as informações necessárias às atividades de monitoração.
Essa interface poderá se comunicar com diferentes protocolos utilizados para gerenciar ambientes físicos e virtuais, como por exemplo, SNMP, WBEM, protocolos proprietários, de entre outros.
Estes protocolos são representados na Figura 3 por o módulo Serviços de Gerenciamento em Ambientes Virtuais.·
Repositório: Armazena todas as informações referentes aos ambientes físico e virtual para a execução das aplicações.
De entre as informações armazenadas estão:
Os dados &quot;crus «coletados durante os processos de monitoração, todos os tratamentos realizados nos dados no módulo Refinamento de Dados, as configurações dos ambientes, dos recursos e dos alarmes, além de os relatórios e logs do ambiente.
Para o maior entendimento, a Figura 4 ilustra o ambiente em que a arquitetura de gerência pode ser utilizada.
Como pode ser observado, a arquitetura encontra- se alocada num ambiente Virtuais -- comunica- se inicialmente com o usuário (que solicita as configurações e monitorações a serem realizadas) e, em seguida, com o protocolo de gerência (que, por sua vez, acessa os recursos e obtém as informações solicitadas por a arquitetura).
O protocolo de gerência por acessar diretamente as informações que são extraídas do ambiente, possui diversos componentes alocados em diferentes lugares do mesmo.
Desta forma, as partes de compõem o protocolo de gerência podem ser encontradas no cluster frontend, nas máquinas físicas do cluster e ainda nas máquinas virtuais.
Cada um destes componentes possui uma função dentro de a hierarquia estabelecida por o próprio protocolo.
Seguindo, é possível observar na Figura 4 alguns repositórios locais para cada uma das máquinas virtuais, que correspondem a seus discos locais, e serão utilizados como repositório de armazenamento das informações monitoradas sempre que essa monitoração for offline.
Logo após o término da atividade de monitoração todos os dados armazenados serão encaminhados ao repositório geral da arquitetura que localiza- se no cluster frontend.
Cabe ressaltar que o disco local das máquinas virtuais será utilizado como repositório de configuração, contabilidade e desempenho, fazendo com que as estruturas Gerência de Configuração e Gerência de Contabilidade façam a comunicação com o repositório geral da arquitetura através do módulo Refinamento de Dados.
Tais repositórios são acessados apenas por os módulos pertencentes às estruturas Gerência de Configuração, Gerência de Contabilidade e Gerência de Desempenho.
Em este caso, as informações resultantes das monitorações realizadas serão enviadas ao repositório geral da arquitetura somente no final da execução das aplicações (monitoração offline), o que diminui o tráfego de informações entre as máquinas do cluster, prevenindo desta forma, um possível gargalo.
Além de estrutura de cluster de computadores, é possível que a arquitetura seja utilizada em ambientes servidores como Data Centers, por exemplo.
Em este caso, o monitor é colocado no computador gerenciador e os demais componentes permanecem com o mesmo comportamento, representado através da Figura 4.
Para a concepção da arquitetura foram levados em consideração alguns serviços básicos, os quais permitem realizar maior controle de um ambiente virtualizado.
De entre os serviços propostos em conjunto com a arquitetura, tem- se:
Máquinas virtuais através de seu status.
Este serviço é realizado por o módulo Máquinas Virtuais da arquitetura.
Sua relevância é identificada por o fato de proporcionar o conhecimento de problemas decorrentes da sobrecarga de utilização dos recursos, como por exemplo, memória, processador, vazão do link de rede ou ainda, a parada de funcionamento de uma máquina virtual por motivos não identificados.
Em este caso, tanto o usuário quanto o gerente de infra-estrutura poderão ser notificados através de alarmes e ainda, num segundo momento, através de logs salvos durante o processo de monitoração.
Tais informações podem ser vistas por o usuário e por o gerente de infra-estrutura através de gráficos, de estatísticas, e ainda através de alarmes quando uma aplicação causar algum problema ao ambiente em função de possíveis sobrecargas no uso dos recursos.
Vale lembrar que, embora não tenha sido mencionado na descrição dos serviços, as formas utilizadas para que o usuário e o gerente de infra-estrutura tenham conhecimento de tudo que acontece nos ambientes físico e virtual, o módulo Refinamento de Dados disponibiliza as informações na forma de gráficos, de mapas de configuração, de alarmes, de entre outras.·
Sempre que uma máquina virtual tiver seu funcionamento interrompido, sem que tenha sido previamente configurado.·
Sempre que uma configuração for alterada ao longo de a execução das aplicações, sem que seja solicitado, tanto no ambiente físico quanto no virtual.·
Sempre que o uso dos recursos ultrapassar o limite estipulado.
As formas de recebimento destes alarmes também podem ser escolhidas, de entre elas podese observar:
Notificações em tela, por e-mail e ainda observados nos logs de execução mantidos.
É possível ainda, que o usuário e o gerente de infra-estrutura optem por a continuação ou não da execução das aplicações em função de os alarmes gerados.
Um ponto interessante no que diz respeito aos alarmes é a forma como são trabalhados e disponibilizados ao usuário/ gerente de infra-estrutura, pois podem ser realizadas combinações que representem o tipo de evento gerado e os recursos envolvidos neste processo.
Podem ser utilizados padrões para caracterizar tipos de eventos, por exemplo, a sobrecarga ou subutilização de recursos, ou qualquer outro tipo de comportamento podem estar atrelados à valores que representam classes de eventos.
Juntamente aos tipos de eventos, podem haver constantes para designar os recursos que podem gerar alarmes, como por exemplo CPU, memória, os ambientes físico e virtual como um todo, de entre outros.
Tais constantes podem estar baseadas em padrões que usam potência de 2 (dois) para representar um tipo de evento, por exemplo:
Subutilização de CPU, sobreutilização de CPU (valor 2), subutilização de memória (valor 4), sobreutilização de memória (valor 8), e assim por diante.
De a mesma forma que são previstos eventos para os recursos, pode- se utilizar os alarmes para algo mais amplo, como identificar o estado geral do ambiente, se o uso de recursos está muito alto, se as aplicações estão demorando muito em seus processamentos, além de outros.
Desta forma, a camada que representa a arquitetura de gerência poderá receber múltiplos alarmes da camada inferior e enviar apenas a combinação destes alarmes (realizando a soma das potências) para a camada acima, unindo em apenas um evento todos os alarmes gerados.
Seguindo na estrutura da arquitetura, embora nenhum dos módulos que compõem a estrutura Gerência de Desempenho tenham sido mencionados na descrição dos serviços, é importante ressaltar que sua utilização se faz necessária quando se quer analisar o desempenho dos recursos observados no decorrer de a execução das aplicações.
Através das descrições realizadas a cerca de a arquitetura proposta, pode- se perceber que a utilização das recomendações das áreas funcionais de gerência na concepção desta arquitetura proporcionam além de a modularidade, maior organização dos módulos que a compõe.
Com isso, é possível que novos serviços sejam oferecidos e que sejam facilmente encaixados nos módulos correspondentes na arquitetura proposta.
Com o intuito de tornar válida a arquitetura proposta, cuja idéia é utilizar as recomendações das áreas funcionais de gerência para gerenciar ambientes virtualizados, foram implementados alguns módulos, aqueles cuja relevância mostrou- se maior no ambiente de testes.
Para isso, os módulos foram implementados na linguagem de programação Java, cuja característica de orientação a objetos facilitou a visualização dos módulos que compõem a arquitetura e com isso, auxiliou na generalização dos mesmos, para que a abstração de protocolos de gerência utilizados ficasse melhor evidenciada.
A interface utilizada para realizar as configurações necessárias aos testes foi construída através de arquivos XML (do inglês, Extensible Markup Language), que deram estrutura às informações de as quais a arquitetura se utiliza.
Além disso, nos testes a tecnologia de virtualização utilizada foi Xen e o protocolo de gerência WBEM (descrito na Seção 6.2).
Ainda neste capítulo, é apresentada na Seção 6.3 os detalhes da implementação realizada.
Xen é uma tecnologia de virtualização originalmente desenvolvida por o Grupo de Pesquisa de Sistemas no Laboratório de Computação da Universidade de Cambridge, fazendo parte de um projeto maior conhecido como XenoServers.
Este projeto visa proporcionar um ambiente global para sistemas distribuídos, e o Xen por sua vez, desempenha um papel importante neste contexto no que se refere à utilização eficiente dos recursos computacionais, proporcionando a seus usuários a possibilidade de ter isolamento e proteção dos mesmos através da divisão eficiente da máquina física.
Levando- se em consideração o funcionamento do Xen, é sabido que o hypervisor, também chamado VMM, é invocado antes mesmo que qualquer sistema operacional seja carregado na máquina virtual.
Esse componente se encarrega de gerenciar os recursos utilizados para comunicação, memória e processamento das máquinas virtuais.
Em o Xen, as máquinas virtuais são também chamadas de domínios, ou ainda Dom.
Como o hypervisor não possui comunicação direta com as máquinas virtuais do ambiente, é necessário que um sistema inicial seja invocado por o próprio hypervisor, conhecido como Domínio0 ou simplesmente Dom0.
A distinção entre um sistema instalado de modo convencional e um sistema instalado como Domínio0 não é percebida, exceto o fato de que o kernel do Dom0 deve ser capaz de operar juntamente com o hypervisor.
O Dom0 é responsável por a comunicação com dispositivos de disco, rede, USB, de entre outros.
É de responsabilidade do Dom0 controlar as demais máquinas virtuais do ambiente, também conhecidas como Domínios U (DomU (Unprivileged Domains) -- Domínios sem privilégios).
Além disso, responsabiliza- se por criar, iniciar e interromper os DomU.
As máquinas virtuais sem privilégios podem se comunicar diretamente com o hypervisor, que controla os recursos de memória e processador.
Os demais recursos têm os drivers compartilhados por o Dom0, fazendo com que todos os dispositivos compatíveis com ele sejam utilizados por os DomU, mesmo que apresentem sistemas operacionais diferentes instalados.
É importante ressaltar que a escolha por a tecnologia de virtualização Xen foi feita por o fato desta ser uma tecnologia open source e com uma versão free para que o meio acadêmico possa utilizar- la para fins de pesquisa.
A arquitetura de gerência WBEM foi elaborada por a DMTF (do inglês, Distributed Management Task Force) e padroniza as informações a respeito de os recursos gerenciados bem como do protocolo de monitoração e controle de ambientes distribuídos.
Para representar a informação, a especificação WBEM utiliza o CIM, (do inglês, Common Information Model), para codificar os dados CIM em informações XML e assim realizar o transporte dos dados, usa- se o CIM-XML e, por fim, o através do protocolo Http os dados são enviados.
Além disso, a arquitetura é composta por clientes WBEM, clientes de eventos WBEM, servidor WBEM e ainda provedores WBEM.
Sendo assim, o cliente WBEM pode invocar operações de aplicações que estão sendo gerenciadas.
O cliente de eventos WBEM recebe as informações de gerência através de alarmes.
O servidor WBEM responsabiliza- se por receber as requisições dos clientes WBEM e realizar a interação com os provedores.
E, por fim, os provedores WBEM realizam a interação diretamente com os recursos gerenciados.
Sendo assim, o padrão WBEM foi desenvolvido com o intuito de proporcionar a gerência de ambientes de sistemas distribuídos.
Por este motivo foi escolhida para auxiliar no processo de validação da arquitetura.
O ambiente utilizado para testar a arquitetura de gerência de ambientes virtualizados aqui proposta, foca no desenvolvimento de um framework de emulação automatizada para realizar experimentos com grid computing e sistemas distribuídos, utilizando a combinação de técnicas de paravirtualização e ferramentas de gerência de sistemas.
Este framework é desenvolvido por o grupo de pesquisa de o qual a arquitetura também faz parte, o que facilitou sua utilização para testes com a arquitetura.
O problema de trabalhar com emulação de sistemas está ligado ao fato de que alguns requisitos são necessários para tal, como por exemplo, a existência de uma pilha de software complexa, o controle dos recursos físicos, simulação de algumas estruturas e algumas vezes modificações no sistema operacional que dá suporte ao ambiente de testes.·
Mapeador: Sua função é decidir em quais hosts de um cluster as máquinas virtuais serão hospedadas, analisando questões referentes à disponibilidade dos recursos nos hosts.
Para realizar o mapeamento, o usuário do framework deve, através de arquivos XML, descrever o ambiente real e ainda o ambiente virtual desejado.
De entre os objetivos do algoritmo de mapeamento, dois principais são:
Minimizar o número de hosts utilizados por usuário e também, minimizar o tráfego de dados por a rede do cluster através da organização das máquinas virtuais que se comunicam no mesmo host.·
Deployer: Em o processo de deployment as máquinas virtuais são criadas em cada host do cluster.
Para realizar esta tarefa é utilizado um padrão de gerência (neste caso o protocolo de gerência WBEM) para invocar instruções do virtualizador utilizado (neste contexto, a tecnologia de virtualização Xen).·
Gerenciador de Rede:
Tem como função principal realizar a conexão das máquinas virtuais logo após o momento de suas criações.
Com as conexões estabelecidas é possível inserir o sistema emulado a partir de as características do sistema distribuído desejado.
Após a descrição do ambiente virtual, são criadas sub-redes formadas por as máquinas virtuais situadas em cada host do cluster, interligando estas sub-redes através do ajuste da latência e da vazão das conexões criadas.
Inicia- se então a emulação do sistema distribuído.
O protocolo SNMP é utilizado para executar as funções do módulo Gerenciador de Rede.
Em este contexto identificou- se a necessidade de gerenciar o ambiente virtual com o intuito de monitorar as atividades em ele realizadas e que foram montadas para emulação.
A Figura 10, ilustra o framework com o novo módulo de gerência, como pode ser visto:
Gerenciador de Experimento.
Analisando então o cenário aqui descrito, a proposta da arquitetura para gerenciar ambientes virtualizados tem como objetivo amenizar o impacto causado por a complexidade de trabalhar com emulação, que utiliza técnicas de virtualização, mais ainda por se tratar de emulação de sistemas distribuídos, haja visto as exigências inferidas.
Sendo assim, a Subseção 6.3.2 apresenta a integração da arquitetura proposta com o framework descrito nesta subseção, para finalidade de testes da mesma.
Visando amenizar os problemas que ambientes virtualizados podem enfrentar, em especial sistemas distribuídos que utilizam tecnologias de virtualização como base para executar suas funções, é que a arquitetura de gerência de ambientes virtualizados está integrada ao framework descrito na Subseção 6.3.1.
Após a concepção da arquitetura de gerência de ambientes virtualizados pensou- se nos módulos interessantes para que esta pudesse ser testada, e de certa forma útil para o trabalho que a utiliza.
Desta forma, identificou- se os alarmes como sendo o objeto principal da validação, visto que estes são de grande valia para utilização no framework.
Em este cenário, os módulos da arquitetura implementados foram:·
Refinamento de Dados:
Responsável por receber as informações dos alarmes e repassar- las ao usuário/ gerente de infra-estrutura ou ainda, o sistema que esteja utilizando a arquitetura.·
Ambiente: Responsável por monitorar o uso de recursos por as aplicações executadas no ambiente virtual.
Nota- se que embora o módulo responsável por a contabilização de uso de recursos seja o módulo Recursos Virtuais da estrutura Gerência de Contabilidade, foi implementado no módulo ambiente devido a o fato desta contabilidade ser utilizada juntamente com o logs de monitoração de uso dos recursos.·
Interface de comunicação: Responsável por a comunicação dos módulos da arquitetura com o protocolo de gerência, que por sua vez realiza o acesso aos recursos.
O protocolo utilizado para validar foi o WBEM.
Através dos módulos implementados foi possível desenvolver os alarmes.
Em esse sentido, uma forma bastante interessante de fornecer a funcionalidade de alarmes foi pensada com o intuito de simplificar a quantidade destes alarmes enviados aos usuários da arquitetura.
Sendo assim, os alarmes foram separados por categorias:
Alarmes de sobreutilização (sobrecarga) e alarmes de subutilização (ociosidade).
Seguindo ainda a estrutura pensada, os alarmes foram também separados por recursos:
Em o caso, memória, CPU, disco, ambiente, e assim por diante.
Para cada uma das combinações, por exemplo sobreutilização de memória, subutilização de CPU, foram atribuídos valores, valores estes seguindo a ordem de números potência de 2.
Essas combinações são enviadas ao usuário da arquitetura juntamente com a máquina virtual que apresentou este problema.
É importante salientar que o envio dos alarmes é controlado por o número de máquinas que geram alarme, independente de terem gerado um ou mais, ou seja, sempre que uma máquina virtual gerar mais de um alarme, estes são agrupados e enviados para a camada acima apenas uma vez, deixando o trabalho da interpretação do que foi recebido para o usuário.
Com a implementação dos módulos anteriormente mencionados, foi possível salvar o log de uso dos recursos com o intuito de gerar gráficos que demonstrem esse uso.
Com os gráficos é possível analisar o comportamento do experimento e/ ou aplicação, pois pode- se acompanhar a evolução de uso desses recursos.
Outra possibilidade interessante, está vinculada ao fato de poder desenhar o mapa das configurações realizadas e, com isso, ter conhecimento das máquinas virtuais no ambiente físico.
Cabe ressaltar que para que os alarmes fossem gerados foi necessária a configuração de um arquivo, descrito em XML, para que fossem informados as máquinas virtuais a serem monitoradas, os recursos destas máquinas virtuais a gerenciar, o tempo de monitoração e ainda os limites tanto para sobrecarga quanto para ociosidade de utilização dos recursos do ambiente.
Desta forma, pode- se observar o comportamento da arquitetura enquanto ferramenta para prover os serviços anteriormente mencionados.
A análise deste comportamento será descrita na Subseção 6.3.4.
O teste realizado para reconfigurar dinamicamente o ambiente tem como objetivo demonstrar que os serviços de monitoração, neste caso específico, o de alarme, conseguem detectar a sobreutilização dos recursos por as aplicações que estão sendo executadas no cluster de máquinas virtuais.
Após a identificação do uso excessivo de memória por a aplicação, é enviado um alarme ao remapeador, que realiza um novo mapeamento para que o ambiente não apresente novamente este comportamento.
Com isso, o ambiente físico utilizado para os testes é composto por quatro máquinas físicas (hosts), cada uma com um processador Pentium IV 2.
8 GHz e 2.560 MB de memória RAM.
As máquinas estão conectadas através de um switch Fast Ethernet, e possuem instalado a plataforma de virtualização Xen.
Além disso, cada domínio 0 e as máquinas virtuais possuem instalados o servidor WBEM OpenPegasus e o sistema operacional Debian Gnu/Linux.
O ambiente virtual criado possui 32 máquinas virtuais com 256 MB de memória cada, criadas nos quatro hosts disponíveis.
Em o arquivo de descrição do experimento foi configurado o uso de no mínimo dois hosts, que a quantidade de memória possa ser aumentada ou diminuída e que as máquinas virtuais não podem utilizar mais que 80% da memória disponível para elas.
Para o remapeamento realizado por o emulador são levadas em consideração a disponibilidade dos recursos no cluster e as condições impostas por o usuário, que estão contidas no arquivo de descrição do experimento.
Em este momento, o remapeamento é então realizado.
Para demonstrar o comportamento dos alarmes disparados por o uso em excesso de memória, utilizou- se uma aplicação responsável por alocar 200 MB de memória em cada máquina virtual.
A arquitetura de gerência de ambientes virtualizados aqui apresentada, realizou a monitoração do uso dos recursos durante a execução da aplicação e no momento em que as máquinas virtuais excederam a quantidade de memória que lhes foi reservada.
Cabe salientar a forma que a camada de monitoração aqui proposta trabalha a questão do recebimento dos alarmes, pois recebe múltiplos de eles e, através do mecanismo de tratamento de alarmes envia apenas um à camada remapeadora.
Através da combinação destes alarmes, conforme descrito no Capítulo 5, o remapeador consegue identificar os problemas encontrados e aí sim pode realizar um novo mapeamento para melhorar as condições de uso dos recursos.
Para melhor demonstrar o comportamento das máquinas virtuais durante a execução da aplicação, foram gerados gráficos, como pode ser visto na Figura 11, que apresenta a utilização de memória por máquina virtual.
É possível perceber que os três primeiros minutos foram utilizados por o monitor do ambiente (a arquitetura proposta) para invocar o método que retorna a quantidade de memória utilizada.
Após ter identificado a sobreutilização de memória o módulo remapeador é ativado.
Levando em consideração a disponibilidade dos recursos do cluster e ainda as condições impostas por o usuário, é realizado um novo mapeamento do ambiente.
Em esta nova configuração o número de máquinas virtuais reduziu de 32 para 16 e a memória aumentou de 256 MB para 512 MB, como ilustrado na Figura 12.
Através da Figura 12, é possível perceber o uso de memória estabilizando em 44% decorridos 11 segundos do remapeamento.
Após o novo mapeamento, as máquinas virtuais do ambiente são destruídas e logo em seguida recriadas.
A aplicação que consome memória é então novamente executada.
Concluído o teste de validação da arquitetura, pôde- se perceber que os serviços de alarmes apresentaram bons resultados, pois auxiliaram no processo de descoberta de situações adversas através do envio de notificações à camada mapeadora do framework.
Este, por sua vez, realizou um novo mapeamento em função de o que havia recebido.
O serviço de alarmes apresentou o comportamento esperado, e com isso proporcionou satisfatoriamente ao módulo que o utilizou, um meio de obter informações do ambiente de forma que auxiliem no processo de tomadas de decisão sempre que um comportamento inesperado é detectado.
Este trabalho apresentou uma arquitetura para gerenciar ambientes virtualizados e com isso amenizar os efeitos de problemas encontrados em ambientes deste tipo, como por exemplo, controlar os recursos do ambiente físico para que se mantenham funcionando, garantindo a disponibilidade de serviços que antes estavam distribuídos em diferentes máquinas físicas, além de outros desafios mencionados no Capítulo 2.
Para que a possibilidade de trabalhar na concepção de uma arquitetura de gerência de ambientes virtualizados fosse possível, foi necessário buscar conceitos e padrões que dessem norte à proposta, e que auxiliassem na identificação de alguns dos diversos serviços que podem ser oferecidos para o fim da gerência.
Estes padrões não foram desenvolvidos especificamente para ambientes que utilizam- se dos benefícios das tecnologias de virtualização, mas foram adaptados para tal.
Desta forma, as recomendações das áreas funcionais de gerência, também conhecidas como FCAPS, serviram como guia neste processo de desenvolvimento da idéia da arquitetura descrita no Capítulo 5.
Uma das idéias para a arquitetura foi deixar- la flexível em termos de tecnologias de virtualização e protocolos de gerência utilizados pra acessar as informações dos recursos do ambiente.
Para isso, um módulo que trabalha como uma interface de comunicação entre os módulos da arquitetura e o protocolo foi pensada.
Sendo assim, apenas essa interface deve ser alterada sempre que houver mudança no protocolo utilizado.
Além disso, como a arquitetura proposta não prevê uma comunicação direta com o sistema de virtualização, este também fica desvinculado da arquitetura e com isso não há restrição quanto a a tecnologia utilizada.
É sabido que a generalidade, neste caso da tecnologia de virtualização e protocolo de gerência, pode introduzir algumas limitações na arquitetura, como por exemplo impossibilitar o desenvolvimento de soluções específicas para uma única tecnologia, ou ainda não conseguir atacar um problema bem característico da mesma.
Mas é importante destacar que a flexibilidade proporcionada, por não restringir o uso da arquitetura com qualquer tecnologia de virtualização e protocolos existentes, apresenta vantagens significativas e válidas para a proposta apresentada através deste trabalho.
De entre as vantagens pode- se destacar:·
Os módulos, independente do protocolo, poderão realizar suas funções sem apresentar problemas de compatibilidade com outros protocolos que poderão ser utilizados simultaneamente.·
Maior abrangência com relação a as tecnologias e padrões utilizados.·
A arquitetura apresenta fácil adaptação ao cenário que será utilizada.
Além de as observações mencionadas anteriormente e que auxiliaram na concepção de uma arquitetura flexível, é inegável a modularidade proporcionada por as recomendações das áreas funcionais de gerência seguidas, pois para cada propósito gerencial, seja falhas, configuração, contabilidade ou desempenho, foi possível encaixar suas definições e funções propostas.
É inegável também, a simplicidade que a arquitetura apresenta em função de os módulos que a compõe, pois o modo de disponibilização dos mesmos permite que novos serviços sejam propostos e acrescentados à arquitetura.
Como trabalhos futuros pode- se identificar a possibilidade de integrar à arquitetura uma estrutura responsável por tratar questões de segurança no ambiente, deixando- a completa de acordo com cinco áreas funcionais de gerência.
Além disso, o mecanismo de alarmes pode apresentar características adicionais, combinando por exemplo alarmes com diferentes recursos, fornecendo deste modo, fácil adaptação da arquitetura aos diferentes cenários em que pode ser inserida.
Sendo assim, pôde- se perceber que as recomendações das áreas funcionais de gerência foram de grande valia, pois auxiliaram no processo de desenvolvimento de uma arquitetura simples, modular e de fácil adaptação ao cenário em o qual está inserida, visto que na implementação dos módulos escolhidos foi possível identificar tais benefícios.
