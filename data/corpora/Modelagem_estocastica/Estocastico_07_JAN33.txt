O envio de mídia continuamente por redes sem garantia de qualidade de serviço é um dos maiores problemas para a popularização de distribuição de conteúdo via Internet.

Recentemente, muitos trabalhos foram publicados na literatura visando amenizar os efeitos da falta de qualidade da Internet, melhorando as estatísticas de perda fim-a-fim, alguns destes usando diversidade de caminhos, que é simplesmente enviar tráfego por dois ou mais caminhos distintos concomitantemente, sem replicação de pacotes.

Uma das principais vantagens deste método reside no fato que não aumenta a quantidade de tráfego gerado ou não implica em modificações na estrutura da Internet.

A diversidade de caminhos foi inicialmente proposta por Maxemchuk para melhorar o roteamento de pacotes em redes comutadas.

Recentemente foi usada para aplicações multimídia sobre redes ATM, Internet, redes sem fio e até ad-hoc.

A proposta deste trabalho é estudar a técnica em detalhes, visando esclarecer alguns pontos não abordados na literatura, identificando problemas novos e alguns potenciais benefícios da abordagem de diversidade de caminhos.

O primeiro ponto abordado será a performance da diversidade de caminhos quando usados mais de dois caminhos, nesta análise concluirá que, dependendo dos requisitos de qualidade da aplicação, um maior número de caminhos pode ou não ser vatajoso.

O segundo ponto abordado será como o método se comporta quando uma quantidade substancial do tráfego da rede é tráfego que faz uso da diversidade de caminhos, onde se concluirá que o melhor cenário é quando apenas a fonte analisada usa a diversidade de caminhos.

Nos últimos anos, as aplicações de tempo real, transmissão de vídeo para entretenimento, telefonia IP, sites WWW multimídia, teleconferência, jogos iterativos, mundos virtuais, ensino a distância, têm crescido em importância e exigem uma qualidade de serviço que se diferencia bastante das exigências feitas pelos tráfegos de aplicações tradicionais como, por exemplo, WWW e aplicações de e-mail.

Em particular, as aplicações de tempo real são altamente sensíveis aos atrasos fim-a-fim bem como a variação deste (jitter), e o descarte de pacotes que acontece principalmente devido ao congestionamento dos rotedores.

Para alcançar a qualidade de serviço exigida por este novo conjunto de aplicações transmitidas pela Internet, dois diferentes grupos de propostas podem ser encontradas na literatura, propostas que exigem mudança nos nós da rede (seja mudança de software ou hardware) ou propostas que são implementadas nas aplicações.

No caso das propostas que exigem mudança na infra-estrutura de rede destacam-se as propostas em relação a arquitetura, como por exemplo redes ATM que durante estabelecimento da conexão asseguram a qualidade de serviço necessária à aplicação e políticas de armazenamento, descarte e serviço nas filas dos roteadores, como por exemplo o DiffServ e IntServ.

Como exemplos de propostas implementadas nas aplicações, pode-se destacar FEC (forward error correction), packet interleaving e o mecanismo que será abordado neste trabalho, diversidade de caminhos.

Todos estes métodos visam minimizar os problemas causados pela utilização da Internet, cuja natureza é best-effort, ou seja, nenhuma garantia é assegurada as aplicações que utilizam o seu meio físico.

O mecanismo de diversidade de caminhos foi proposto em 1975 por Maxemchuck em sua tese de doutorado.

Inicialmente, este método foi proposto para facilitar o roteamento dos pacotes, aumentar tolerância a falhas e diminuir o impacto do tráfego de uma fonte em particular sobre as demais fontes que compartilham canais.

Somente a partir de 2001 este método passou a ser extensivamente estudado para fornecer qualidade de serviço ao tráfego multimídia enviado através da Internet.

Diversos modelos analíticos e de simulação mostraram a eficiência da utilização do método de diversidade de caminhos para aplicações de voz e vídeo.

Apesar de o método ter recebido bastante atenção na literatura, muitas questões ainda continuam em aberto, propiciando uma análise mais profunda e cuidadosa deste método, principalmente questões em relação aos prós e contras da utilização da técnica de diversidade de caminhos.

Este trabalho se direciona a responder algumas dessas questões.

Esta dissertação tem como objetivo avaliar o desempenho do método de diversidade de caminhos em vários cenários.

O trabalho foca principalmente dois pontos ainda não abordados na literatura, melhora da performance do método quando se utilizam mais de dois caminhos e investiga a escalabilidade do método em relação ao número de aplicações usando a mesma técnica.

No capítulo 2 apresenta-se uma revisão bibliográfica que aborda os requisitos necessários às aplicações de tempo real, além de apresentar diversos métodos propostos na literatura que possuem como objetivo atender a estes requisitos.

Neste capítulo destaca-se a definição do método de diversidade de caminhos, bem como as principais características inerentes a este.

Apresentam-se os estudos realizados com o objetivo de responder a seguinte pergunta, aumentar o número de caminhos traz algum benefício a aplicação que está utilizando o método de diversidade de caminhos.

Para responder a esta pergunta, foram considerados dois diferentes cenários, a utilização de caminhos homogêneos, onde todos os caminhos possuem a mesma probabilidade de um pacote ser entregue à aplicação com erro, e a utilização de caminhos heterogêneos, onde os caminhos diferem no parâmetro citado anteriormente.

Diversos resultados são obtidos, e uma discussão em relação a estes é apresentada.

No capítulo 4 apresentam-se os estudos realizados com o objetivo de analisar a escalabilidade do método, sendo que esta análise é fundamental para qualquer proposta de um novo método.

Neste capítulo, diferentemente do capítulo 3, será mostrado que a diversidade de caminhos implica na dependência de perda entre os diversos caminhos.

Uma outra questão abordada refere-se à suavização do tráfego quando considera-se o tráfego conjunto de todas as fontes que enviam dados pelos mesmos canais.

Por final, será estudada a combinação destes dois fatores e os resultados decorrentes desta combinação.

No capítulo 5 são feitas considerações finais sobre esta dissertação, as contribuições do trabalho apresentado e propostas para trabalhos futuros.

Os últimos anos têm testemunhado o explosivo crescimento no desenvolvimento e implementação de aplicações de rede que transmitem e recebem conteúdo de áudio e vídeo pela Internet.

Novas aplicações multimídia (também conhecidas como aplicações de mídia contínua), vídeo para entretenimento, telefonia IP, teleconferência, mundos virtuais, monitoramento em tempo real e muitos outros, são anunciadas diariamente.

Para que as aplicações em tempo real sejam realmente difundidas, os usuários necessitam de qualidade em suas aplicações.

Os requisitos de serviço das aplicações em tempo real diferem significativamente daqueles das aplicações orientadas a dados como Web, imagem e texto, e-mail e ftp.

Em particular, aplicações multimídia são sensíveis ao atraso fim-a-fim e a sua variação (conhecida como delay jitter), e ao descarte de pacotes.

Estes requisitos sugerem que uma arquitetura de rede que foi definida primariamente para comunicação de dados pode não suportar bem aplicações multimídia.

Várias propostas para evitar estes problemas podem ser encontradas na literatura, desde propostas de arquiteturas, como ATM, até políticas de armazenamento, serviço e descarte nos roteadores, como, por exemplo, Diffserv (Differentiated Service) e Intserv (Integrated Service).

O principal problema destas propostas é a premissa de que os nós da rede precisam ser alterados de alguma forma, seja por software ou hardware, já que a base maior da Internet é de roteadores IP, onde o best-effort predomina e não dá garantia de qualidade a nenhum tráfego.

Até os dias de hoje estas mudanças são difíceis de serem feitas pela sua complexidade e custo.

Existem outras propostas para entrega de conteúdo de aplicações em tempo real que não garantem explicitamente requisitos de qualidade, porém não supõem alterações da infra-estrutura da Internet.

Estas propostas não eliminam a perda de pacotes nem garantem suas restrições de tempo, apenas tentam minimizar os problemas causados pela falta de garantias da rede.

Os mecanismos são geralmente implementados na aplicação final, muitas vezes tornando uma aplicação simples demasiadamente complexa.

Para a variação do atraso fim-a-fim tem-se o mecanismo playout delay, tempo entre o pedido do cliente pela mídia escolhida e a sua apresentação.

Para a perda de pacotes alguns esquemas de recuperação são usados FEC (forward error correction), packet interleaving e diversidade de caminhos (path diversity).

Este capítulo tem como objetivo apresentar os principais conceitos inerentes às aplicações multimídia que estão se tornando comuns na Internet.

São apresentadas as principais características das aplicações multimídia atuais.

Apresenta os principais métodos encontrados na literatura utilizados para prover a qualidade de serviço necessária as aplicações de tempo real.

Mostra métodos utilizados para amenizar o problema de erro introduzido nas aplicações decorrente da perda de pacotes.

A principal seção do capítulo é que apresenta as definições do método de diversidade de caminhos, os trabalhos relacionados, bem como os principais resultados encontrados na literatura.

Apresenta as conclusões do capítulo.

Inúmeras aplicações multimídia, conforme já citado anteriormente, estão se tornando comuns nos dias atuais.

Estas podem ser agrupadas em três classes, streaming de áudio e vídeo armazenados, streaming de áudio e vídeo em tempo real sem interatividade e aplicações de áudio e vídeo em tempo real com interatividade.

Nesta classe de aplicações, clientes solicitam arquivos de áudio ou vídeo (compactados) que estão armazenados em um servidor.

Entre estes arquivos, tem-se, por exemplo, músicas, aulas, filmes, programas de TV, eventos, desenhos, entre outros.

Para esta classe, três pontos principais devem ser estabelecidos, armazenamento da mídia, previamente, a mídia deve ser gravada e armazenada no servidor.

Assim, o cliente pode usar os mecanismos utilizados em videocassetes, play, rewind, fast-forward.

Streaming, neste mecanismo, o cliente começa a exibir a mídia poucos segundos após o seu pedido.

Este mecanismo evita a necessidade de download de toda mídia antes do início da sua exibição, evitando uma espera desnecessária.

Exibição contínua,uma vez que se inicie a exibição da mídia, espera-se que o tempo de demonstração transcorra de acordo com o tempo original de gravação.

Assim, restrições de atraso para a entrega dos dados são estabelecidas.

Os dados devem ser recebidos a tempo de serem exibidos pelo cliente, caso contrário podem ser consideradas inúteis.

Esta classe de aplicações é similar ao sistema de rádio e televisão, exceto pelo fato das informações serem transmitidas pela Internet.

Algumas características são particulares a este tipo de aplicações, como o fato da não possibilidade, por exemplo, da utilização do mecanismo fast forward.

No entanto, como nas aplicações da classe a exibição contínua da mídia é requerida.

Esta classe de aplicações permite os clientes utilizarem áudio e vídeo de tal maneira que as informações podem ser trocadas entre os participantes de uma determinada seção, como por exemplo, videoconferência, telefonia IP.

Para uma conversa com interação entre os diversos interlocutores, o atraso entre a fala e o movimento de um deles e a sua recepção pelos demais deve ser menor que poucos milisegundos.

Para voz, atrasos menores que 150 milisegundos não são percebidos pelos usuários.

No entanto, atrasos acima de 400 milisegundos afetam muito a qualidade da aplicação.

Assim, restrições no atraso devem ser estabelecidas para que a aplicação tenha uma qualidade que satisfaça o usuário.

Como a Internet promove um serviço best-effort, onde não existe nenhuma garantia de entrega dos pacotes, do atraso fim-a-fim de um pacote individual ou da variação do atraso de pacotes dentro de um stream de pacotes, a melhoria da qualidade normalmente fica sob responsabilidade da aplicação.

As aplicações de tempo real são as que possuem a maior demanda por qualidade, pois seus requisitos de atraso, variação do atraso e perda são sensivelmente maiores do que das aplicações como vídeo e áudio armazenados.

Além do best-effort, existem outras formas de transmissão de dados que, diferente do best-effort, possuem garantia de qualidade.

Estes métodos supõem alterações no hardware ou software da rede.

Nesta seção apresentam-se estes métodos, bem como o que deve ser feito quando opta-se por não se utilizar alterações explícitas, ficando com o serviço oferecido pelo best-effort.

A forma mais fácil de obter qualidade é garantir recursos de banda de forma exclusiva, mesmo que esta não esteja sendo utilizada.

A telefonia convencional, por exemplo, é uma forma de reserva exclusiva.

O atraso neste caso é determinístico e, se não considerarmos erros de transmissão, não há perda de pacotes.

Dois métodos de reserva de recursos são os mais utilizados, multiplexação por tempo (TDM, time division multiplexing) e por freqüência (FDM, frequency division multiplexing).

Considere-se, por exemplo, um canal que suporte N diferentes nós e que sua taxa de transmissão é de R bps.

TDM divide o tempo em frames de tempo, e cada frame de tempo é subdividido em N slots de tempo.

Com a utilização do TDM, colisões são evitadas e a taxa de transmissão dedicada a cada nó é de R/N bps durante cada frame de tempo.

A maior desvantagem deste método está no desperdício de banda, se somente um nó possui informações a serem transmitidas, ele deve esperar todos os slots de tempo destinados aos outros nós para transmitir novamente.

Enquanto o TDM divide o canal em termos de tempo, o FDM divide o canal em diferentes freqüências, sendo que cada nó terá a sua freqüência particular.

As vantagens são as mesmas que as do TDM, sendo que também existe o problema de desperdício de banda.

Vale ressaltar que existem outros mecanismos que se destinam a divisão de recursos de maneira justa e que evite o desperdício dos recursos destinados às aplicações.

No entanto, a idéia principal foi apresentar os métodos que garantem banda fixa e atraso determinístico.

Apresentou-se mecanismos em que explicitamente os recursos são divididos, garantindo certamente a qualidade (banda, atraso).

Os mecanismos apresentados nesta seção, no entanto, destinam-se ao policiamento dos tráfegos que passam por um caminho, garantindo a todos estes tráfegos a qualidade exigida quando estes foram admitidos na rede.

No entanto, diferente do TDM e do FDM, esta garantia é estatística, ou seja, os roteadores da rede tentam atingir um certo nível de qualidade previamente acordado.

Entre estes mecanismos, pode-se citar o Intserv e o Diffserv.

O Intserv oferece garantias de qualidade por fluxo, diferente do Diffserv, que oferece garantias por conjunto de fluxos.

As garantias do Intserv são melhores, mas exige muito mais processamento dos roteadores.

A grande desvantagem destes métodos é a alteração necessária na estrutura da rede e mesmo após as alterações, o processamento requerido por estas abordagem pode ser muito grande.

Nesta seção serão detalhados os problemas inerentes às redes best-effort e apresentados, sucintamente, os métodos que os minimizam e que não supõem nenhum tratamento especial da rede.

A idéia é manter a complexidade da rede baixa e tentar diminuir os impactos da não garantia da qualidade de atraso e entrega.

Um componente importante do atraso fim-a-fim na Internet é os atrasos aleatórios de permanência nas filas dos roteadores ao longo do caminho pelo qual são enviados os pacotes pertencentes a uma determinada aplicação.

Devido a esta variação de atraso dentro da rede, o tempo entre o envio do pacote pela fonte de dados e o seu recebimento no receptor pode flutuar de pacote para pacote.

Este fenômeno é chamado jitter.

Consideremos, como exemplo, dois pacotes que sejam enviados consecutivamente em uma aplicação de voz utilizando a Internet.

Estes pacotes são gerados, no transmissor, a cada 20 ms.

No entanto, no receptor a diferença entre os tempos de recebimento de cada um desses pacotes consecutivos pode ser maior ou menor que 20 ms, resultando, respectivamente, em um jitter positivo ou negativo.

Se o receptor das informações ignora a presença do jitter, e exibe estas informações no momento que elas chegam, a qualidade do áudio pode se tornar extremamente ruim, afetando o entendimento da conversa entre os participantes.

Existem diferentes mecanismos na literatura destinados a minimizar os problemas gerados pela presença do jitter.

Entre estes, pode-se destacar o mecanismo de playout delay, onde o receptor armazena uma pequena porção do fluxo a ser utilizada antes que este seja escalonado para ser tocado.

Para aplicações de tempo real com interatividade, o tempo de armazenamento não pode ser grande.

Algumas propostas como adaptative playout buffer tentam encontrar uma boa relação entre o atraso total e o erro por demora na entrega.

Para aplicações multimídia como vídeo e áudio, a perda (tanto pelo enchimento das filas dos roteadores do caminho pelo qual a aplicação envia os dados, quanto por erros nos dados) de uma porção do fluxo é normalmente percebida pelo usuário como um ruído no fluxo de vídeo ou do áudio, afetando, sensivelmente, a qualidade da aplicação.

Assim, diversos mecanismos para correção de perdas e, conseqüentemente, da melhoria da qualidade nas aplicações são apresentados na literatura.

Semelhante às aplicações que utilizam o TCP (transport control protocol) como protocolo da camada de transporte, as aplicações em tempo real podem utilizar o mecanismo de retransmissão para a recuperação de dados perdidos durante a transmissão destes.

No entanto, as características da rede, bem como os requisitos de qualidade exigidos pela aplicação devem ser analisados.

A retransmissão só é possível quando há tempo para se pedir novamente o pacote, e a retransmissão chegar (round trip time ou RTT) antes que o pacote seja necessário.

Se o RTT é alto, isso significa que o tempo entre a chegada do pacote e a sua utilização é alto, fato inaceitável para muitas aplicações em tempo real, especialmente as com interatividade que, conforme visto anteriormente, possuem severos requisitos de atraso.

Como mecanismos mais utilizados para a correção de perda, podemos citar os mecanismos baseados em redundância, na utilização dos pacotes que já foram recebidos pela aplicação e mais recentemente, o mecanismo baseado na diversidade de caminhos, que pode ser utilizado em conjunto com outros mecanismos, aumentando a sua eficiência.

Nesta seção serão apresentadas as técnicas de correção de erro.

O objetivo central deste trabalho é realizar um estudo profundo do mecanismo baseado na diversidade de caminhos, mostrando seus pontos fortes e fracos, alguns já apresentados na literatura e outros que ainda não foram abordados.

Para completude do trabalho, serão apresentados os pontos fortes e fracos dos mecanismos baseados em redundância e na utilização de pacotes que já foram recebidos pela aplicação.

Será abordado os principais conceitos e trabalhos relacionados na literatura a respeito do mecanismo de diversidade de caminhos, objetivo central do trabalho apresentado.

As principais formas de correção de erro presentes na literatura especializada são inserção de silêncio, repetição do último pacote, interpolação de pacotes adjacentes, codificação do mesmo sinal com qualidade inferior inserindo esta redundância no fluxo e codificação com múltiplas descrições.

O trabalho concentrar-se-á nas duas últimas e em suas aplicações na transmissão de vídeo e áudio.

Exemplo de codificação por camadas (L) (acima) e por MDC (M) Codificação de múltiplas descrições (MDC), descrita em Kubin e Kleijn, é uma técnica onde o vídeo ou o áudio são reconstituídos através de várias descrições do original.

Esta abordagem difere da codificação normal, onde as descrições são feitas umas a partir das outras, ou seja, existe uma descrição base, por exemplo, um quadro do tipo I num vídeo MPEG, e as outras são a diferença entre esse quadro e a imagem original.

Na codificação MDC sempre os quadros capturam elementos diferentes da imagem ou da voz originais.

Mostra a diferença entre as duas codificações.

Codificação em múltiplas descrições possui vantagens quando ocorrem perdas ou na ausência destas.

Quando não há perda, os quadros "extras" podem ser usados para melhorar a imagem, diferente dos esquemas tradicionais de FEC, onde a redundância é jogada fora.

Quando há perda de um quadro, os demais quadros que chegaram podem dar uma razoável reconstituição da imagem original.

Fica claro que se forem perdidos os quadros 3 e 1 da codificação por camadas, a imagem ficaria quase irreconhecível.

Por outro lado, se forem perdidos os quadros 1 e 3 da codificação MDC, ainda se poderia ter uma boa aproximação da imagem original.

A principal abordagem utilizada para recuperar a perda de pacotes é o envio de redundância, seja em pacotes separados, ou inserido em pacotes do próprio fluxo.

Este método é chamado de Forward Error Correction (FEC).

Alguns métodos pro postos na literatura.

Exemplo de correção de erro com FEC, redundância codificada a uma taxa menor.

FEC pode ser usada de diversas formas.

A mais comum é codificar cada amostra com uma taxa de compressão maior, resultando em amostras de pior qualidade, e inserir a n-ésima amostra comprimida no pacote da amostra n + 1, conforme mostrado.

Ao perder um pacote qualquer, a aplicação procura usar a sua redundância (do pacote), conforme exemplificado pelo pacote 3.

FEC tem o problema de requerer maior taxa e ser pouco justo com as conexões TCP, pois no momento em que há maior perda, o fluxo de tempo real necessita de mais tráfego, aumentando assim a perda.

Alguns métodos como Bolot, Fosse-Parisis e Towsley diminuem este impacto fazendo controle da taxa máxima de envio.

Outros métodos podem garantir a recuperação integral dos quadros, como em Figueiredo e de Souza e Silva.

Apenas a taxa de perda não fornece informação suficiente para que se possa definir o melhor esquema de recuperação.

É necessário, também, saber a distribuição do número de perdas consecutivas, bem como em alguns casos, a distribuição do número de pacotes recebidos entre duas perdas.

Se as perdas de pacotes acontecem em rajadas, como verificado por experimentos na Internet, os esquemas de correção de erro descritos podem não ser muito eficientes, especialmente se as rajadas são muito longas e a aplicação em tempo real possui requisitos de atraso muito próximos do tempo de viagem dos pacotes.

Isso porque a aplicação se utiliza dos pacotes recebidos para a reconstituição (ou aproximação) do pacote perdido.

Caso muitos pacotes sejam perdidos de uma só vez, não serão recebidos pacotes suficientes para "reconstituir" os pacotes perdidos.

Uma forma de resolver o problema com FEC é fazer redundância do pacote n + k no pacote n, com k maior que o tamanho da rajada de perda.

Contudo, o emissor precisaria manter um atraso na recepção dos pacotes de, pelo menos, k pacotes, o que pode ser inviável para aplicações em tempo real com restrições no atraso, conforme dito anteriormente.

O problema das perdas em rajada, pode ser minimizado por dois métodos, packet interleaving e o uso de múltiplos caminhos (path diversity).

Packet interleaving é feito enviando pacotes fora de seqüencia.

Contudo, fica claro que, conforme acontece com o esquema cuja redundância do pacote n é enviada com o n + k, o receptor precisa armazenar k pacotes antes de reproduzi-los.

Se o atraso é pequeno e as rajadas de erro são curtas, a técnica é eficiente, pois diminui a probabilidade de ocorrer uma rajada grande de perdas da seqüencia original.

Caso contrário, o atraso da chegada de pacotes inserido pela rede, somado ao atraso do mecanismo (que é diretamente proporcional ao tamanho esperado das perdas), impossibilita a sua adoção se os requisitos de tempo são muito curtos, da mesma forma que o método de FEC quando o k é grande.

A utilização de diversidade de caminhos (múltiplos caminhos ou path diversity) para aplicações em tempo real também tem a finalidade de diminuir o tamanho da rajada de perda só que, diferente do método de interleaving, não há necessidade que o receptor armazene os pacotes recebidos antes de entregá-los ao decodificador.

Será visto como a diversidade de caminhos funciona e quais são os trabalhos realizados na área.

Exemplo de packet interleaving O objetivo principal da diversidade de caminhos é diminuir a probabilidade de ocorrer uma rajada longa de perda de pacotes, para que métodos de correção de erro como o FEC ou MDC possam ser mais eficazes.

A diversidade de caminhos pode também atenuar as rajadas de fluxo de tráfego na rede, prover maior proteção contra outages de canais e ainda diminuir o playout buffer de algumas aplicações, como será visto adiante.

O modelo mais comum de diversidade de caminhos é o "Nth path, dual round robin", que é enviar os pacote em seqüência por cada um dos N caminhos.

Proposto inicialmente como um método de roteamento de pacotes, a diversidade de caminhos foi descrita com uma técnica para se obter uma transmissão de dados confiável para tráfegos comutados por circuitos (reais ou virtuais, como na tecnologia ATM (Assyncronous Transfer Mode)), ao mesmo tempo infringindo menor carga à rede que os métodos que utilizam apenas um caminho para a transmissão de dados.

O mecanismo foi inicialmente proposto em 1975 por Maxemchuck em sua tese de doutorado, como um mecanismo de roteamento de pacotes.

O objetivo de Maxemchuck foi diminuir as rajadas de tráfego na rede e evitar paralisações temporárias na transmissão de pacotes quando houvessem paralizações na rede.

Como os algoritmos de roteamento não são rápidos o suficiente para selecionar outra rota alternativa em caso de uma paralização temporária, a diversidade de caminhos é uma alternativa interessante para lidar com este problema.

Modelo de perda de Gilbert.

Outros trabalhos foram escritos sobre as aplicações dessa abordagem, chamada até então de dispersity routing.

Banejea fez uso de simulações mostrando que o método permite, comparando as mesmas estruturas de rede, um número maior de fluxos do que a abordagem convencional, aumentando ao mesmo tempo, a confiabilidade da transmissão.

Existe ainda um survey de 1997 sobre dispersity routing.

Analisou multi-path routing (roteamento por múltiplos caminhos) em redes ATM, com vistas a diminuir o tempo de estabelecimento de uma conexão ATM.

Diversidade de caminhos para tráfegos multimídia, em redes comutadas por pacotes sem qualidade de serviço (best-effort), só seria extensivamente estudado em 2001.

Abaixo serão abordados alguns pontos dos trabalhos já publicados.

Os diversos trabalhos publicados têm muitos pontos em comum, como o uso de redes best effort.

Um ponto em comum em todos os trabalhos que fazem uso de modelos matemáticos para estudar o ganho da técnica de diversidade de caminhos é o modelo utilizado para a perda de pacotes, o modelo de Gilbert.

Neste modelo o caminho perde pacotes se o seu estado (modelado por uma cadeia de Markov de dois estados) está em "Ruim".

A taxa de transição do estado "Bom" para o "Ruim" é Bom e de "Ruim" para "Bom" é Ruim.

Seja o intervalo entre envio de pacotes constante e igual a fi.

Para o mesmo valores de Bom e Ruim, quanto maior a taxa de transmissão maior o número de perdas consecutivas.

O modelo de Gilbert pode ser considerado um bom modelo para a perda fim-a-fim.

O modelo de Gilbert é adequado para uma grande quantidade de experimentos feitos na Internet.

Assim, este será o modelo de perdas adotado durante o trabalho, assim como foi o modelo adotado pelos outros trabalhos relacionados.

Vale ressaltar que as fontes de tráfego em tempo real podem ou não enviar pacotes em intervalos regulares de tempo.

Durante este trabalho, e nos trabalhos listados acima, assume-se que os intervalos são regulares, o que de fato não compromete os principais resultados da análise, como será visto posteriormente.

Baseado na idéia de que a variação do atraso (jitter delay) está relacionado com a probabilidade de perda de pacotes durante sua transmissão, e que esta variação afeta a política de playout buffer, visou estudar a determinação do playout buffer quando os pacotes da aplicação trafegam por diferentes caminhos, e, possivelmente diminuindo a probabilidade de perda.

Os autores realizaram experimentos na Internet entre dois diferentes pares origem / destino.

Além de experimentos reais, também foram realizadas diferentes simulações, possibilitando a utilização de diferentes topologias e diferentes cargas de tráfego.

Com estas simulações, foi possível mostrar que a utilização do mecanismo de diversidade de caminhos forneceu uma melhoria significativa na qualidade de voz e uma redução no atraso de entrega dos pacotes.

Esta redução no atraso é essencial quando o esquema de playout buffer é usado, já que não existe a necessidade de um grande buffer para que se inicie a apresentação dos pacotes de voz.

Como demais resultados, foi mostrado que a eficiência da diversidade de caminhos depende da estatística de correlação entre estes caminhos e que o ganho obtido com a utilização deste mecanismo depende da diferença no atraso de propagação dos múltiplos caminhos e da variância do atraso da rede.

Se um canal com baixa capacidade é compartilhado por múltiplos caminhos, foi mostrado que a correlação do atraso entre os fluxos é muito grande.

Apesar disso, foi mostrado que a taxa de perda pode ser reduzida utilizando a diversidade de caminhos.

Outros trabalhos também focam na diminuição do playout buffer usando diversidade de caminhos, mas ao mesmo tempo testando o comportamento de um fluxo vídeo (streaming vídeo) usando Multiple Desciption Coding (MDC).

Os trabalhos mostram que usar múltiplos caminhos resulta em uma qualidade de vídeo melhor do que quando apenas um caminho é usado.

Nos trabalhos a diversidade de caminhos foi utilizada em conjunto com aplicação de vídeo.

O fluxo de vídeo é decodificado utilizando múltiplas resoluções (multiple descriptions), onde cada resolução é enviada por um caminho diferente, utilizando o mecanismo de diversidade de caminhos.

Nestes trabalhos, foram modeladas e testadas as rajadas de perda e a distorção do vídeo recebido, assim como simulados os efeitos de caminhos que compartilham os mesmos pontos de congestionamento, com caminhos homogêneos e heterogêneos para no máximo dois caminhos.

Nos trabalhos, três principais benefícios em relação à abordagem de apenas um caminho são listados, melhor comportamento da rede (uma vez que a aplicação vê um comportamento médio dos caminhos média do atraso, média da perda, e média de outras estatísticas), menores rajadas de erro, menor probabilidade de outage e melhor qualidade de vídeo.

Tem como objetivo uma análise mais profunda das estatísticas de perda de pacotes usando múltiplos caminhos e é, entre todos os trabalhos analisados, o que mais se assemelha ao trabalho aqui proposto.

O trabalho analisou a difusão de fluxos de vídeo pré-gravado, usando caminhos disjuntos (que não compartilham os mesmos pontos de congestionamento), com e sem FEC.

O trabalho indica que a diversidade de caminhos, em geral, fornece melhores estatísticas de perda em rajada, autocorrelação de lag um, melhor relação sinal ruído e que a utilização de FEC juntamente com diversidade de caminho, fornece estatísticas ainda melhores.

Contudo, distribuir vídeos pré-gravados não se enquadra exatamente na noção de aplicações em tempo real da forma como foram definidas durante este trabalho.

Para aplicações de Streaming de vídeo e áudio pré-gravados existem técnicas, como packet interleaving, que podem ter quase a mesma eficiência da diversidade de caminhos, se achados os parâmetros certos, sem por isto herdar alguns de seus problemas.

O trabalho mais completo encontrado na literatura sobre a probabilidade de perda em rajada.

Neste é analisada a probabilidade de perda em rajada quando são usados apenas dois caminhos na diversidade de caminhos.

Para tal, foi utilizado o modelo de Gilbert para caracterizar as potenciais correlações entre perdas consecutivas de um caminho e quando usados dois caminhos, os modelos de Gilbert dos caminhos são independentes.

Assumindo que a taxa de transmissão da aplicação não afeta as características de perda canal, então a probabilidade de perda de um pacote quando é usado apenas um caminho é igual à probabilidade do canal estar "Ruim".

O trabalho também analisa o tamanho condicional da perda em rajadas.

O caso de um caminho apenas foi descrito inicialmente, sendo a probabilidade do erro em rajada ser maior.

Esta fórmula pode ser entendida da seguinte maneira, seja um instante aleatório do envio de um pacote qualquer, a probabilidade deste pacote não ser perdido é aproximadamente bom.

A probabilidade de perder o próximo pacote no outro camino é aproximadamente ruim pois os caminhos são independentes.

Para m = 1, o pacote seguinte ao perdido tem que ter sido recebido, este evento é igual à probabilidade do canal pelo qual se enviou o primeiro pacote ainda estar em Bom (2fi).

O canal pelo qual se enviou o primeiro pacote terá que perder o terceiro pacote, cujo evento tem probabilidade p Bom.

Ruim (2fi), a partir do terceiro pacote os pacotes são perdidos a medida que ambos os canais continuam ruins no momento do envio dos pacotes, estes eventos têm probabilidade, finalmente, o último evento, é o recebimento do (m + 2)-ésimo pacote, cujo evento tem probabilidade p Ruim, Bom (2fi).

A partir da comparação da probabilidade condicional de ocorrer uma perda de pacotes em rajada de tamanho de apenas um caminho com a de dois caminhos.

Outra importante medida analisada em foi a autocorrelação entre perdas.

Seja X o processo estocástico que vale um quando há uma perda de um pacote no tempo t e zero caso contrário.

O lema 1 leva a concluir que não há autocorrelação de perda entre pacotes consecutivos, uma vez que foi assumida a independência entre as perdas dos dois caminhos.

A autocorrelação é um indicativo da interdependência entre o pacote enviado no tempo t e o pacote enviado no tempo.

Quanto maior a autocorrelação, maior a probabilidade de se o pacote enviado no tempo t for perdido, o pacote enviado no tempo t +kfi também será perdido, dessa forma para diminuir as rajadas de perda a redução da autocorrelação entre perdas é desejada.

Os trabalhos têm como objetivo aplicar múltiplos caminhos a redes sem fio, a fim de minimizar os problemas de perda de pacotes e escassez de banda (capacidade de transmissão) inerentes a estas redes.

Conforme foi apresentado neste capítulo, a utilização da diversidade de caminhos contribui para a melhoria da qualidade de serviço de diferentes aplicações na Internet, como voz e vídeo, principalmente se usadas em tempo real.

Neste sentido muitos trabalhos tiveram importância vital para o desenvolvimento da técnica.

No entanto, ainda há carência por um estudo detalhado que apresente, além dos benefícios do mecanismo, os cenários em que a utilização da diversidade de caminhos não apresenta ganho significativo de qualidade.

Ou seja, deve-se apresentar um trabalho que não fique restrito somente no lado positivo do mecanismo, mas que também apresente os seus pontos negativos.

Além dos pontos negativos, há necessidade também de um estudo sobre as conseqüências da larga utilização deste método.

Baseado neste princípio, o presente trabalho visa a apresentar um estudo detalhado de diversas características da diversidade de caminhos, juntamente com os seus prós e seus contras.

Serão abordados alguns pontos considerados, até então triviais na literatura, onde a conclusão é exatamente a oposta à conclusão "trivial" encontrada na literatura.

Estes serão os temas dos dois próximos capítulos.

Um dos pontos em que o presente trabalho se diferencia é ao analisar a diversidade de caminhos para um número arbitrário de caminhos, análise esta que será feita no Capítulo 3.

O objetivo deste capítulo é estudar o impacto do aumento do número de caminhos no desempenho do método.

A pergunta a ser respondida é aumentar o número de caminhos traz algum benefício para a aplicação? Será visto um modelo analítico para o cálculo da probabilidade de perda em rajada para um número arbitrário de caminhos.

Este modelo analítico considera que todos os caminhos a serem analisados são homogêneos, ou seja, possuem a mesma probabilidade de erro/sucesso no envio de um pacote pela rede.

Serão apresentados importantes resultados referentes as probabilidades de ocorrência de rajadas de erro/sucesso de pacotes, considerando tanto a utilização de um único caminho como também de múltiplos caminhos.

Além dessas medidas, será apresentada correlação de perda utilizando diversidade de caminhos.

Será mostrada análise semelhante quando os diversos caminhos são heterogêneos, ou seja, os caminhos possuem características diferentes, como por exemplo, a probabilidade de ocorrência de erros.

Apresentará as conclusões do capítulo, enfatizando as contribuições em relação aos outros trabalhos.

Seja S uma variável aleatória que conta o número de pacotes consecutivos corretamente recebidos entre duas perdas e L uma variável aleatória que indica o número de pacotes consecutivamente perdidos entre dois pacotes recebidos.

Ambas as variáveis serão associadas aos esquemas de um caminho apenas ou de múltiplos caminhos pelo subscrito " sp " para um caminho e " mp " para múltiplos caminhos, de modo que PfL sp (fi) > 0g significa, a probabilidade de haver uma rajada de perda de qualquer tamanho, quando a fonte usa apenas um caminho e envia pacotes em intervalos regulares fi e PfL mp tem um parâmetro a mais N que é o número de caminhos utilizados.

Nesta seção serão analisadas quatro medidas de interesse sobre o comportamento do canal.

Conforme descrito no capítulo 2 o intervalo de envio de pacotes é constante e de tamanho fi.

O modelo do comportamento do erro no canal é o mesmo usado durante o capítulo 2.

Segue-se aqui também as mesmas premissas descritas, ou seja, todos os canais são homogêneos, os pacotes são enviados em seqüência por cada um dos N caminhos e o canal se encontra em estado estacionário.

Seguindo o mesmo raciocínio utilizado, podemos deduzir as probabilidades, onde N é o total de caminhos quando utiliza-se a diversidade de caminhos.

Para no máximo dois caminhos estas equações estão descritas.

Resta deduzir para um número arbitrário.

Último pacote chegou em um tempo qualquer t (estado 0) e o próximo não chegou no tempo t + fi (estado 1)g = PfCaminho k estar no estado 0 em um tempo qualquer t e o caminho k + 1 modN no estado 1 no tempo t + fig = aproximadamente Bom aproximadamente Ruim.

A utilização do termo k + 1 modN decorre da disciplina de Round Robin em que os canais são selecionados para o envio de um pacote.

Usando a mesma abordagem, pode-se determinar PfS mp, o que significa que diversidade caminhos tem um número maior de rajadas de sucesso ou perda do que se fosse usado apenas um caminho, contudo, em contrapartida, essas rajadas são menores, pois a probabilidade de perda/sucesso é a mesma em ambos os casos.

PfL sp (fi) = mg já foi definido, assim como PfL mp.

O primeiro objetivo deste capítulo é definir PfL mp para um número arbitrário de caminhos.

Demonstração.

A prova será dividida em três partes, para m < N 1, evento, envio do primeiro pacote em um tempo arbitrário t e este pacote não ser perdido.

Probabilidade do evento, aproximadamente Bom.

Evento, envio de m pacotes e todos estes serem perdidos.

Probabilidade do evento, como todos os caminhos são independentes, a probabilidade deste evento é a multiplicação da probabilidade dos eventos isolados, ou seja, aproximadamente m Ruim.

Evento, envio do m + 1-ésimo pacote e este não ser perdido.

Probabilidade do evento, novamente, pela independência dos caminhos a probabildade deste evento não depende dos outros pacotes, aproximadamente Bom.

Para m = N 1, evento, envio do primeiro pacote em um tempo arbitrário t e este pacote não ser perdido.

Probabilidade do evento, aproximadamente Bom.

Evento, envio de m pacotes e todos estes serem perdidos.

Probabilidade do evento, como todos os caminhos são independentes, a probabilidade deste evento é a multiplicação da probabilidade dos eventos isolados, ou seja, aproximadamente m Ruim.

Evento, envio do m + 1-ésimo pacote e este não ser perdido.

Probabilidade do evento, diferente do evento anterior, a probabilidade de sucesso deste pacote depende do fato do primeiro pacote ter sido bem sucedido, pois os dois irão pelo mesmo caminho.

Para m > N, evento, envio do primeiro pacote em um tempo arbitrário t e este pacote não ser perdido.

Probabilidade do evento, aproximadamente Bom.

Evento, envio de N 1 pacotes e todos estes serem perdidos.

Probabilidade do evento, como todos os caminhos são independentes, a probabilidade deste evento é a multiplicação da probabilidade dos eventos isolados, ou seja, aproximadamente m Ruim.

Evento, envio do N-ésimo pacote e este também ser perdido.

Probabilidade do evento, dado que o último pacote enviado por este canal foi bem sucedido.

Evento, envio dos restantes dos pacotes perdidos.

Probabilidade do evento, dado que o último pacote enviado por este canal foi perdido.

Evento, envio do m + 1-ésimo pacote e este não ser perdido.

Probabilidade do evento, o último pacote enviado por este caminho foi perdido.

O termo Nfi refere-se ao tempo total de duração de um ciclo da disciplina Round Robin de entrega de pacotes aos N canais.

Será demonstrado a seguir que a probabilidade de haver rajadas menores que N 1 pode ser bem maior usando diversidade de caminhos.

Apesar dessa característica depender dos parâmetros da fonte e do canal, este é um claro alerta sobre o método ser contraproducente se há um número muito grande de caminhos pois não há uma queda significativa na probabilidade de haver uma rajada muito longa, a probabilidade de haver uma rajada maior ou igual a 4 usando-se 5 caminhos é muito maior do que com apenas dois caminhos.

A resposta à pergunta "mais caminhos melhoram o método" depende dos requisitos da aplicação, ou seja, uma quantidade maior de caminhos não necessariamente melhora o método.

Para eventos muito raros, como uma total indisponibilidade de um caminho, o aumento do número de caminhos claramente diminui a probabilidade de que todos os caminhos tenham este mesmo problema ao mesmo tempo.

Contudo, uma maior quantidade de caminhos pode não interessar quando se pensa em diminuir a probabilidade de ocorrer uma rajada pequena de perda de pacotes.

O gráfico retrata a rajada de perda condicional de um modelo cuja probabilidade de perda de um pacote é (aproximadamente 046) muito alta porque seu objetivo é apenas mostrar a relação entre a probabilidade de perda, o aumento do número de caminhos e a probabilidade condicional de uma rajada de perda < N 1.

Nota-se que o incremento do número de caminhos de 2 para 3 aumenta drasticamente a probabilidade de perda de pelo menos dois pacotes em rajada.

Comparando os gráficos, percebe-se que com a diminuição da probabilidade de perda e o aumento do tempo médio em que o caminho fica "Bom", a probabilidade de haver rajadas menores que o número de caminhos diminui drasticamente.

Os gráficos também mostram que o ganho em adicionar mais caminhos decai com o número de caminhos e, portanto, a aplicação deve avaliar se é benéfica a adição de mais um caminho de acordo com as características de perda dos caminhos.

Considere-se, por exemplo, uma aplicação de transmissão de 1 vídeo.

Uma forma para se avaliar os ganhos de incrementar o número de caminhos é criando uma função de avaliação que leve em conta três fatores, a melhoria na qualidade do vídeo, utilizando-se por exemplo da função do ruído induzido por uma perda em rajada, a eficácia do esquema de correção de erros com a adição de mais um caminho e o custo de se adicionar mais um caminho.

Como exemplo, o sistema de correção de erros descrito em (onde a perda de um pacote só é corrigida se o próximo pacote chegar) atinge o seu melhor desempenho de correção de erros com dois caminhos para uma grande gama de parâmetros do modelo de Gilbert do canal.

As probabilidades dos gráficos não são constantes, apenas decrescem muito vagarosamente.

Esquemas de recuperação de erro (FEC) que necessitem > N pacotes bem sucedidos para recuperar um perdido serão prejudicados se for usada a diversidade de caminhos, a não ser que os N pacotes sejam esperados pelo mesmo caminho, ou seja, que o algoritmo de redundância seja aplicado em cada caminho de forma independente dos outros.

Este efeito tem relação direta com o fato de que a probabilidade de haver uma rajada de erro ou sucesso, PfL > 0ge PfS > 0g respectivamente, é maior usando diversidade de caminhos, o que leva a concluir que rajadas de erro ou sucesso são muito mais freqüentes, porém menores.

Diferença entre a fração de pacotes recuperados por FEC entre dois e cinco caminhos.

O objetivo desta seção é verificar se a autocorrelação da perda, diminui com o aumento do número de caminhos utilizados.

Aqui não será necessária a premissa de que os caminhos são homogêneos.

Como se está enviando pacotes na disciplina round robin pelos diferentes caminhos e os caminhos são independentes, não há autocorrelação.

A autocorrelação, apesar de ter sido utilizada em outros trabalhos na literatura, não é uma boa medida de desempenho do método.

Observando pode-se notar que esta é uma função decrescente em N, mas isso não implica diretamente que com utilização de mais caminhos as estatísticas de perda melhorem.

Como conclusão reduzir a correlação de perdas à zero (N fl 1) não significa necessariamente uma melhora nas estatísticas de perda.

O modelo proposto para estudar o método com caminhos heterogêneos é uma cadeia de Markov de tempo contínuo onde a perda de pacotes no caminho é modelada como um modelo de Gilbert e há um canal com características de perda diferente dos demais.

Para analisar caminhos com diferentes modelos de erro foi utilizada a ferramenta Tangram-II.

Neste modelo cada caminho é representado por dois estados ("Bom" e "Ruim"), a diferença fundamental é que os caminhos não são homogêneos e a distribuição do tempo entre envio de pacotes é exponencial.

A fonte é Poisson com taxa igual a 20 pacotes por unidade de tempo e, conforme anteriormente, a fonte escolhe os canais segundo a política Round-Robin.

Modelo de diversidade de caminhos Parâmetros do modelo Neste seção será analisada a distribuição condicional da rajada de perda para identificar se, tendo um canal melhor, seria melhor enviar todo o tráfego por este canal.

Serão analisados dois casos, o primeiro onde a diferença entre o melhor canal e os demais é muito grande e o segundo onde o canal melhor não é tão melhor que os demais canais.

Para finalizar os estudos da utilização de caminhos heterogêneos, um outro objetivo é avaliar se a probabilidade condicional do tamanho das rajadas de perda ainda é a melhor estatística a ser comparada.

Para uma primeira análise, a diferença entre o canal "bom" e os "ruins" é muito grande exatamente para realçar as diferenças entre eles.

Quanto menor a diferença entre o canal bom e os ruins, mas próximo dos resultados estarão os resultados onde foram considerados caminhos homogêneos.

Distribuição condicional complementar de 1 à 4 caminhos, onde um deles tem sempre uma probabilidade de perda menor, mas com o mesmo tamanho médio do tamanho da rajada de perda.

Pode-se notar que a diversidade de caminhos realmente diminui muito a probabilidade de ter rajadas maior que o número de caminhos em relação a um só caminho, mesmo se os canais usados para dividir o tráfego têm probabilidades de perda maior que o melhor caminho.

Também analisa o comportamento de dois caminhos heterogêneos, contudo a análise feita somente usa as probabilidades de perda condicional, o que não é uma medida apropriada (conforme será mostrado mais a frente) já que as probabilidades de perda de apenas um caminho e dos dois caminhos juntos não são as mesmas.

Mostra o mesmo comportamento, mas neste caso o caminho principal (o melhor) tem um probabilidade de perda muito pequena, com rajadas pequenas de perda.

Distribuição condicional complementar de 1 à 4 caminhos, onde um deles tem sempre uma probabilidade e rajadas de perda menores (com um caminho usa-se o melhor caminho).

Os gráficos não representam a freqüência em que estas rajadas de perda acontecem.

Mostra o descondicionado em PfL > 0g, o que leva a concluir que, neste exemplo, no melhor caminho a freqüencia com que acontecem as rajadas grandes de erro é igual ao caso de múltiplos caminhos e a freqüencia das rajadas menores (menor que o número de caminhos) é muito menor.

Selecionar entre um, dois ou mais caminhos depende exclusivamente do tipo de aplicação, do tipo de esquema de correção de erro adotado e das estatísticas do canal.

Apesar de ao selecionar quatro caminhos no segundo caso não serem obtidas estatísticas melhores que quando usado apenas um canal, dois canais ainda pode ser interessante para algum tipo de aplicação que não seja prejudicada com rajadas de perda pequenas.

Balanceamento de tráfego pode também ser usado para atingir melhores estatísticas quando usado mais de um caminho.

Uma observação que vale nota é a vantagem de se usar menos caminhos nestes casos.

Causa uma certa estranheza o fato de na distribuição de probabilidade condicional a curva "4 canais" estar sempre acima da curva "2 canais", mas a verdade é que este fenômeno só se observa para valores de rajada menores que aproximadamente 200 no melhor caso, valores bastante altos.

Como a probabilidade de ocorrer uma rajada maior que 200 é muito pequena, então melhorar o método para rajadas maiores que 200 não é uma abordagem que cause impacto na qualidade da transmissão.

Distribuição complementar de 1 à 4 caminhos, onde um deles tem sempre uma probabilidade e rajadas de perda menores (com um caminho usa-se o melhor caminho).

O aumento do número de caminhos melhora o método.

Não há uma resposta única a esta questão.

Analisa caminhos homogêneos com pacotes enviados a intervalos regulares e conclui que o total de caminhos que melhora o método de diversidades de caminhos depende dos requisitos de qualidade da aplicação.

Analisa caminhos desbalanceados e mostra que a distribuição condicional da rajada de perda pode não ser a melhor estatística para a comparação entre os caminhos, concluindo também que enviar todo o tráfego pelo melhor caminho é uma boa alternativa se o melhor canal não possui rajadas de erro muito longas.

Neste capítulo será analisada a escalabilidade do método de diversidade de caminhos, ou seja, como este se comportaria se fosse largamente utilizado por usuários na Internet ou numa rede privada.

A análise da escalabilidade é fundamental para qualquer proposta, porém ainda não foi pesquisada pela literatura e será analisada no decorrer deste capítulo.

Consideraremos para análise os seguintes casos.

Todas as aplicações multimídia utilizam diversidade de caminhos.

Todas as aplicações multimídia, exceto uma, utilizam diversidade de caminhos.

A única que não utiliza diversidade de caminhos usa apenas um caminho.

Nenhuma das aplicações multimídia utilizam diversidade de caminhos.

Apenas uma das aplicações multimídia utiliza diversidade de caminhos.

O estudo da diversidade de caminhos apresentado no capítulo 3, supôs independência nas perdas entre os caminhos, o que implicitamente é afirmar que existe independência entre os tráfegos que percorrem os diversos caminhos.

Entretanto, como a diversidade de caminhos divide o tráfego pelos diferentes caminhos está independência não é alcançada.

Na literatura, caminhos disjuntos não possuem dependência de perda porque assume-se que o tráfego enviado por somente uma fonte não é o suficiente para criar uma grande dependência de perda entre os diversos caminhos.

Entretanto, o cenário descrito anteriormente muda quando o tráfego que utiliza diversidade de caminhos começa a ser significativo em relação aos demais tráfegos que compartilham os diversos canais da rede.

O objetivo principal deste capítulo é explorar diversos cenários e mostrar a existência de dependência entre perdas, bem como a suavização do tráfego quando diversas fontes são consideradas.

Este capítulo tem a seguinte estrutura.

Apresenta o modelo que será utilizado para responder as questões de dependência de perda e da suavização do tráfego que compartilha diversos caminhos.

Será estudado o impacto de uma porção significativa do tráfego de entrada nos roteadores, vindo das mesmas fontes, na correlação das perdas nas filas destes roteadores.

Ao mesmo tempo que a diversidade de caminhos cria uma correlação de perdas, o tráfego conjunto de todas as fontes é suavizado, diminuindo o tamanho das rajadas de perda.

A combinação dos dois fatores, dependência e suavização serão apresentadas, onde serão apresentadas também as conclusões.

O modelo para estudar a escalabilidade do método.

O tráfego multimídia e representado por fontes On-Off, que somadas ao tráfego de fundo ("Tráfego de fundo") e o tráfego da fonte multimídia que se quer analisar formam o tráfego de entrada nos roteadores "Roteador 1" e "Roteador 2".

A medida de interesse deste sistema é a distribuição das rajadas de perda entre a fonte multimídia "Font" e o seu destino "dest".

Os roteadores neste modelo representam roteadores da "borda da rede" (border routers).

Para as fontes multimídia (exceto a fonte "src"), a distribuição tempo entre pacotes é exponencial, juntamente com a distribuição dos períodos ativo ("On") e inativo ("Off").

A distribuição do tempo de serviço dos pacotes também é exponencial.

A única distribuição não exponencial é a distribuição do tempo entre pacotes de "Font", que é determinística e constante.

Modelo para análise da escalabilidade do método.

O objetivo desta seção é avaliar quais são as propriedades do tráfego de fontes multimídia que utilizam múltiplos caminhos (diversidade de caminhos) e suas diferenças em relação ao tráfego de fontes que fazem uso de apenas um caminho.

Para avaliar estas propriedades serão feitas algumas simplificações no modelo, indicadas na descrição do modelo de cada seção.

A primeira avaliação remonta à assertiva dos capítulos 2 e 3 sobre a independência entre perdas de caminhos que não compartilhem os mesmos canais.

Esta assertiva somente é verdadeira se o tráfego que passa pelos dois caminhos possui correlação nula.

No entanto, será mostrado que a diversidade de caminhos cria uma dependência de perdas entre caminhos completamente disjuntos (caminhos que não compartilham nenhum roteador).

Para tal, a medida de interesse neste caso é a correlação entre perdas nos roteadores "Roteador 1" e "Roteador 2".

Esta medida foi escolhida porque indica o grau de dependência entre as duas filas.

Para as análises será utilizada a ferramenta Tangram- II com modelos de simulação e analíticos respectivamente.

O modelo considerado neste item contém apenas duas fontes multimídia, sem tráfego de fundo, onde o tráfego enviado por "Font" (20 em 20 milisegundos (constante)) é muito menor que o enviado pelas outras duas fontes On/Off multimídia (1 em 1 milisegundo (em média)).

Outra simplificação é a suposição de que a diferença de tempo entre o envio de um pacote e a sua recepção, causado pela rede ("Núcleo da Rede"), é sempre constante e igual para ambos os caminhos.

Será vista a sensibilidade relativa à variação deste atraso.

A medida obtida foi a autocorrelação da perda entre os pacotes enviados por "Font".

Se analisada a autocorrelação dos pacotes com intervalos múltiplos de um número par por fi (intervalo entre envio de pacotes), esta medida é também a média das autocorrelações de fila cheia dos roteadores "Ro nteador 1" e "Roteador 2".

Considere 4 pacotes, numerados de 1 a 4, como são 2 roteadores, os pacotes 1 e 3 são enviados ao mesmo roteador, assim como os pacotes 2 e 4, portanto a autocorrelação de perda destes pacotes é a média da autocorrelação de perda dos roteadores.

No caso dos pacotes 1 e 2 (que são enviados para roteadores diferentes), esta medida é a correlação de perdas entre os dois roteadores.

Pode-se mostrar esta propriedade pelo seguinte lema, Lema 4.

Seja X(t) o processo estocástico que vale zero caso o pacote enviado pela fonte "Font" no tempo t tenha sido bem sucedido e um caso contrário e Y i (t) o mesmo processo estocástico só que neste caso os pacotes só serão enviados ao roteador i.

A autocorrelação de perda é a média da correlação das filas dos roteadores, ou seja, se o processo de perda for estacionário.

Autocorrelação da perda de pacotes da fonte multimídia determinística.

Pode-se pensar ao invés de tempo, em pacotes, ou seja, no tempo é enviado o pacote e nos casos onde a divisão não é inteira, a autocorrelação é zero.

Se t=fi é ímpar, então todos os pacotes serão enviados ao primeiro roteador, uma vez que a perda é estacionária e o mesmo vale para t=fi par.

Mostra o gráfico da autocorrelação de perda em três casos a saber, cada uma das duas On/Offs de tráfego multimídia envia pacotes por um dos caminhos "2 Exponencial Um Caminho" e a fonte multimídia analisada envia tráfego pelos dois caminhos.

As duas On/Offs de tráfego multimídia enviam pacotes por ambos os caminhos e a fonte multimídia analisada envia tráfego por apenas um caminho e Tipo TX Serviço/Transmissão On/Off OffOn Máximo da Fila.

Todas as fontes de tráfego enviam pacotes por ambos os caminhos.

Como podemos observar, quando a maior parte do tráfego usa diversidade de caminhos há correlação entre as filas dos roteadores, o que é ruim pois quanto maior a correlação entre as filas, menor o ganho do uso da diversidade de caminhos.

No caso extremo, onde a razão entre a correlação entre as filas e a autocorrelação das filas é um, os dois caminhos distintos se comportam como se fossem um só.

No caso estudado obtém-se uma autocorrelação maior que se poderia obter em uma rede real pois quase todo o tráfego de entrada nos roteadores é fortemente correlacionado e não há variação do atraso nos dois caminhos.

Esta correlação pode diminuir à medida que sejam considerados os atrasos aleatórios na rede, exatamente o foco de estudo desta sub-seção.

O modelo e os parâmetros são os mesmo com uma única diferença, no caminho entre a "Fonte Multimídia On/Off 2" e o "Routeador 2" existe um atraso aleatório de distribuição Normal ou Exponencial.

Na distribuição Normal, a variância é a metade da média.

Os parâmetros foram escolhidos com o intuito de avaliar o impacto de grandes diferenças de atrasos entre os caminhos "Fonte Multimídia On/Off.

Routeador 1" e "Fonte Multimídia On/Off Routeador 2".

A fonte de tráfego que está sendo medida não experimenta nenhum tipo de atraso, diminuindo ainda mais a correlação de perdas.

Mostra o mesmo modelo só que desta vez com atrasos aleatórios.

Por esta figura percebe-se que quanto maior o atraso inserido em relação ao tempo que a fonte fica ativa (período em "On") menor é a correlação entre as filas dos roteadores 1 e 2.

Autocorrelação entre da perda de pacotes da fonte multimídia determinística com atrasos aleatórios.

Ao mesmo tempo que a diversidade de caminhos cria uma dependência entre as perdas nas filas dos roteadores, ela também suaviza o tráfego das fontes o que implica diretamente em rajadas de perda menores nas filas dos roteadores.

Assumindo que as fontes On/Offs de tráfego multimídia transmitam tráfego à mesma taxa e que esta seja muito maior que a taxa de transição de "On"v para "Off", pode-se usar a técnica de fluidos para resolver o modelo.

Neste modelo existem S fontes On/Off de tráfego multimídia e a correlação nas duas filas é um, mas o nosso interesse é só na suavização causada pelo método de diversidade de caminhos.

Trabalhos anteriores sobre dispersão de tráfego (traffic dispersion), veja para uma coletânea dos trabalhos, mostraram que dividindo o tráfego por múltiplos caminhos diminui a razão entre a taxa de transmissão de pico e a taxa média de transmissão, o que afeta diretamente o tamanho das rajadas de perda.

Estes trabalhos entretanto não calculam em quanto é diminuída a rajada de perda.

Exemplo do gráfico de C(t) versus t "i Ativas" significa que i fontes estão ativas.

Seja X(t) o processo estocástico que representa o número de fontes On/Off ativas e P a matriz de probabilidade de transição associada ao processo discreto equivalente a X(t), onde o tempo entre transições é exponencialmente distribuído com taxa* (ver para maiores detalhes).

Seja também r i a recompensa associada ao estado i, que representa a taxa com que o reservatório do fluido (fila do roteador) está enchendo/esvaziando e e um vetor coluna onde todos os elementos são iguais a 1.

A quantidade de fluido no reservatório no tempo t é dado por C(t), que varia no intervalo, portanto significa que o reservatório está cheio no tempo t.

O objetivo é achar a distribuição de T full, o tempo que o reservatório permanece cheio.

Para tal, primeiramente, será calculada a probabilidade de ter enchido o reservatório no momento em que i fontes estão ativas, com esta probabilidade é possível determinar a distribuição do tempo em que o reservatório ficará cheio.

Os estados circulados por elipses ("3 Ativas" e "2 Ativas") são os estados de entrada no reservatório cheio.

Como o modelo é Markoviano (sem memória), uma vez encontrado o estado de entrada no reservatório cheio, o tempo que o reservatório continua cheio é igual ao tempo que, a partir do estado de entrada, o sistema fica com i fontes ativas, ou seja, o reservatório está sempre sendo enchido ou mantido constante.

Seja S o conjunto de estados i, o conjunto de estados i onde r i < 0.

W* é um vetor linha em que o seu j-ésimo componente é igual à probabilidade de o estado de entrada ser j, j 2 S 2.

Assim, w* é o vetor com as probabilidades dos estados no momento em que o reservatório enche.

Se P 22 é a matriz sub-estocástica de probabilidades de transição entre os estados de S 2 e P 11 a matriz sub-estocástica de probabilidades de transição dos estados de S 1, pode-se dividir a matriz de transição de probabilidade P da fonte.

A matriz de probabilidade de transição entre os estados que esvaziam o reservatório e os que enchem ou mantém constante o reservatório.

O componente é o número médio de visitas aos estados que enchem o reservatório dado que se começou esta jornada pelo estado m 2 S 2.

No caso específico das fontes On/Off, só se pode sair para os estados P 11 pelo estado que possui o menor número de fontes ativa entre os estados de S 2.

A probabilidade condicional de haver i fontes ativas dado que o reservatório está cheio poderia ser encontrada usando w* e P 22.

O objetivo agora é achar w* sabendo-se v S 2.

A complexidade para calcular v S 2 é a complexidade de resolver um sistema linear de ordem N +1 se todas as fontes On-Off são homogêneas, veja Pallares-Ségarra e García-Haro e suas referências para achar métodos aproximados ou mais precisos de calcular v S 2 para fontes On/Off homogêneas ou heterogêneas.

A partir de v S2, pode-se achar w* com w = v S 2 v S2 P 22 e w* = w=(w e).

Com w* pode-se achar a média do tamanho da rajada de perda através do número médio de visitas, já que [w* (I P 22) 1 ] e é o número médio de visitas aos os estados de S 2 após o reservatório ter enchido.

Cada transição do modelo dura em média.

A equação w (I P 22) 1 = v S2 tem um vetor solução w não nulo se P 22 for subestocástica.

De fato, uma vez obtido o vetor w* da probabilidade condicional dos estados em que primeiro enchem o reservatório, a distribuição deste tempo pode ser encontrada usando diversos métodos da literatura, em pode-se encontrar alguns destes métodos para matrizes com estruturas genéricas.

O cenário de exemplo tem as fontes On/Off com a média do tempo de ir de "Off" para "On" igual a 10 4 segundos, mesma média do tempo de "On" para "Off".

A capacidade do canal é 165Mbps e cada fonte transmite tráfego à 2Mbps, existem 30 fontes no total.

Nota-se que a carga no sistema é muito alta, aproximadamente 91%, exatamente para medir o comportamento do sistema em um caso extremo.

Através do método descrito acima, é possível obter E[T full ] = 15448 caso as fontes façam diversidade de caminhos e E[T full ] = 22090 se as fontes usam apenas um caminho.

Mostra a distribuição do tempo em que o reservatório permanece cheio, o que será também, dividindo o eixo do tempo do gráfico pelo tempo entre envio de pacotes, o gráfico da distribuição do tamanho da rajada de perda (rajadas que seriam muito grandes pois o sistema está com carga altíssima).

Caminhos disjuntos são caminhos que não compartilham os mesmos canais, ou se os compartilham, estes não são os pontos de gargalo na rede, de forma que a perda de pacote nestes caminho sejam independentes entre si.

Durante esta seção serão analisados cenários onde um tráfego multimídia toma metade da capacidade do canal e o método de diversidade de caminhos é largamente utilizado pelas aplicações multimídia.

O objetivo principal é analisar como os comportamentos descritos interagem entre si e como é o comportamento das rajadas de perda e a sua relação com o que já foi visto neste capítulo.

Distribuição do tempo em que o reservatório permanece cheio.

Ferramentas utilizadas nesta seção.

No primeiro exemplo (modelo de fluido) foi utilizada a ferramenta Tangram-II onde foi feito um modelo do TCP simplificado e no segundo exemplo (modelo de pacotes) foi utilizada a ferramenta ns pois esta última possui um modelo de TCP mais completo.

Simulação usando fluidos com o TCP sem controle de fluxo.

A primeira análise da relação entre o aumento da correlação de perda e a suavização do tráfego nas rajadas de perda será feita usando-se o modelo completo, onde o "Background Traffic" são fontes que simplificam o comportamento de fontes TCP (Reno), pois não simulam o controle de fluxo do TCP.

Somente é simulado o controle de congestionamento (fast start e fast recovery) conforme indicado abaixo.

Sem o controle de fluxo, o comportamento das fontes TCP é independente do tamanho do reservatório (o que não é verdade no caso real) até que haja uma perda na mesma.

Esta independência do tamanho do reservatório por parte da inexistência do controle de congestionamento ameniza a dependência entre os reservatórios ocasionada pelas fontes de tráfego multimídia.

Entretanto, conforme será visto a seguir, ainda assim este grau de independência do tráfego de fundo não é suficiente para eliminar a forte dependência entre as perdas nos dois reservatórios.

Todas as distribuições do modelo são exponenciais, exceto quando explicitamente dito o contrário.

Duas simulações foram feitas, uma com 100 e outra com 250 fontes TCP para cada roteador.

Ambos os modelos possuem 100 fontes On/Off representando o tráfego multimídia para ambos os roteadores.

O tempo médio no estado ativo das fontes On/Off é de 2000 segundos e o tempo médio inativo é de 200 segundos e a sua taxa de transmissão quando ativa é de 1Mbps.

Cada conexão TCP é simulada com quatro estágios, não enviando tráfego e enviando tráfego à taxas 0002, 001 e 005 Mbps.

O controle de congestionamento entra em ação quando o reservatório passa de dois limites estabelecidos (perto do reservatório cheio).

O primeiro limite (o mais baixo) a probabilidade de perda é menor que no segundo.

A probabilidade de perda é na verdade dividida entre a probabilidade de decrementar a sua janela pela metade e a probabilidade de ir para o estado "não enviando".

Uma destas ações somente acontece depois de um intervalo de tempo exponencialmente distribuído com média 1/RTT.

Para resolver o modelo foi usada a aproximação da taxa de transmissão de pacotes por um fluido contínuo.

Mostra a probabilidade condicional de perder m pacotes consecutivos se as fontes multimídia (On/Offs) utilizam de apenas um caminho.

A correlação de perda entre os reservatórios dos dois roteadores é representada pela diferença entre todas as fonte fazendo diversidade de caminhos ("Dois caminhos sem bottlenecks independentes") e somente uma fonte fazendo diversidade de caminhos ("Dois caminhos com bottlenecks independentes").

Apesar de haver esta correlação entre perdas nos reservatórios dos roteadores, conforme já apontado, mostra que ainda há vantagens em se usar diversidade de caminhos, principalmente pela suavização do tráfego causado pela diversidade de caminhos.

Contém 250 fontes TCP para cada roteador, com 100 fontes On/Off usando diversidade de caminhos Mostra o que acontece quando se diminui o tráfego de fundo.

Percebe-se que há uma sensível diminuição na probabilidade de haver uma grande rajada de perda quando as fontes todas utilizam diversidade de caminhos em relação ao caso de apenas um caminho.

Isso se deve à suavização de tráfego que a diversidade de caminhos causa, com menos tráfego de fundo o tráfego que chega ao roteador é mais "suave".

Se no TCP modelado houvesse controle de fluxo, é possível que o tamanho das rajadas de perda diminuísse sensivelmente, conforme acontece no próximo exemplo, onde o TCP foi simulado por pacote e com todos os seus mecanismos implementados em cada detalhe, 100 fontes TCP para cada roteador, com 100 fontes On/Off usando diversidade de caminhos.

Está descrito o modelo simulado onde todos os canais são full-duplex.

A distribuição do tempo em que as fontes multimídia ficam ativas é exponencialmente distribuído com média 10 3 segundos, o mesmo tempo que passam inativas e suas taxas de transmissão são constantes e igual a 1Mbps.

A capacidade máxima da fila de todos os roteadores é de 50 pacotes e a política de descarte é Drop-Tail.

Neste modelo foi usado um total de 80 fontes multimídia, gerando um tráfego médio de 40Mbps e 168 fontes TCP com um tráfego máximo de 40,32Mbps, este tráfego é o tráfego total que irá aos destinos "DEST1" somado a "DEST2".

O tempo total simulado no modelo foi de 83 horas (leva aproximadamente 10 dias em uma máquina Pentium 4 1,8GHz) e foram simuladas de 4 a 8 rodadas.

Pelo tempo de simulação ser muito grande, o modelo pode ter entrado em estado estacionário, o que explica as rodadas terem quase as mesmas estatísticas (em todas as rodadas foram obtidos os mesmos resultados).

Modelo do NS Pode-se notar o mesmo tipo de comportamento do que o obtido na figura, ou seja, somente uma fonte usando diversidade de caminhos é o cenário onde se obtém as melhores estatísticas para a fonte que faz diversidade de caminhos ("Apenas uma fazendo diversidade de caminhos").

O segundo melhor cenário é quando todas utilizam a diversidade de caminhos ("Todas as fontes usando diversidade de caminhos").

O terceiro melhor cenário para uma fonte usando diversidade de caminhos (e o melhor cenário para uma fonte que utiliza apena um caminho) é onde todas exceto uma fazem diversidade de caminhos ("Todas exceto uma fonte usando diversidade de caminhos").

O pior de todos os cenários é quando nenhuma fonte usa diversidade de caminhos ("Nenhuma fonte usando diversidade de caminhos").

Novamente observa-se a correlação de perda entre as duas filas quando há várias fontes fazendo diversidade de caminhos.

Esta correlação é representada pela diferença nas curvas entre "Apenas uma fazendo diversidade de caminhos" e "Nenhuma fonte usando diversidade de caminhos" ser muito maior que a diferença entre "Todas as fontes usando diversidade de caminhos" e "Todas exceto uma fonte usando diversidade de caminhos".

Ao mesmo tempo observa-se pela comparação das curvas de "Todas exceto uma fazendo diversidade de caminhos" e "Nenhuma fonte usando diversidade de caminhos" que a diversidade de caminhos diminui as rajadas de perda.

Distribuição condicional da rajada de perda para o modelo Devido à grande importância da qualidade de serviço nas aplicações em tempo real, diversos mecanismos de melhoria desta qualidade foram propostos na literatura.

Entre estes mecanismos está a diversidade de caminhos que recentemente tem recebido grande atenção e muitos esforços de pesquisa.

O objetivo deste trabalho foi levantar dois pontos não cobertos pela literatura.

O primeiro era verificar quais as vantagens e desvantagens ao se aplicar o método a mais de dois caminhos.

O segundo era averigüar a performance do método e quais são os fatores que a influenciam caso a diversidade de caminhos fosse largamente utilizado por usuários na Internet ou em uma rede privada.

A primeira análise, capítulo 3, concluiu que a utilização de mais caminhos não necessariamente melhora a qualidade de serviço da aplicação.

O impacto do aumento do número de caminhos sobre a qualidade de serviço depende dos requisitos da aplicação, mais precisamente, como ela se comporta com rajadas de perda de tamanho menor que o número de caminhos utilizados.

Esta análise leva a concluir que se uma aplicação tem a opção de aumentar o número de caminhos utilizados, deve-se primeiro avaliar o possível impacto desta escolha sobre sua qualidade de serviço se a inclusão do novo canal é vantajosa ou não para os seus requisitos de qualidade.

É o trabalho na literatura que mais se aproxima da análise feita neste capítulo, em especial a equação que é a extensão para N > 2 caminhos de uma equação para o caso de dois caminhos.

A segunda análise, capítulo 4, estudou a escalabilidade da diversidade de caminhos com um grande número de clientes de tempo real.

Este estudo visou identificar e isolar os diversos fatores que afetam a diversidade de caminhos quando há um grande número de clientes de tempo real, além de também quantizar a melhoria na qualidade de serviço em alguns cenários.

Concluiu-se que para melhorar a qualidade de serviço para todas as aplicações, o melhor é utilizar a diversidade de caminhos em todos os clientes de tempo real.

O melhor cenário individual, onde se está procurando a melhoria de apenas um cliente em tempo real, é que os demais clientes não utilizem a diversidade de caminhos e apenas este cliente de interesse a utilize.

Para estes estudos foi introduzida uma metodologia para análise de cálculo da distribuição do tempo que um reservatório enchido por uma fonte permanece cheio.

Além desta análise, uma equação mais geral para a distribuição de rajada de perda condicional foi encontrada, facilitando a verificação se o acréscimo de mais um caminho é benéfico ou não para a aplicação.

Também foram criados diversos modelos que auxiliam a análise de características de aplicações de rede de computadores.

Apesar de já existirem muitos pontos analisados pela literatura e por este presente trabalho, muitos outros pontos novos e extensões deste trabalho podem ser exploradas, algumas são citadas abaixo.

Incluir as equações de caminhos heterogêneos que, dentre todas as tarefas, parece ser a mais imediata.

Fazer um estudo comparativo entre a diversidade de caminhos e a técnica de packet interleaving para aplicações que não sejam de tempo real.

Melhoria do método estacionário para calcular a probabilidade do reservatório estar cheio e a fonte estar em um determinado estado.

Os métodos utilizados e descritos nas referências de são numericamente instáveis para um grande número de estados.

Quantificar, para alguns tipos de aplicações, qual o número ideal de caminhos de acordo com as estatísticas dos caminhos disponíveis.

